/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PMCPlugin
});
module.exports = __toCommonJS(main_exports);

// src/components/setting.ts
var import_obsidian4 = require("obsidian");

// src/components/tabs/google/types.ts
var DEFAULT_GOOGLE_SETTINGS = {
  clientId: "",
  accessToken: "",
  tokenExpiry: "unlimited",
  tokenExpiryDate: void 0
};
var TOKEN_EXPIRY_OPTIONS = {
  "1week": "1 Week",
  "1month": "1 Month",
  "3months": "3 Months",
  "6months": "6 Months",
  unlimited: "Unlimited (Until manually disconnected)"
};
var GOOGLE_OAUTH_CALLBACK_URL = "https://rajeevrajchal.github.io/pmc/oauth-callback";

// src/components/tabs/google/auth.ts
var import_obsidian = require("obsidian");
var GoogleAuth = class {
  /**
   * Initiate OAuth flow to connect to Google Calendar
   * @param clientId - OAuth 2.0 Client ID from Google Cloud Console
   */
  static initiateOAuthFlow(clientId) {
    if (!clientId || clientId.trim() === "") {
      new import_obsidian.Notice("Please configure Client ID first");
      return;
    }
    const authUrl = this.buildAuthUrl(clientId);
    new import_obsidian.Notice("Opening Google authentication...");
    window.open(authUrl, "_blank");
  }
  /**
   * Build the OAuth authorization URL
   */
  static buildAuthUrl(clientId) {
    const params = new URLSearchParams({
      client_id: clientId,
      redirect_uri: GOOGLE_OAUTH_CALLBACK_URL,
      response_type: "token",
      scope: this.SCOPES.join(" "),
      access_type: "online"
    });
    return `${this.OAUTH_URL}?${params.toString()}`;
  }
  /**
   * Disconnect from Google Calendar
   * Clears the stored access token
   */
  static disconnect() {
    new import_obsidian.Notice("Disconnected from Google Calendar");
  }
};
GoogleAuth.OAUTH_URL = "https://accounts.google.com/o/oauth2/v2/auth";
GoogleAuth.SCOPES = [
  "https://www.googleapis.com/auth/calendar.readonly",
  "https://www.googleapis.com/auth/calendar.events"
];

// src/components/tabs/google/calendar-api.ts
var import_obsidian2 = require("obsidian");
var GoogleCalendarAPI = class {
  /**
   * Fetch calendar events from Google Calendar
   * @param accessToken - OAuth access token
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @param query - Search query for events
   * @param timeMin - Start time for events (ISO 8601)
   * @param timeMax - End time for events (ISO 8601)
   * @param maxResults - Maximum number of events to return
   * @returns Array of calendar events
   */
  static async fetchEvents(accessToken, calendarId = "primary", query, timeMin, timeMax, maxResults = 250) {
    try {
      const params = {
        singleEvents: "true",
        orderBy: "startTime",
        maxResults: maxResults.toString()
      };
      if (timeMin) {
        params.timeMin = timeMin;
      }
      if (timeMax) {
        params.timeMax = timeMax;
      }
      if (query && query.trim() !== "") {
        params.q = query;
      }
      const queryString = new URLSearchParams(params).toString();
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events?${queryString}`,
        {
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json"
          }
        }
      );
      if (!response.ok) {
        const errorText = await response.text();
        console.error("API Error Response:", errorText);
        throw new Error(`Failed to fetch events: ${response.statusText}`);
      }
      const data = await response.json();
      return data.items || [];
    } catch (error) {
      console.error("Error fetching calendar events:", error);
      new import_obsidian2.Notice("Failed to fetch calendar events");
      throw error;
    }
  }
  /**
   * Create a new calendar event
   * @param accessToken - OAuth access token
   * @param event - Event details to create
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @returns Created event
   */
  static async createEvent(accessToken, event, calendarId = "primary") {
    try {
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events`,
        {
          method: "POST",
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify(event)
        }
      );
      if (!response.ok) {
        throw new Error(`Failed to create event: ${response.statusText}`);
      }
      const createdEvent = await response.json();
      new import_obsidian2.Notice("Event created successfully");
      return createdEvent;
    } catch (error) {
      console.error("Error creating calendar event:", error);
      new import_obsidian2.Notice("Failed to create calendar event");
      throw error;
    }
  }
  /**
   * Update an existing calendar event
   * @param accessToken - OAuth access token
   * @param eventId - ID of the event to update
   * @param event - Updated event details
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @returns Updated event
   */
  static async updateEvent(accessToken, eventId, event, calendarId = "primary") {
    try {
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events/${eventId}`,
        {
          method: "PUT",
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify(event)
        }
      );
      if (!response.ok) {
        throw new Error(`Failed to update event: ${response.statusText}`);
      }
      const updatedEvent = await response.json();
      new import_obsidian2.Notice("Event updated successfully");
      return updatedEvent;
    } catch (error) {
      console.error("Error updating calendar event:", error);
      new import_obsidian2.Notice("Failed to update calendar event");
      throw error;
    }
  }
  /**
   * Delete a calendar event
   * @param accessToken - OAuth access token
   * @param eventId - ID of the event to delete
   * @param calendarId - Calendar ID (defaults to 'primary')
   */
  static async deleteEvent(accessToken, eventId, calendarId = "primary") {
    try {
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events/${eventId}`,
        {
          method: "DELETE",
          headers: {
            Authorization: `Bearer ${accessToken}`
          }
        }
      );
      if (!response.ok) {
        throw new Error(`Failed to delete event: ${response.statusText}`);
      }
      new import_obsidian2.Notice("Event deleted successfully");
    } catch (error) {
      console.error("Error deleting calendar event:", error);
      new import_obsidian2.Notice("Failed to delete calendar event");
      throw error;
    }
  }
  /**
   * Get list of available calendars
   * @param accessToken - OAuth access token
   * @returns Array of calendar objects
   */
  static async listCalendars(accessToken) {
    try {
      const response = await fetch(`${this.BASE_URL}/users/me/calendarList`, {
        headers: {
          Authorization: `Bearer ${accessToken}`,
          "Content-Type": "application/json"
        }
      });
      if (!response.ok) {
        throw new Error(`Failed to fetch calendars: ${response.statusText}`);
      }
      const data = await response.json();
      return data.items || [];
    } catch (error) {
      console.error("Error fetching calendars:", error);
      new import_obsidian2.Notice("Failed to fetch calendars");
      throw error;
    }
  }
  /**
   * Sync calendar events (fetch and cache)
   * @param accessToken - OAuth access token
   */
  static async syncCalendar(accessToken) {
    try {
      new import_obsidian2.Notice("Syncing calendar...");
      const timeMin = (/* @__PURE__ */ new Date()).toISOString();
      const timeMax = new Date(
        Date.now() + 30 * 24 * 60 * 60 * 1e3
      ).toISOString();
      const events = await this.fetchEvents(
        accessToken,
        "primary",
        void 0,
        timeMin,
        timeMax
      );
      new import_obsidian2.Notice(`Synced ${events.length} events`);
      return;
    } catch (error) {
      console.error("Error syncing calendar:", error);
      new import_obsidian2.Notice("Failed to sync calendar");
      throw error;
    }
  }
};
GoogleCalendarAPI.BASE_URL = "https://www.googleapis.com/calendar/v3";

// src/components/tabs/google/settings-ui.ts
var import_obsidian3 = require("obsidian");

// src/components/tabs/google/token-manager.ts
var TokenManager = class {
  /**
   * Calculate token expiry date based on the selected option
   * @param expiryOption - The expiry option selected by the user
   * @returns Unix timestamp when token expires, or undefined for unlimited
   */
  static calculateExpiryDate(expiryOption) {
    if (expiryOption === "unlimited") {
      return void 0;
    }
    const now = Date.now();
    const millisecondsPerDay = 24 * 60 * 60 * 1e3;
    switch (expiryOption) {
      case "1week":
        return now + 7 * millisecondsPerDay;
      case "1month":
        return now + 30 * millisecondsPerDay;
      case "3months":
        return now + 90 * millisecondsPerDay;
      case "6months":
        return now + 180 * millisecondsPerDay;
      default:
        return void 0;
    }
  }
  /**
   * Check if the token has expired
   * @param expiryDate - Unix timestamp when token expires
   * @returns true if token is expired, false otherwise
   */
  static isTokenExpired(expiryDate) {
    if (!expiryDate) {
      return false;
    }
    return Date.now() >= expiryDate;
  }
  /**
   * Get human-readable time remaining until token expires
   * @param expiryDate - Unix timestamp when token expires
   * @returns Formatted string like "5 days", "2 hours", or "Unlimited"
   */
  static getTimeRemaining(expiryDate) {
    if (!expiryDate) {
      return "Unlimited";
    }
    const remaining = expiryDate - Date.now();
    if (remaining <= 0) {
      return "Expired";
    }
    const days = Math.floor(remaining / (24 * 60 * 60 * 1e3));
    const hours = Math.floor(remaining % (24 * 60 * 60 * 1e3) / (60 * 60 * 1e3));
    const minutes = Math.floor(remaining % (60 * 60 * 1e3) / (60 * 1e3));
    if (days > 0) {
      return `${days} day${days !== 1 ? "s" : ""}`;
    } else if (hours > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""}`;
    } else {
      return `${minutes} minute${minutes !== 1 ? "s" : ""}`;
    }
  }
  /**
   * Check if token needs refresh soon (within 24 hours)
   * @param expiryDate - Unix timestamp when token expires
   * @returns true if token expires within 24 hours
   */
  static needsRefreshSoon(expiryDate) {
    if (!expiryDate) {
      return false;
    }
    const oneDayInMs = 24 * 60 * 60 * 1e3;
    const remaining = expiryDate - Date.now();
    return remaining > 0 && remaining < oneDayInMs;
  }
  /**
   * Format expiry date to readable string
   * @param expiryDate - Unix timestamp when token expires
   * @returns Formatted date string
   */
  static formatExpiryDate(expiryDate) {
    if (!expiryDate) {
      return "Never";
    }
    const date = new Date(expiryDate);
    return date.toLocaleDateString(void 0, {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  }
};

// src/components/tabs/google/settings-ui.ts
var GoogleSettingsUI = class {
  /**
   * Render setup guide with step-by-step instructions
   */
  static renderSetupGuide(containerEl) {
    const setupSection = containerEl.createDiv({ cls: "pmc-setup-guide" });
    setupSection.createEl("h4", { text: "\u{1F4CB} Setup Guide" });
    const setupSteps = setupSection.createEl("ol");
    const step1 = setupSteps.createEl("li");
    step1.createEl("strong", { text: "Create a Google Cloud Project:" });
    const step1List = step1.createEl("ul");
    step1List.createEl("li").innerHTML = 'Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a>';
    step1List.createEl("li", {
      text: 'Click "Select a project" \u2192 "New Project"'
    });
    step1List.createEl("li", {
      text: 'Give it a name (e.g., "Obsidian PMC Plugin") and click "Create"'
    });
    const step2 = setupSteps.createEl("li");
    step2.createEl("strong", { text: "Enable Google Calendar API:" });
    const step2List = step2.createEl("ul");
    step2List.createEl("li", {
      text: 'In the sidebar, go to "APIs & Services" \u2192 "Library"'
    });
    step2List.createEl("li", { text: 'Search for "Google Calendar API"' });
    step2List.createEl("li", { text: 'Click on it and press "Enable"' });
    const step3 = setupSteps.createEl("li");
    step3.createEl("strong", { text: "Create OAuth 2.0 Credentials:" });
    const step3List = step3.createEl("ul");
    step3List.createEl("li", {
      text: 'Go to "APIs & Services" \u2192 "Credentials"'
    });
    step3List.createEl("li", {
      text: 'Click "Create Credentials" \u2192 "OAuth client ID"'
    });
    step3List.createEl("li", {
      text: "If prompted, configure the OAuth consent screen first"
    });
    step3List.createEl("li", {
      text: 'Select "Web application" as the application type'
    });
    step3List.createEl("li", { text: "Add this Authorized redirect URI: " }).createEl("code", { text: GOOGLE_OAUTH_CALLBACK_URL });
    step3List.createEl("li", {
      text: 'Click "Create" and copy your Client ID'
    });
    const step4 = setupSteps.createEl("li");
    step4.createEl("strong", {
      text: "Paste the Client ID below and click Connect"
    });
  }
  /**
   * Render OAuth callback URL setting
   */
  static renderCallbackUrlSetting(containerEl) {
    new import_obsidian3.Setting(containerEl).setName("OAuth Callback URL").setDesc("Use this URL when configuring your Google OAuth application").addText(
      (text) => text.setValue(GOOGLE_OAUTH_CALLBACK_URL).setDisabled(true)
    ).addButton(
      (btn) => btn.setButtonText("Copy").onClick(() => {
        navigator.clipboard.writeText(GOOGLE_OAUTH_CALLBACK_URL);
        new import_obsidian3.Notice("Callback URL copied to clipboard!");
      })
    );
  }
  /**
   * Render Client ID input setting
   */
  static renderClientIdSetting(containerEl, currentClientId, onSave) {
    new import_obsidian3.Setting(containerEl).setName("Client ID").setDesc("OAuth 2.0 Client ID from Google Cloud Console").addText(
      (text) => text.setPlaceholder("123456789-abcdefg.apps.googleusercontent.com").setValue(currentClientId).onChange(async (value) => {
        await onSave(value.trim());
      })
    );
  }
  /**
   * Render token expiry dropdown setting
   */
  static renderTokenExpirySetting(containerEl, currentExpiry, onSave) {
    new import_obsidian3.Setting(containerEl).setName("Token Expiry").setDesc(
      "How long before the access token expires and requires re-authentication"
    ).addDropdown((dropdown) => {
      Object.entries(TOKEN_EXPIRY_OPTIONS).forEach(([key, label]) => {
        dropdown.addOption(key, label);
      });
      dropdown.setValue(currentExpiry).onChange(async (value) => {
        await onSave(value);
      });
    });
  }
  /**
   * Render token status information
   */
  static renderTokenStatus(containerEl, expiryDate) {
    if (!expiryDate) return;
    const timeRemaining = TokenManager.getTimeRemaining(expiryDate);
    const isExpired = TokenManager.isTokenExpired(expiryDate);
    const needsRefresh = TokenManager.needsRefreshSoon(expiryDate);
    const statusText = isExpired ? "\u26A0\uFE0F Token expired" : needsRefresh ? `\u26A0\uFE0F Token expires in ${timeRemaining}` : `Token valid for ${timeRemaining}`;
    new import_obsidian3.Setting(containerEl).setName("Token Status").setDesc(statusText);
  }
  /**
   * Render account connection setting with buttons
   */
  static renderAccountSetting(containerEl, isConnected, clientId, onConnect, onDisconnect, onSync) {
    console.log("is connected:", isConnected);
    const accountSetting = new import_obsidian3.Setting(containerEl).setName("Account").setDesc(isConnected ? "\u2705 Connected" : "\u274C Not Connected");
    if (isConnected) {
      accountSetting.addButton(
        (btn) => btn.setButtonText("Sync Calendar").onClick(async () => {
          await onSync();
        })
      );
      accountSetting.addButton(
        (btn) => btn.setWarning().setButtonText("Disconnect").onClick(async () => {
          await onDisconnect();
        })
      );
    } else {
      if (!clientId || clientId === "") {
        accountSetting.setDesc("\u26A0\uFE0F Please set Client ID first");
      } else {
        accountSetting.addButton(
          (btn) => btn.setCta().setButtonText("Connect to Google").onClick(() => {
            onConnect();
          })
        );
      }
    }
  }
};

// src/components/setting.ts
var DEFAULT_SETTINGS = {
  ...DEFAULT_GOOGLE_SETTINGS
};
var PMCPluginSetting = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h3", { text: "Google Calendar Integration" });
    GoogleSettingsUI.renderSetupGuide(containerEl);
    GoogleSettingsUI.renderCallbackUrlSetting(containerEl);
    GoogleSettingsUI.renderClientIdSetting(
      containerEl,
      this.plugin.settings.clientId,
      async (clientId) => {
        this.plugin.settings.clientId = clientId;
        await this.plugin.saveSettings();
        this.display();
      }
    );
    GoogleSettingsUI.renderTokenExpirySetting(
      containerEl,
      this.plugin.settings.tokenExpiry,
      async (expiry) => {
        this.plugin.settings.tokenExpiry = expiry;
        this.plugin.settings.tokenExpiryDate = TokenManager.calculateExpiryDate(expiry);
        await this.plugin.saveSettings();
        this.display();
      }
    );
    if (this.plugin.settings.accessToken && this.plugin.settings.tokenExpiryDate) {
      GoogleSettingsUI.renderTokenStatus(
        containerEl,
        this.plugin.settings.tokenExpiryDate
      );
    }
    GoogleSettingsUI.renderAccountSetting(
      containerEl,
      !!this.plugin.settings.accessToken,
      this.plugin.settings.clientId,
      () => {
        GoogleAuth.initiateOAuthFlow(this.plugin.settings.clientId);
      },
      async () => {
        this.plugin.settings.accessToken = "";
        this.plugin.settings.tokenExpiryDate = void 0;
        await this.plugin.saveSettings();
        this.display();
        GoogleAuth.disconnect();
      },
      async () => {
        await GoogleCalendarAPI.syncCalendar(this.plugin.settings.accessToken);
      }
    );
  }
};

// src/main.ts
var import_obsidian7 = require("obsidian");

// src/components/event-suggestion.ts
var import_obsidian5 = require("obsidian");
var EditorEventSuggestion = class extends import_obsidian5.EditorSuggest {
  // 5 minutes
  constructor(app, plugin) {
    super(app);
    this.cachedEvents = [];
    this.lastFetchTime = 0;
    this.CACHE_DURATION = 5 * 60 * 1e3;
    this.plugin = plugin;
  }
  onTrigger(cursor, editor, file) {
    const line = editor.getLine(cursor.line);
    const textBeforeCursor = line.substring(0, cursor.ch);
    if (textBeforeCursor.endsWith(":")) {
      new import_obsidian5.Notice("Trigger activated!");
      return {
        start: { line: cursor.line, ch: cursor.ch - 1 },
        end: cursor,
        query: ""
      };
    }
    return null;
  }
  async fetchEventsWithCache(query) {
    const now = Date.now();
    const shouldRefetch = now - this.lastFetchTime > this.CACHE_DURATION;
    if (shouldRefetch || this.cachedEvents.length === 0) {
      try {
        const timeMin = new Date(
          Date.now() - 7 * 24 * 60 * 60 * 1e3
        ).toISOString();
        const timeMax = new Date(
          Date.now() + 90 * 24 * 60 * 60 * 1e3
        ).toISOString();
        this.cachedEvents = await GoogleCalendarAPI.fetchEvents(
          this.plugin.settings.accessToken,
          "primary",
          void 0,
          timeMin,
          timeMax
        );
        this.lastFetchTime = now;
      } catch (error) {
        console.error("Error fetching events:", error);
        return [];
      }
    }
    return this.cachedEvents;
  }
  filterEvents(events, query) {
    if (!query || query.trim() === "") {
      return events;
    }
    const lowerQuery = query.toLowerCase().trim();
    return events.filter((event) => {
      var _a, _b, _c, _d;
      if ((_a = event.summary) == null ? void 0 : _a.toLowerCase().includes(lowerQuery)) {
        return true;
      }
      if ((_b = event.description) == null ? void 0 : _b.toLowerCase().includes(lowerQuery)) {
        return true;
      }
      if ((_c = event.location) == null ? void 0 : _c.toLowerCase().includes(lowerQuery)) {
        return true;
      }
      if ((_d = event.attendees) == null ? void 0 : _d.some(
        (attendee) => {
          var _a2, _b2;
          return ((_a2 = attendee.email) == null ? void 0 : _a2.toLowerCase().includes(lowerQuery)) || ((_b2 = attendee.displayName) == null ? void 0 : _b2.toLowerCase().includes(lowerQuery));
        }
      )) {
        return true;
      }
      return false;
    });
  }
  // return list of suggestions
  async getSuggestions(context) {
    if (this.plugin.settings.accessToken === "") {
      console.log("connect google calendar first");
      new import_obsidian5.Notice("Please connect to Google Calendar first");
      return [];
    }
    const query = (context.query || "").trim();
    console.log("the query", {
      query,
      accessToken: this.plugin.settings.accessToken
    });
    try {
      const allEvents = await this.fetchEventsWithCache();
      const filteredEvents = this.filterEvents(allEvents, query);
      console.log("filtered events", filteredEvents);
      const suggestions = [];
      if (query && query.length > 0) {
        suggestions.push({
          isCreate: true,
          summary: `+ Create new event: "${query}"`
        });
      }
      suggestions.push(
        ...filteredEvents.map((event) => ({
          event,
          summary: event.summary || event.description || "Untitled Event"
        }))
      );
      return suggestions;
    } catch (error) {
      console.error("Error getting suggestions:", error);
      return [];
    }
  }
  // render each suggestion
  renderSuggestion(item, el) {
    el.empty();
    const container = el.createDiv({ cls: "gcal-suggestion-container" });
    container.style.cssText = "display: flex; justify-content: space-between; align-items: center; padding: 4px 0;";
    if (item.isCreate) {
      new import_obsidian5.Notice("create new event feature coming soon!");
    } else if (item.event) {
      const event = item.event;
      const leftDiv = container.createDiv();
      leftDiv.style.cssText = "flex: 1; min-width: 0;";
      const titleEl = leftDiv.createEl("div", {
        text: event.summary || "Untitled Event",
        cls: "gcal-event-title"
      });
      titleEl.style.cssText = "font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;";
      if (event.location) {
        const locationEl = leftDiv.createEl("div", {
          text: event.location,
          cls: "gcal-event-location"
        });
        locationEl.style.cssText = "font-size: 0.8em; color: var(--text-muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-top: 2px;";
      }
      const rightDiv = container.createDiv();
      rightDiv.style.cssText = "flex-shrink: 0; margin-left: 12px; text-align: right;";
      try {
        const startDate = new Date(
          event.start.dateTime || event.start.date || ""
        );
        const now = /* @__PURE__ */ new Date();
        const isToday = startDate.toDateString() === now.toDateString();
        const isTomorrow = startDate.toDateString() === new Date(now.getTime() + 864e5).toDateString();
        let dateStr = "";
        if (isToday) {
          dateStr = "Today";
        } else if (isTomorrow) {
          dateStr = "Tomorrow";
        } else {
          dateStr = startDate.toLocaleDateString([], {
            month: "short",
            day: "numeric",
            year: startDate.getFullYear() !== now.getFullYear() ? "numeric" : void 0
          });
        }
        let timeStr = "";
        if (event.start.dateTime) {
          timeStr = startDate.toLocaleTimeString([], {
            hour: "numeric",
            minute: "2-digit",
            hour12: true
          });
        } else {
          timeStr = "All day";
        }
        const dateEl = rightDiv.createEl("div", {
          text: dateStr,
          cls: "gcal-event-date"
        });
        dateEl.style.cssText = "font-size: 0.85em; color: var(--text-muted);";
        const timeEl = rightDiv.createEl("div", {
          text: timeStr,
          cls: "gcal-event-time"
        });
        timeEl.style.cssText = "font-size: 0.9em; font-weight: 500;";
        if (event.hangoutLink || event.conferenceData) {
          const conferenceEl = rightDiv.createEl("div", {
            text: "\u{1F3A5} Video",
            cls: "gcal-event-conference"
          });
          conferenceEl.style.cssText = "font-size: 0.75em; color: var(--interactive-accent); margin-top: 2px;";
        }
      } catch (e) {
        console.error("Error formatting date:", e);
        rightDiv.createEl("small", {
          text: "Invalid date",
          attr: { style: "color: var(--text-error);" }
        });
      }
    }
  }
  // user selects a suggestion
  selectSuggestion(item, evt) {
    if (!this.context) {
      console.error("No context available");
      return;
    }
    if (item.isCreate) {
      new import_obsidian5.Notice("create new event feature coming soon!");
    } else if (item.event) {
      const event = item.event;
      const eventLink = event.htmlLink || `https://calendar.google.com/calendar/event?eid=${encodeURIComponent(event.id)}`;
      const eventTitle = event.summary || "Untitled Event";
      const formattedText = `[${eventTitle}](${eventLink})`;
      this.context.editor.replaceRange(
        formattedText,
        this.context.start,
        this.context.end
      );
    }
  }
  // Clear cache when needed (can be called from plugin)
  clearCache() {
    this.cachedEvents = [];
    this.lastFetchTime = 0;
  }
};

// src/components/donate-modal.ts
var import_obsidian6 = require("obsidian");
var DonationModal = class extends import_obsidian6.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("donation-modal");
    contentEl.createEl("h2", {
      text: "\u2764\uFE0F Support Development",
      cls: "donation-header"
    });
    contentEl.createEl("p", {
      text: "If you enjoy using this plugin, consider supporting its development! Your support helps keep this project alive and enables new features.",
      cls: "donation-description"
    });
    new import_obsidian6.Setting(contentEl).setName("\u2615 Buy Me a Coffee").setDesc("Support with a one-time donation").addButton(
      (btn) => btn.setButtonText("Donate").setCta().onClick(() => {
        window.open("https://www.buymeacoffee.com/yourusername", "_blank");
      })
    );
    new import_obsidian6.Setting(contentEl).setName("\u2B50 GitHub Sponsors").setDesc("Sponsor on GitHub for recurring support").addButton(
      (btn) => btn.setButtonText("Become a Sponsor").onClick(() => {
        window.open("https://github.com/sponsors/yourusername", "_blank");
      })
    );
    contentEl.createEl("p", {
      text: "Thank you for your support! Every contribution helps improve this plugin. \u{1F64F}",
      cls: "donation-thanks"
    });
    new import_obsidian6.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Close").onClick(() => {
        this.close();
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/main.ts
var PMCPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.settingTab = null;
    this.editorSuggestion = null;
  }
  async onload() {
    await this.loadSettings();
    this.settingTab = new PMCPluginSetting(this.app, this);
    this.addSettingTab(this.settingTab);
    this.addRibbonIcon(
      "heart",
      "Support Plugin Development",
      (evt) => {
        new DonationModal(this.app).open();
      }
    );
    this.registerObsidianProtocolHandler("pick-meeting-token", async (data) => {
      var _a;
      const token = data.access_token;
      if (token) {
        this.settings.accessToken = token;
        await this.saveSettings();
        (_a = this.settingTab) == null ? void 0 : _a.display();
        new import_obsidian7.Notice("\u2705 Google Calendar Connected!");
      } else {
        new import_obsidian7.Notice(
          `\u274C Connection failed: ${data.error || "No token found in response"}`
        );
      }
    });
    this.editorSuggestion = new EditorEventSuggestion(this.app, this);
    this.registerEditorSuggest(this.editorSuggestion);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZy50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS90eXBlcy50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS9hdXRoLnRzIiwgInNyYy9jb21wb25lbnRzL3RhYnMvZ29vZ2xlL2NhbGVuZGFyLWFwaS50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS9zZXR0aW5ncy11aS50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS90b2tlbi1tYW5hZ2VyLnRzIiwgInNyYy9jb21wb25lbnRzL2V2ZW50LXN1Z2dlc3Rpb24udHMiLCAic3JjL2NvbXBvbmVudHMvZG9uYXRlLW1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuICBERUZBVUxUX1NFVFRJTkdTLFxuICBQTUNQbHVnaW5TZXR0aW5nLFxuICBQTUNQbHVnaW5TZXR0aW5nVHlwZSxcbn0gZnJvbSBcImNvbXBvbmVudHMvc2V0dGluZ1wiO1xuaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgeyBFZGl0b3JFdmVudFN1Z2dlc3Rpb24gfSBmcm9tIFwiY29tcG9uZW50cy9ldmVudC1zdWdnZXN0aW9uXCI7XG5pbXBvcnQgeyBEb25hdGlvbk1vZGFsIH0gZnJvbSBcImNvbXBvbmVudHMvZG9uYXRlLW1vZGFsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBNQ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBQTUNQbHVnaW5TZXR0aW5nVHlwZTtcbiAgc2V0dGluZ1RhYjogUE1DUGx1Z2luU2V0dGluZyB8IG51bGwgPSBudWxsO1xuICBlZGl0b3JTdWdnZXN0aW9uOiBFZGl0b3JFdmVudFN1Z2dlc3Rpb24gfCBudWxsID0gbnVsbDtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vcmVnaXN0ZXIgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5zZXR0aW5nVGFiID0gbmV3IFBNQ1BsdWdpblNldHRpbmcodGhpcy5hcHAsIHRoaXMpO1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdUYWIpO1xuXG4gICAgLy8gQWRkIGRvbmF0ZSB0YWIgXHUyNzY0XHVGRTBGXG4gICAgdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgXCJoZWFydFwiLFxuICAgICAgXCJTdXBwb3J0IFBsdWdpbiBEZXZlbG9wbWVudFwiLFxuICAgICAgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBuZXcgRG9uYXRpb25Nb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy9nb29nbGUgb2F1dGggY2FsbGJhY2sgaGFuZGxlclxuICAgIHRoaXMucmVnaXN0ZXJPYnNpZGlhblByb3RvY29sSGFuZGxlcihcInBpY2stbWVldGluZy10b2tlblwiLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBkYXRhLmFjY2Vzc190b2tlbjtcblxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYWNjZXNzVG9rZW4gPSB0b2tlbjtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nVGFiPy5kaXNwbGF5KCk7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTI3MDUgR29vZ2xlIENhbGVuZGFyIENvbm5lY3RlZCFcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgIGBcdTI3NEMgQ29ubmVjdGlvbiBmYWlsZWQ6ICR7ZGF0YS5lcnJvciB8fCBcIk5vIHRva2VuIGZvdW5kIGluIHJlc3BvbnNlXCJ9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vcmVnaXN0ZXIgZWRpdG9yIHN1Z2dlc3Rpb25cbiAgICB0aGlzLmVkaXRvclN1Z2dlc3Rpb24gPSBuZXcgRWRpdG9yRXZlbnRTdWdnZXN0aW9uKHRoaXMuYXBwLCB0aGlzKTtcbiAgICB0aGlzLnJlZ2lzdGVyRWRpdG9yU3VnZ2VzdCh0aGlzLmVkaXRvclN1Z2dlc3Rpb24pO1xuICB9XG5cbiAgb251bmxvYWQoKSB7fVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgREVGQVVMVF9TRVRUSU5HUyxcbiAgICAgIChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8UE1DUGx1Z2luU2V0dGluZ1R5cGU+LFxuICAgICk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxufVxuIiwgImltcG9ydCBQTUNQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtcbiAgR29vZ2xlQ2FsZW5kYXJTZXR0aW5ncyxcbiAgREVGQVVMVF9HT09HTEVfU0VUVElOR1MsXG4gIFRva2VuRXhwaXJ5T3B0aW9uLFxufSBmcm9tIFwiLi90YWJzL2dvb2dsZS90eXBlc1wiO1xuaW1wb3J0IHsgR29vZ2xlQXV0aCB9IGZyb20gXCIuL3RhYnMvZ29vZ2xlL2F1dGhcIjtcbmltcG9ydCB7IEdvb2dsZUNhbGVuZGFyQVBJIH0gZnJvbSBcIi4vdGFicy9nb29nbGUvY2FsZW5kYXItYXBpXCI7XG5pbXBvcnQgeyBHb29nbGVTZXR0aW5nc1VJIH0gZnJvbSBcIi4vdGFicy9nb29nbGUvc2V0dGluZ3MtdWlcIjtcbmltcG9ydCB7IFRva2VuTWFuYWdlciB9IGZyb20gXCIuL3RhYnMvZ29vZ2xlL3Rva2VuLW1hbmFnZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBQTUNQbHVnaW5TZXR0aW5nVHlwZSBleHRlbmRzIEdvb2dsZUNhbGVuZGFyU2V0dGluZ3Mge31cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBNQ1BsdWdpblNldHRpbmdUeXBlID0ge1xuICAuLi5ERUZBVUxUX0dPT0dMRV9TRVRUSU5HUyxcbn07XG5cbmV4cG9ydCBjbGFzcyBQTUNQbHVnaW5TZXR0aW5nIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogUE1DUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBNQ1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgLy8gVGl0bGVcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJHb29nbGUgQ2FsZW5kYXIgSW50ZWdyYXRpb25cIiB9KTtcblxuICAgIC8vIFJlbmRlciBzZXR1cCBndWlkZVxuICAgIEdvb2dsZVNldHRpbmdzVUkucmVuZGVyU2V0dXBHdWlkZShjb250YWluZXJFbCk7XG4gICAgLy8gUmVuZGVyIE9BdXRoIGNhbGxiYWNrIFVSTFxuICAgIEdvb2dsZVNldHRpbmdzVUkucmVuZGVyQ2FsbGJhY2tVcmxTZXR0aW5nKGNvbnRhaW5lckVsKTtcbiAgICAvLyBSZW5kZXIgQ2xpZW50IElEIGlucHV0XG4gICAgR29vZ2xlU2V0dGluZ3NVSS5yZW5kZXJDbGllbnRJZFNldHRpbmcoXG4gICAgICBjb250YWluZXJFbCxcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWVudElkLFxuICAgICAgYXN5bmMgKGNsaWVudElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8gUmVuZGVyIFRva2VuIEV4cGlyeSBzZXR0aW5nXG4gICAgR29vZ2xlU2V0dGluZ3NVSS5yZW5kZXJUb2tlbkV4cGlyeVNldHRpbmcoXG4gICAgICBjb250YWluZXJFbCxcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5IGFzIFRva2VuRXhwaXJ5T3B0aW9uLFxuICAgICAgYXN5bmMgKGV4cGlyeTogVG9rZW5FeHBpcnlPcHRpb24pID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW5FeHBpcnkgPSBleHBpcnk7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5RGF0ZSA9XG4gICAgICAgICAgVG9rZW5NYW5hZ2VyLmNhbGN1bGF0ZUV4cGlyeURhdGUoZXhwaXJ5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8gUmVuZGVyIHRva2VuIHN0YXR1cyBpZiBjb25uZWN0ZWRcbiAgICBpZiAoXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbiAmJlxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW5FeHBpcnlEYXRlXG4gICAgKSB7XG4gICAgICBHb29nbGVTZXR0aW5nc1VJLnJlbmRlclRva2VuU3RhdHVzKFxuICAgICAgICBjb250YWluZXJFbCxcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW5FeHBpcnlEYXRlLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBSZW5kZXIgYWNjb3VudCBjb25uZWN0aW9uIHNlY3Rpb25cbiAgICBHb29nbGVTZXR0aW5nc1VJLnJlbmRlckFjY291bnRTZXR0aW5nKFxuICAgICAgY29udGFpbmVyRWwsXG4gICAgICAhIXRoaXMucGx1Z2luLnNldHRpbmdzLmFjY2Vzc1Rva2VuLFxuICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpZW50SWQsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIE9uIENvbm5lY3RcbiAgICAgICAgR29vZ2xlQXV0aC5pbml0aWF0ZU9BdXRoRmxvdyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGllbnRJZCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbiA9IFwiXCI7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5RGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICBHb29nbGVBdXRoLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IEdvb2dsZUNhbGVuZGFyQVBJLnN5bmNDYWxlbmRhcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbik7XG4gICAgICB9LFxuICAgICk7XG4gIH1cbn1cbiIsICJleHBvcnQgaW50ZXJmYWNlIEdvb2dsZUNhbGVuZGFyU2V0dGluZ3Mge1xuICBjbGllbnRJZDogc3RyaW5nO1xuICBhY2Nlc3NUb2tlbjogc3RyaW5nO1xuICB0b2tlbkV4cGlyeTogc3RyaW5nO1xuICB0b2tlbkV4cGlyeURhdGU/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0dPT0dMRV9TRVRUSU5HUzogR29vZ2xlQ2FsZW5kYXJTZXR0aW5ncyA9IHtcbiAgY2xpZW50SWQ6IFwiXCIsXG4gIGFjY2Vzc1Rva2VuOiBcIlwiLFxuICB0b2tlbkV4cGlyeTogXCJ1bmxpbWl0ZWRcIixcbiAgdG9rZW5FeHBpcnlEYXRlOiB1bmRlZmluZWQsXG59O1xuXG5leHBvcnQgdHlwZSBUb2tlbkV4cGlyeU9wdGlvbiA9XG4gIHwgXCIxd2Vla1wiXG4gIHwgXCIxbW9udGhcIlxuICB8IFwiM21vbnRoc1wiXG4gIHwgXCI2bW9udGhzXCJcbiAgfCBcInVubGltaXRlZFwiO1xuXG5leHBvcnQgY29uc3QgVE9LRU5fRVhQSVJZX09QVElPTlM6IFJlY29yZDxUb2tlbkV4cGlyeU9wdGlvbiwgc3RyaW5nPiA9IHtcbiAgXCIxd2Vla1wiOiBcIjEgV2Vla1wiLFxuICBcIjFtb250aFwiOiBcIjEgTW9udGhcIixcbiAgXCIzbW9udGhzXCI6IFwiMyBNb250aHNcIixcbiAgXCI2bW9udGhzXCI6IFwiNiBNb250aHNcIixcbiAgdW5saW1pdGVkOiBcIlVubGltaXRlZCAoVW50aWwgbWFudWFsbHkgZGlzY29ubmVjdGVkKVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IEdPT0dMRV9PQVVUSF9DQUxMQkFDS19VUkwgPVxuICBcImh0dHBzOi8vcmFqZWV2cmFqY2hhbC5naXRodWIuaW8vcG1jL29hdXRoLWNhbGxiYWNrXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT0F1dGhUb2tlblJlc3BvbnNlIHtcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNfaW46IG51bWJlcjtcbiAgc2NvcGU6IHN0cmluZztcbiAgdG9rZW5fdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbGVuZGFyRXZlbnQge1xuICBraW5kOiBzdHJpbmc7XG4gIGV0YWc6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGh0bWxMaW5rOiBzdHJpbmc7XG4gIGNyZWF0ZWQ6IHN0cmluZztcbiAgdXBkYXRlZDogc3RyaW5nO1xuICBzdW1tYXJ5OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgY3JlYXRvcj86IHtcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICAgIHNlbGY/OiBib29sZWFuO1xuICB9O1xuICBvcmdhbml6ZXI/OiB7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgICBzZWxmPzogYm9vbGVhbjtcbiAgfTtcbiAgc3RhcnQ6IHtcbiAgICBkYXRlVGltZT86IHN0cmluZztcbiAgICBkYXRlPzogc3RyaW5nO1xuICAgIHRpbWVab25lPzogc3RyaW5nO1xuICB9O1xuICBlbmQ6IHtcbiAgICBkYXRlVGltZT86IHN0cmluZztcbiAgICBkYXRlPzogc3RyaW5nO1xuICAgIHRpbWVab25lPzogc3RyaW5nO1xuICB9O1xuICBpQ2FsVUlEPzogc3RyaW5nO1xuICBzZXF1ZW5jZT86IG51bWJlcjtcbiAgYXR0ZW5kZWVzPzogQXJyYXk8e1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG4gICAgcmVzcG9uc2VTdGF0dXM/OiBzdHJpbmc7XG4gICAgc2VsZj86IGJvb2xlYW47XG4gICAgb3JnYW5pemVyPzogYm9vbGVhbjtcbiAgfT47XG4gIGhhbmdvdXRMaW5rPzogc3RyaW5nO1xuICBjb25mZXJlbmNlRGF0YT86IHtcbiAgICBjcmVhdGVSZXF1ZXN0Pzoge1xuICAgICAgcmVxdWVzdElkOiBzdHJpbmc7XG4gICAgICBjb25mZXJlbmNlU29sdXRpb25LZXk6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIHN0YXR1czoge1xuICAgICAgICBzdGF0dXNDb2RlOiBzdHJpbmc7XG4gICAgICB9O1xuICAgIH07XG4gICAgZW50cnlQb2ludHM/OiBBcnJheTx7XG4gICAgICBlbnRyeVBvaW50VHlwZTogc3RyaW5nO1xuICAgICAgdXJpOiBzdHJpbmc7XG4gICAgICBsYWJlbD86IHN0cmluZztcbiAgICB9PjtcbiAgICBjb25mZXJlbmNlU29sdXRpb24/OiB7XG4gICAgICBrZXk6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIGljb25Vcmk/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBjb25mZXJlbmNlSWQ/OiBzdHJpbmc7XG4gIH07XG4gIHJlbWluZGVycz86IHtcbiAgICB1c2VEZWZhdWx0OiBib29sZWFuO1xuICAgIG92ZXJyaWRlcz86IEFycmF5PHtcbiAgICAgIG1ldGhvZDogc3RyaW5nO1xuICAgICAgbWludXRlczogbnVtYmVyO1xuICAgIH0+O1xuICB9O1xuICBldmVudFR5cGU6IHN0cmluZztcbn1cbiIsICIvKipcbiAqIEdvb2dsZSBPQXV0aCBhdXRoZW50aWNhdGlvbiBhbmQgY29ubmVjdGlvbiBtYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBHT09HTEVfT0FVVEhfQ0FMTEJBQ0tfVVJMIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIEdvb2dsZUF1dGgge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBPQVVUSF9VUkwgPVxuICAgIFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3YyL2F1dGhcIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU0NPUEVTID0gW1xuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5ldmVudHNcIixcbiAgXTtcblxuICAvKipcbiAgICogSW5pdGlhdGUgT0F1dGggZmxvdyB0byBjb25uZWN0IHRvIEdvb2dsZSBDYWxlbmRhclxuICAgKiBAcGFyYW0gY2xpZW50SWQgLSBPQXV0aCAyLjAgQ2xpZW50IElEIGZyb20gR29vZ2xlIENsb3VkIENvbnNvbGVcbiAgICovXG4gIHN0YXRpYyBpbml0aWF0ZU9BdXRoRmxvdyhjbGllbnRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFjbGllbnRJZCB8fCBjbGllbnRJZC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIENsaWVudCBJRCBmaXJzdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhdXRoVXJsID0gdGhpcy5idWlsZEF1dGhVcmwoY2xpZW50SWQpO1xuXG4gICAgbmV3IE5vdGljZShcIk9wZW5pbmcgR29vZ2xlIGF1dGhlbnRpY2F0aW9uLi4uXCIpO1xuXG4gICAgLy8gT3BlbiBPQXV0aCBVUkwgaW4gYnJvd3NlclxuICAgIHdpbmRvdy5vcGVuKGF1dGhVcmwsIFwiX2JsYW5rXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIHRoZSBPQXV0aCBhdXRob3JpemF0aW9uIFVSTFxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgYnVpbGRBdXRoVXJsKGNsaWVudElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgY2xpZW50X2lkOiBjbGllbnRJZCxcbiAgICAgIHJlZGlyZWN0X3VyaTogR09PR0xFX09BVVRIX0NBTExCQUNLX1VSTCxcbiAgICAgIHJlc3BvbnNlX3R5cGU6IFwidG9rZW5cIixcbiAgICAgIHNjb3BlOiB0aGlzLlNDT1BFUy5qb2luKFwiIFwiKSxcbiAgICAgIGFjY2Vzc190eXBlOiBcIm9ubGluZVwiLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGAke3RoaXMuT0FVVEhfVVJMfT8ke3BhcmFtcy50b1N0cmluZygpfWA7XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCBmcm9tIEdvb2dsZSBDYWxlbmRhclxuICAgKiBDbGVhcnMgdGhlIHN0b3JlZCBhY2Nlc3MgdG9rZW5cbiAgICovXG4gIHN0YXRpYyBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIG5ldyBOb3RpY2UoXCJEaXNjb25uZWN0ZWQgZnJvbSBHb29nbGUgQ2FsZW5kYXJcIik7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgR29vZ2xlQ2FsZW5kYXJBUEkge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBCQVNFX1VSTCA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY2FsZW5kYXIvdjNcIjtcblxuICAvKipcbiAgICogRmV0Y2ggY2FsZW5kYXIgZXZlbnRzIGZyb20gR29vZ2xlIENhbGVuZGFyXG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gY2FsZW5kYXJJZCAtIENhbGVuZGFyIElEIChkZWZhdWx0cyB0byAncHJpbWFyeScpXG4gICAqIEBwYXJhbSBxdWVyeSAtIFNlYXJjaCBxdWVyeSBmb3IgZXZlbnRzXG4gICAqIEBwYXJhbSB0aW1lTWluIC0gU3RhcnQgdGltZSBmb3IgZXZlbnRzIChJU08gODYwMSlcbiAgICogQHBhcmFtIHRpbWVNYXggLSBFbmQgdGltZSBmb3IgZXZlbnRzIChJU08gODYwMSlcbiAgICogQHBhcmFtIG1heFJlc3VsdHMgLSBNYXhpbXVtIG51bWJlciBvZiBldmVudHMgdG8gcmV0dXJuXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIGNhbGVuZGFyIGV2ZW50c1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZldGNoRXZlbnRzKFxuICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmcsXG4gICAgY2FsZW5kYXJJZDogc3RyaW5nID0gXCJwcmltYXJ5XCIsXG4gICAgcXVlcnk/OiBzdHJpbmcsXG4gICAgdGltZU1pbj86IHN0cmluZyxcbiAgICB0aW1lTWF4Pzogc3RyaW5nLFxuICAgIG1heFJlc3VsdHM6IG51bWJlciA9IDI1MCxcbiAgKTogUHJvbWlzZTxDYWxlbmRhckV2ZW50W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICBzaW5nbGVFdmVudHM6IFwidHJ1ZVwiLFxuICAgICAgICBvcmRlckJ5OiBcInN0YXJ0VGltZVwiLFxuICAgICAgICBtYXhSZXN1bHRzOiBtYXhSZXN1bHRzLnRvU3RyaW5nKCksXG4gICAgICB9O1xuXG4gICAgICBpZiAodGltZU1pbikge1xuICAgICAgICBwYXJhbXMudGltZU1pbiA9IHRpbWVNaW47XG4gICAgICB9XG4gICAgICBpZiAodGltZU1heCkge1xuICAgICAgICBwYXJhbXMudGltZU1heCA9IHRpbWVNYXg7XG4gICAgICB9XG4gICAgICBpZiAocXVlcnkgJiYgcXVlcnkudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgIHBhcmFtcy5xID0gcXVlcnk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpLnRvU3RyaW5nKCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke3RoaXMuQkFTRV9VUkx9L2NhbGVuZGFycy8ke2NhbGVuZGFySWR9L2V2ZW50cz8ke3F1ZXJ5U3RyaW5nfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFQSSBFcnJvciBSZXNwb25zZTpcIiwgZXJyb3JUZXh0KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZXZlbnRzOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5pdGVtcyB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNhbGVuZGFyIGV2ZW50czpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBmZXRjaCBjYWxlbmRhciBldmVudHNcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGNhbGVuZGFyIGV2ZW50XG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gZXZlbnQgLSBFdmVudCBkZXRhaWxzIHRvIGNyZWF0ZVxuICAgKiBAcGFyYW0gY2FsZW5kYXJJZCAtIENhbGVuZGFyIElEIChkZWZhdWx0cyB0byAncHJpbWFyeScpXG4gICAqIEByZXR1cm5zIENyZWF0ZWQgZXZlbnRcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVFdmVudChcbiAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICAgIGV2ZW50OiBQYXJ0aWFsPENhbGVuZGFyRXZlbnQ+LFxuICAgIGNhbGVuZGFySWQ6IHN0cmluZyA9IFwicHJpbWFyeVwiLFxuICApOiBQcm9taXNlPENhbGVuZGFyRXZlbnQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5CQVNFX1VSTH0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJJZH0vZXZlbnRzYCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGV2ZW50KSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGV2ZW50OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRFdmVudCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJFdmVudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIHJldHVybiBjcmVhdGVkRXZlbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBjYWxlbmRhciBldmVudDpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBjcmVhdGUgY2FsZW5kYXIgZXZlbnRcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFuIGV4aXN0aW5nIGNhbGVuZGFyIGV2ZW50XG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gZXZlbnRJZCAtIElEIG9mIHRoZSBldmVudCB0byB1cGRhdGVcbiAgICogQHBhcmFtIGV2ZW50IC0gVXBkYXRlZCBldmVudCBkZXRhaWxzXG4gICAqIEBwYXJhbSBjYWxlbmRhcklkIC0gQ2FsZW5kYXIgSUQgKGRlZmF1bHRzIHRvICdwcmltYXJ5JylcbiAgICogQHJldHVybnMgVXBkYXRlZCBldmVudFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUV2ZW50KFxuICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmcsXG4gICAgZXZlbnRJZDogc3RyaW5nLFxuICAgIGV2ZW50OiBQYXJ0aWFsPENhbGVuZGFyRXZlbnQ+LFxuICAgIGNhbGVuZGFySWQ6IHN0cmluZyA9IFwicHJpbWFyeVwiLFxuICApOiBQcm9taXNlPENhbGVuZGFyRXZlbnQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5CQVNFX1VSTH0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJJZH0vZXZlbnRzLyR7ZXZlbnRJZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShldmVudCksXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBldmVudDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkRXZlbnQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBuZXcgTm90aWNlKFwiRXZlbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICByZXR1cm4gdXBkYXRlZEV2ZW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgY2FsZW5kYXIgZXZlbnQ6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gdXBkYXRlIGNhbGVuZGFyIGV2ZW50XCIpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGNhbGVuZGFyIGV2ZW50XG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gZXZlbnRJZCAtIElEIG9mIHRoZSBldmVudCB0byBkZWxldGVcbiAgICogQHBhcmFtIGNhbGVuZGFySWQgLSBDYWxlbmRhciBJRCAoZGVmYXVsdHMgdG8gJ3ByaW1hcnknKVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUV2ZW50KFxuICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmcsXG4gICAgZXZlbnRJZDogc3RyaW5nLFxuICAgIGNhbGVuZGFySWQ6IHN0cmluZyA9IFwicHJpbWFyeVwiLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5CQVNFX1VSTH0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJJZH0vZXZlbnRzLyR7ZXZlbnRJZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBldmVudDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKFwiRXZlbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjYWxlbmRhciBldmVudDpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBkZWxldGUgY2FsZW5kYXIgZXZlbnRcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxpc3Qgb2YgYXZhaWxhYmxlIGNhbGVuZGFyc1xuICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBPQXV0aCBhY2Nlc3MgdG9rZW5cbiAgICogQHJldHVybnMgQXJyYXkgb2YgY2FsZW5kYXIgb2JqZWN0c1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGxpc3RDYWxlbmRhcnMoYWNjZXNzVG9rZW46IHN0cmluZyk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLkJBU0VfVVJMfS91c2Vycy9tZS9jYWxlbmRhckxpc3RgLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGNhbGVuZGFyczogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEuaXRlbXMgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjYWxlbmRhcnM6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gZmV0Y2ggY2FsZW5kYXJzXCIpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN5bmMgY2FsZW5kYXIgZXZlbnRzIChmZXRjaCBhbmQgY2FjaGUpXG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHN5bmNDYWxlbmRhcihhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIG5ldyBOb3RpY2UoXCJTeW5jaW5nIGNhbGVuZGFyLi4uXCIpO1xuXG4gICAgICAvLyBGZXRjaCBldmVudHMgZm9yIHRoZSBuZXh0IDMwIGRheXNcbiAgICAgIGNvbnN0IHRpbWVNaW4gPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBjb25zdCB0aW1lTWF4ID0gbmV3IERhdGUoXG4gICAgICAgIERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICApLnRvSVNPU3RyaW5nKCk7XG5cbiAgICAgIGNvbnN0IGV2ZW50cyA9IGF3YWl0IHRoaXMuZmV0Y2hFdmVudHMoXG4gICAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgICBcInByaW1hcnlcIixcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICB0aW1lTWluLFxuICAgICAgICB0aW1lTWF4LFxuICAgICAgKTtcblxuICAgICAgbmV3IE5vdGljZShgU3luY2VkICR7ZXZlbnRzLmxlbmd0aH0gZXZlbnRzYCk7XG5cbiAgICAgIC8vIFRPRE86IENhY2hlIGV2ZW50cyBsb2NhbGx5IGZvciBvZmZsaW5lIGFjY2Vzc1xuICAgICAgcmV0dXJuO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc3luY2luZyBjYWxlbmRhcjpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBzeW5jIGNhbGVuZGFyXCIpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1xuICBHT09HTEVfT0FVVEhfQ0FMTEJBQ0tfVVJMLFxuICBUT0tFTl9FWFBJUllfT1BUSU9OUyxcbiAgVG9rZW5FeHBpcnlPcHRpb24sXG59IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBUb2tlbk1hbmFnZXIgfSBmcm9tIFwiLi90b2tlbi1tYW5hZ2VyXCI7XG5cbmV4cG9ydCBjbGFzcyBHb29nbGVTZXR0aW5nc1VJIHtcbiAgLyoqXG4gICAqIFJlbmRlciBzZXR1cCBndWlkZSB3aXRoIHN0ZXAtYnktc3RlcCBpbnN0cnVjdGlvbnNcbiAgICovXG4gIHN0YXRpYyByZW5kZXJTZXR1cEd1aWRlKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGNvbnN0IHNldHVwU2VjdGlvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogXCJwbWMtc2V0dXAtZ3VpZGVcIiB9KTtcbiAgICBzZXR1cFNlY3Rpb24uY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiXHVEODNEXHVEQ0NCIFNldHVwIEd1aWRlXCIgfSk7XG5cbiAgICBjb25zdCBzZXR1cFN0ZXBzID0gc2V0dXBTZWN0aW9uLmNyZWF0ZUVsKFwib2xcIik7XG5cbiAgICAvLyBTdGVwIDE6IENyZWF0ZSBHb29nbGUgQ2xvdWQgUHJvamVjdFxuICAgIGNvbnN0IHN0ZXAxID0gc2V0dXBTdGVwcy5jcmVhdGVFbChcImxpXCIpO1xuICAgIHN0ZXAxLmNyZWF0ZUVsKFwic3Ryb25nXCIsIHsgdGV4dDogXCJDcmVhdGUgYSBHb29nbGUgQ2xvdWQgUHJvamVjdDpcIiB9KTtcbiAgICBjb25zdCBzdGVwMUxpc3QgPSBzdGVwMS5jcmVhdGVFbChcInVsXCIpO1xuICAgIHN0ZXAxTGlzdC5jcmVhdGVFbChcImxpXCIpLmlubmVySFRNTCA9XG4gICAgICAnR28gdG8gPGEgaHJlZj1cImh0dHBzOi8vY29uc29sZS5jbG91ZC5nb29nbGUuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPkdvb2dsZSBDbG91ZCBDb25zb2xlPC9hPic7XG4gICAgc3RlcDFMaXN0LmNyZWF0ZUVsKFwibGlcIiwge1xuICAgICAgdGV4dDogJ0NsaWNrIFwiU2VsZWN0IGEgcHJvamVjdFwiIFx1MjE5MiBcIk5ldyBQcm9qZWN0XCInLFxuICAgIH0pO1xuICAgIHN0ZXAxTGlzdC5jcmVhdGVFbChcImxpXCIsIHtcbiAgICAgIHRleHQ6ICdHaXZlIGl0IGEgbmFtZSAoZS5nLiwgXCJPYnNpZGlhbiBQTUMgUGx1Z2luXCIpIGFuZCBjbGljayBcIkNyZWF0ZVwiJyxcbiAgICB9KTtcblxuICAgIC8vIFN0ZXAgMjogRW5hYmxlIEdvb2dsZSBDYWxlbmRhciBBUElcbiAgICBjb25zdCBzdGVwMiA9IHNldHVwU3RlcHMuY3JlYXRlRWwoXCJsaVwiKTtcbiAgICBzdGVwMi5jcmVhdGVFbChcInN0cm9uZ1wiLCB7IHRleHQ6IFwiRW5hYmxlIEdvb2dsZSBDYWxlbmRhciBBUEk6XCIgfSk7XG4gICAgY29uc3Qgc3RlcDJMaXN0ID0gc3RlcDIuY3JlYXRlRWwoXCJ1bFwiKTtcbiAgICBzdGVwMkxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7XG4gICAgICB0ZXh0OiAnSW4gdGhlIHNpZGViYXIsIGdvIHRvIFwiQVBJcyAmIFNlcnZpY2VzXCIgXHUyMTkyIFwiTGlicmFyeVwiJyxcbiAgICB9KTtcbiAgICBzdGVwMkxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7IHRleHQ6ICdTZWFyY2ggZm9yIFwiR29vZ2xlIENhbGVuZGFyIEFQSVwiJyB9KTtcbiAgICBzdGVwMkxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7IHRleHQ6ICdDbGljayBvbiBpdCBhbmQgcHJlc3MgXCJFbmFibGVcIicgfSk7XG5cbiAgICAvLyBTdGVwIDM6IENyZWF0ZSBPQXV0aCBDcmVkZW50aWFsc1xuICAgIGNvbnN0IHN0ZXAzID0gc2V0dXBTdGVwcy5jcmVhdGVFbChcImxpXCIpO1xuICAgIHN0ZXAzLmNyZWF0ZUVsKFwic3Ryb25nXCIsIHsgdGV4dDogXCJDcmVhdGUgT0F1dGggMi4wIENyZWRlbnRpYWxzOlwiIH0pO1xuICAgIGNvbnN0IHN0ZXAzTGlzdCA9IHN0ZXAzLmNyZWF0ZUVsKFwidWxcIik7XG4gICAgc3RlcDNMaXN0LmNyZWF0ZUVsKFwibGlcIiwge1xuICAgICAgdGV4dDogJ0dvIHRvIFwiQVBJcyAmIFNlcnZpY2VzXCIgXHUyMTkyIFwiQ3JlZGVudGlhbHNcIicsXG4gICAgfSk7XG4gICAgc3RlcDNMaXN0LmNyZWF0ZUVsKFwibGlcIiwge1xuICAgICAgdGV4dDogJ0NsaWNrIFwiQ3JlYXRlIENyZWRlbnRpYWxzXCIgXHUyMTkyIFwiT0F1dGggY2xpZW50IElEXCInLFxuICAgIH0pO1xuICAgIHN0ZXAzTGlzdC5jcmVhdGVFbChcImxpXCIsIHtcbiAgICAgIHRleHQ6IFwiSWYgcHJvbXB0ZWQsIGNvbmZpZ3VyZSB0aGUgT0F1dGggY29uc2VudCBzY3JlZW4gZmlyc3RcIixcbiAgICB9KTtcbiAgICBzdGVwM0xpc3QuY3JlYXRlRWwoXCJsaVwiLCB7XG4gICAgICB0ZXh0OiAnU2VsZWN0IFwiV2ViIGFwcGxpY2F0aW9uXCIgYXMgdGhlIGFwcGxpY2F0aW9uIHR5cGUnLFxuICAgIH0pO1xuICAgIHN0ZXAzTGlzdFxuICAgICAgLmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiBcIkFkZCB0aGlzIEF1dGhvcml6ZWQgcmVkaXJlY3QgVVJJOiBcIiB9KVxuICAgICAgLmNyZWF0ZUVsKFwiY29kZVwiLCB7IHRleHQ6IEdPT0dMRV9PQVVUSF9DQUxMQkFDS19VUkwgfSk7XG4gICAgc3RlcDNMaXN0LmNyZWF0ZUVsKFwibGlcIiwge1xuICAgICAgdGV4dDogJ0NsaWNrIFwiQ3JlYXRlXCIgYW5kIGNvcHkgeW91ciBDbGllbnQgSUQnLFxuICAgIH0pO1xuXG4gICAgLy8gU3RlcCA0OiBDb25maWd1cmUgcGx1Z2luXG4gICAgY29uc3Qgc3RlcDQgPSBzZXR1cFN0ZXBzLmNyZWF0ZUVsKFwibGlcIik7XG4gICAgc3RlcDQuY3JlYXRlRWwoXCJzdHJvbmdcIiwge1xuICAgICAgdGV4dDogXCJQYXN0ZSB0aGUgQ2xpZW50IElEIGJlbG93IGFuZCBjbGljayBDb25uZWN0XCIsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIE9BdXRoIGNhbGxiYWNrIFVSTCBzZXR0aW5nXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyQ2FsbGJhY2tVcmxTZXR0aW5nKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJPQXV0aCBDYWxsYmFjayBVUkxcIilcbiAgICAgIC5zZXREZXNjKFwiVXNlIHRoaXMgVVJMIHdoZW4gY29uZmlndXJpbmcgeW91ciBHb29nbGUgT0F1dGggYXBwbGljYXRpb25cIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0LnNldFZhbHVlKEdPT0dMRV9PQVVUSF9DQUxMQkFDS19VUkwpLnNldERpc2FibGVkKHRydWUpLFxuICAgICAgKVxuICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkNvcHlcIikub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoR09PR0xFX09BVVRIX0NBTExCQUNLX1VSTCk7XG4gICAgICAgICAgbmV3IE5vdGljZShcIkNhbGxiYWNrIFVSTCBjb3BpZWQgdG8gY2xpcGJvYXJkIVwiKTtcbiAgICAgICAgfSksXG4gICAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBDbGllbnQgSUQgaW5wdXQgc2V0dGluZ1xuICAgKi9cbiAgc3RhdGljIHJlbmRlckNsaWVudElkU2V0dGluZyhcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgY3VycmVudENsaWVudElkOiBzdHJpbmcsXG4gICAgb25TYXZlOiAoY2xpZW50SWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPixcbiAgKTogdm9pZCB7XG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkNsaWVudCBJRFwiKVxuICAgICAgLnNldERlc2MoXCJPQXV0aCAyLjAgQ2xpZW50IElEIGZyb20gR29vZ2xlIENsb3VkIENvbnNvbGVcIilcbiAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMTIzNDU2Nzg5LWFiY2RlZmcuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIilcbiAgICAgICAgICAuc2V0VmFsdWUoY3VycmVudENsaWVudElkKVxuICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IG9uU2F2ZSh2YWx1ZS50cmltKCkpO1xuICAgICAgICAgIH0pLFxuICAgICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdG9rZW4gZXhwaXJ5IGRyb3Bkb3duIHNldHRpbmdcbiAgICovXG4gIHN0YXRpYyByZW5kZXJUb2tlbkV4cGlyeVNldHRpbmcoXG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxuICAgIGN1cnJlbnRFeHBpcnk6IFRva2VuRXhwaXJ5T3B0aW9uLFxuICAgIG9uU2F2ZTogKGV4cGlyeTogVG9rZW5FeHBpcnlPcHRpb24pID0+IFByb21pc2U8dm9pZD4sXG4gICk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJUb2tlbiBFeHBpcnlcIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICBcIkhvdyBsb25nIGJlZm9yZSB0aGUgYWNjZXNzIHRva2VuIGV4cGlyZXMgYW5kIHJlcXVpcmVzIHJlLWF1dGhlbnRpY2F0aW9uXCIsXG4gICAgICApXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKFRPS0VOX0VYUElSWV9PUFRJT05TKS5mb3JFYWNoKChba2V5LCBsYWJlbF0pID0+IHtcbiAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oa2V5LCBsYWJlbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKGN1cnJlbnRFeHBpcnkpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIGF3YWl0IG9uU2F2ZSh2YWx1ZSBhcyBUb2tlbkV4cGlyeU9wdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRva2VuIHN0YXR1cyBpbmZvcm1hdGlvblxuICAgKi9cbiAgc3RhdGljIHJlbmRlclRva2VuU3RhdHVzKFxuICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICBleHBpcnlEYXRlOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICk6IHZvaWQge1xuICAgIGlmICghZXhwaXJ5RGF0ZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgdGltZVJlbWFpbmluZyA9IFRva2VuTWFuYWdlci5nZXRUaW1lUmVtYWluaW5nKGV4cGlyeURhdGUpO1xuICAgIGNvbnN0IGlzRXhwaXJlZCA9IFRva2VuTWFuYWdlci5pc1Rva2VuRXhwaXJlZChleHBpcnlEYXRlKTtcbiAgICBjb25zdCBuZWVkc1JlZnJlc2ggPSBUb2tlbk1hbmFnZXIubmVlZHNSZWZyZXNoU29vbihleHBpcnlEYXRlKTtcblxuICAgIGNvbnN0IHN0YXR1c1RleHQgPSBpc0V4cGlyZWRcbiAgICAgID8gXCJcdTI2QTBcdUZFMEYgVG9rZW4gZXhwaXJlZFwiXG4gICAgICA6IG5lZWRzUmVmcmVzaFxuICAgICAgICA/IGBcdTI2QTBcdUZFMEYgVG9rZW4gZXhwaXJlcyBpbiAke3RpbWVSZW1haW5pbmd9YFxuICAgICAgICA6IGBUb2tlbiB2YWxpZCBmb3IgJHt0aW1lUmVtYWluaW5nfWA7XG5cbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbCkuc2V0TmFtZShcIlRva2VuIFN0YXR1c1wiKS5zZXREZXNjKHN0YXR1c1RleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBhY2NvdW50IGNvbm5lY3Rpb24gc2V0dGluZyB3aXRoIGJ1dHRvbnNcbiAgICovXG4gIHN0YXRpYyByZW5kZXJBY2NvdW50U2V0dGluZyhcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgaXNDb25uZWN0ZWQ6IGJvb2xlYW4sXG4gICAgY2xpZW50SWQ6IHN0cmluZyxcbiAgICBvbkNvbm5lY3Q6ICgpID0+IHZvaWQsXG4gICAgb25EaXNjb25uZWN0OiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICAgIG9uU3luYzogKCkgPT4gUHJvbWlzZTx2b2lkPixcbiAgKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJpcyBjb25uZWN0ZWQ6XCIsIGlzQ29ubmVjdGVkKTtcblxuICAgIGNvbnN0IGFjY291bnRTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAuc2V0TmFtZShcIkFjY291bnRcIilcbiAgICAgIC5zZXREZXNjKGlzQ29ubmVjdGVkID8gXCJcdTI3MDUgQ29ubmVjdGVkXCIgOiBcIlx1Mjc0QyBOb3QgQ29ubmVjdGVkXCIpO1xuXG4gICAgaWYgKGlzQ29ubmVjdGVkKSB7XG4gICAgICAvLyBTeW5jIENhbGVuZGFyIGJ1dHRvblxuICAgICAgYWNjb3VudFNldHRpbmcuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiU3luYyBDYWxlbmRhclwiKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBvblN5bmMoKTtcbiAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgICAvLyBEaXNjb25uZWN0IGJ1dHRvblxuICAgICAgYWNjb3VudFNldHRpbmcuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgIGJ0blxuICAgICAgICAgIC5zZXRXYXJuaW5nKClcbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkRpc2Nvbm5lY3RcIilcbiAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBvbkRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3cgd2FybmluZyBpZiBubyBDbGllbnQgSURcbiAgICAgIGlmICghY2xpZW50SWQgfHwgY2xpZW50SWQgPT09IFwiXCIpIHtcbiAgICAgICAgYWNjb3VudFNldHRpbmcuc2V0RGVzYyhcIlx1MjZBMFx1RkUwRiBQbGVhc2Ugc2V0IENsaWVudCBJRCBmaXJzdFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENvbm5lY3QgYnV0dG9uXG4gICAgICAgIGFjY291bnRTZXR0aW5nLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgIGJ0blxuICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbm5lY3QgdG8gR29vZ2xlXCIpXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgIG9uQ29ubmVjdCgpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBUb2tlbiBleHBpcnkgYW5kIHJlZnJlc2ggbWFuYWdlbWVudCBmb3IgR29vZ2xlIENhbGVuZGFyXG4gKi9cblxuaW1wb3J0IHsgVG9rZW5FeHBpcnlPcHRpb24gfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY2xhc3MgVG9rZW5NYW5hZ2VyIHtcbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0b2tlbiBleHBpcnkgZGF0ZSBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgb3B0aW9uXG4gICAqIEBwYXJhbSBleHBpcnlPcHRpb24gLSBUaGUgZXhwaXJ5IG9wdGlvbiBzZWxlY3RlZCBieSB0aGUgdXNlclxuICAgKiBAcmV0dXJucyBVbml4IHRpbWVzdGFtcCB3aGVuIHRva2VuIGV4cGlyZXMsIG9yIHVuZGVmaW5lZCBmb3IgdW5saW1pdGVkXG4gICAqL1xuICBzdGF0aWMgY2FsY3VsYXRlRXhwaXJ5RGF0ZShleHBpcnlPcHRpb246IFRva2VuRXhwaXJ5T3B0aW9uKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoZXhwaXJ5T3B0aW9uID09PSBcInVubGltaXRlZFwiKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgbWlsbGlzZWNvbmRzUGVyRGF5ID0gMjQgKiA2MCAqIDYwICogMTAwMDtcblxuICAgIHN3aXRjaCAoZXhwaXJ5T3B0aW9uKSB7XG4gICAgICBjYXNlIFwiMXdlZWtcIjpcbiAgICAgICAgcmV0dXJuIG5vdyArIDcgKiBtaWxsaXNlY29uZHNQZXJEYXk7XG4gICAgICBjYXNlIFwiMW1vbnRoXCI6XG4gICAgICAgIHJldHVybiBub3cgKyAzMCAqIG1pbGxpc2Vjb25kc1BlckRheTtcbiAgICAgIGNhc2UgXCIzbW9udGhzXCI6XG4gICAgICAgIHJldHVybiBub3cgKyA5MCAqIG1pbGxpc2Vjb25kc1BlckRheTtcbiAgICAgIGNhc2UgXCI2bW9udGhzXCI6XG4gICAgICAgIHJldHVybiBub3cgKyAxODAgKiBtaWxsaXNlY29uZHNQZXJEYXk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdG9rZW4gaGFzIGV4cGlyZWRcbiAgICogQHBhcmFtIGV4cGlyeURhdGUgLSBVbml4IHRpbWVzdGFtcCB3aGVuIHRva2VuIGV4cGlyZXNcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0b2tlbiBpcyBleHBpcmVkLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIHN0YXRpYyBpc1Rva2VuRXhwaXJlZChleHBpcnlEYXRlOiBudW1iZXIgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgICBpZiAoIWV4cGlyeURhdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gVW5saW1pdGVkIHRva2VucyBuZXZlciBleHBpcmVcbiAgICB9XG5cbiAgICByZXR1cm4gRGF0ZS5ub3coKSA+PSBleHBpcnlEYXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBodW1hbi1yZWFkYWJsZSB0aW1lIHJlbWFpbmluZyB1bnRpbCB0b2tlbiBleHBpcmVzXG4gICAqIEBwYXJhbSBleHBpcnlEYXRlIC0gVW5peCB0aW1lc3RhbXAgd2hlbiB0b2tlbiBleHBpcmVzXG4gICAqIEByZXR1cm5zIEZvcm1hdHRlZCBzdHJpbmcgbGlrZSBcIjUgZGF5c1wiLCBcIjIgaG91cnNcIiwgb3IgXCJVbmxpbWl0ZWRcIlxuICAgKi9cbiAgc3RhdGljIGdldFRpbWVSZW1haW5pbmcoZXhwaXJ5RGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBpZiAoIWV4cGlyeURhdGUpIHtcbiAgICAgIHJldHVybiBcIlVubGltaXRlZFwiO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbWFpbmluZyA9IGV4cGlyeURhdGUgLSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICByZXR1cm4gXCJFeHBpcmVkXCI7XG4gICAgfVxuXG4gICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IocmVtYWluaW5nIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApKTtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IoKHJlbWFpbmluZyAlICgyNCAqIDYwICogNjAgKiAxMDAwKSkgLyAoNjAgKiA2MCAqIDEwMDApKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigocmVtYWluaW5nICUgKDYwICogNjAgKiAxMDAwKSkgLyAoNjAgKiAxMDAwKSk7XG5cbiAgICBpZiAoZGF5cyA+IDApIHtcbiAgICAgIHJldHVybiBgJHtkYXlzfSBkYXkke2RheXMgIT09IDEgPyBcInNcIiA6IFwiXCJ9YDtcbiAgICB9IGVsc2UgaWYgKGhvdXJzID4gMCkge1xuICAgICAgcmV0dXJuIGAke2hvdXJzfSBob3VyJHtob3VycyAhPT0gMSA/IFwic1wiIDogXCJcIn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYCR7bWludXRlc30gbWludXRlJHttaW51dGVzICE9PSAxID8gXCJzXCIgOiBcIlwifWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRva2VuIG5lZWRzIHJlZnJlc2ggc29vbiAod2l0aGluIDI0IGhvdXJzKVxuICAgKiBAcGFyYW0gZXhwaXJ5RGF0ZSAtIFVuaXggdGltZXN0YW1wIHdoZW4gdG9rZW4gZXhwaXJlc1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRva2VuIGV4cGlyZXMgd2l0aGluIDI0IGhvdXJzXG4gICAqL1xuICBzdGF0aWMgbmVlZHNSZWZyZXNoU29vbihleHBpcnlEYXRlOiBudW1iZXIgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgICBpZiAoIWV4cGlyeURhdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBvbmVEYXlJbk1zID0gMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICBjb25zdCByZW1haW5pbmcgPSBleHBpcnlEYXRlIC0gRGF0ZS5ub3coKTtcblxuICAgIHJldHVybiByZW1haW5pbmcgPiAwICYmIHJlbWFpbmluZyA8IG9uZURheUluTXM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGV4cGlyeSBkYXRlIHRvIHJlYWRhYmxlIHN0cmluZ1xuICAgKiBAcGFyYW0gZXhwaXJ5RGF0ZSAtIFVuaXggdGltZXN0YW1wIHdoZW4gdG9rZW4gZXhwaXJlc1xuICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgZGF0ZSBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBmb3JtYXRFeHBpcnlEYXRlKGV4cGlyeURhdGU6IG51bWJlciB8IHVuZGVmaW5lZCk6IHN0cmluZyB7XG4gICAgaWYgKCFleHBpcnlEYXRlKSB7XG4gICAgICByZXR1cm4gXCJOZXZlclwiO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShleHBpcnlEYXRlKTtcbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcodW5kZWZpbmVkLCB7XG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcImxvbmdcIixcbiAgICAgIGRheTogXCJudW1lcmljXCIsXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgfSk7XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBBcHAsXG4gIEVkaXRvcixcbiAgRWRpdG9yUG9zaXRpb24sXG4gIEVkaXRvclN1Z2dlc3QsXG4gIEVkaXRvclN1Z2dlc3RDb250ZXh0LFxuICBFZGl0b3JTdWdnZXN0VHJpZ2dlckluZm8sXG4gIFRGaWxlLFxuICBOb3RpY2UsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFBNQ1BsdWdpbiBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgR29vZ2xlQ2FsZW5kYXJBUEksIENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi90YWJzL2dvb2dsZVwiO1xuXG5pbnRlcmZhY2UgRXZlbnRTdWdnZXN0aW9uIHtcbiAgaXNDcmVhdGU/OiBib29sZWFuO1xuICBldmVudD86IENhbGVuZGFyRXZlbnQ7XG4gIHN1bW1hcnk6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEVkaXRvckV2ZW50U3VnZ2VzdGlvbiBleHRlbmRzIEVkaXRvclN1Z2dlc3Q8RXZlbnRTdWdnZXN0aW9uPiB7XG4gIHBsdWdpbjogUE1DUGx1Z2luO1xuICBwcml2YXRlIGNhY2hlZEV2ZW50czogQ2FsZW5kYXJFdmVudFtdID0gW107XG4gIHByaXZhdGUgbGFzdEZldGNoVGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBDQUNIRV9EVVJBVElPTiA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlc1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBNQ1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvblRyaWdnZXIoXG4gICAgY3Vyc29yOiBFZGl0b3JQb3NpdGlvbixcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBmaWxlOiBURmlsZSxcbiAgKTogRWRpdG9yU3VnZ2VzdFRyaWdnZXJJbmZvIHwgbnVsbCB7XG4gICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gbGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcblxuICAgIGlmICh0ZXh0QmVmb3JlQ3Vyc29yLmVuZHNXaXRoKFwiOlwiKSkge1xuICAgICAgbmV3IE5vdGljZShcIlRyaWdnZXIgYWN0aXZhdGVkIVwiKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBjdXJzb3IuY2ggLSAxIH0sXG4gICAgICAgIGVuZDogY3Vyc29yLFxuICAgICAgICBxdWVyeTogXCJcIixcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGZldGNoRXZlbnRzV2l0aENhY2hlKHF1ZXJ5Pzogc3RyaW5nKTogUHJvbWlzZTxDYWxlbmRhckV2ZW50W10+IHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHNob3VsZFJlZmV0Y2ggPSBub3cgLSB0aGlzLmxhc3RGZXRjaFRpbWUgPiB0aGlzLkNBQ0hFX0RVUkFUSU9OO1xuXG4gICAgaWYgKHNob3VsZFJlZmV0Y2ggfHwgdGhpcy5jYWNoZWRFdmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGZXRjaCBldmVudHMgZm9yIHRoZSBuZXh0IDMwIGRheXMgYW5kIHBhc3QgNyBkYXlzXG4gICAgICAgIGNvbnN0IHRpbWVNaW4gPSBuZXcgRGF0ZShcbiAgICAgICAgICBEYXRlLm5vdygpIC0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICAgICkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgdGltZU1heCA9IG5ldyBEYXRlKFxuICAgICAgICAgIERhdGUubm93KCkgKyA5MCAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgICAgICkudG9JU09TdHJpbmcoKTtcblxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50cyA9IGF3YWl0IEdvb2dsZUNhbGVuZGFyQVBJLmZldGNoRXZlbnRzKFxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgIFwicHJpbWFyeVwiLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB0aW1lTWluLFxuICAgICAgICAgIHRpbWVNYXgsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMubGFzdEZldGNoVGltZSA9IG5vdztcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBldmVudHM6XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNhY2hlZEV2ZW50cztcbiAgfVxuXG4gIHByaXZhdGUgZmlsdGVyRXZlbnRzKFxuICAgIGV2ZW50czogQ2FsZW5kYXJFdmVudFtdLFxuICAgIHF1ZXJ5OiBzdHJpbmcsXG4gICk6IENhbGVuZGFyRXZlbnRbXSB7XG4gICAgaWYgKCFxdWVyeSB8fCBxdWVyeS50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiBldmVudHM7XG4gICAgfVxuXG4gICAgY29uc3QgbG93ZXJRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gICAgcmV0dXJuIGV2ZW50cy5maWx0ZXIoKGV2ZW50KSA9PiB7XG4gICAgICAvLyBTZWFyY2ggaW4gc3VtbWFyeVxuICAgICAgaWYgKGV2ZW50LnN1bW1hcnk/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlYXJjaCBpbiBkZXNjcmlwdGlvblxuICAgICAgaWYgKGV2ZW50LmRlc2NyaXB0aW9uPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWFyY2ggaW4gbG9jYXRpb25cbiAgICAgIGlmIChldmVudC5sb2NhdGlvbj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VhcmNoIGluIGF0dGVuZGVlc1xuICAgICAgaWYgKFxuICAgICAgICBldmVudC5hdHRlbmRlZXM/LnNvbWUoXG4gICAgICAgICAgKGF0dGVuZGVlKSA9PlxuICAgICAgICAgICAgYXR0ZW5kZWUuZW1haWw/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcbiAgICAgICAgICAgIGF0dGVuZGVlLmRpc3BsYXlOYW1lPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpLFxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHJldHVybiBsaXN0IG9mIHN1Z2dlc3Rpb25zXG4gIGFzeW5jIGdldFN1Z2dlc3Rpb25zKFxuICAgIGNvbnRleHQ6IEVkaXRvclN1Z2dlc3RDb250ZXh0LFxuICApOiBQcm9taXNlPEV2ZW50U3VnZ2VzdGlvbltdPiB7XG4gICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmFjY2Vzc1Rva2VuID09PSBcIlwiKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImNvbm5lY3QgZ29vZ2xlIGNhbGVuZGFyIGZpcnN0XCIpO1xuICAgICAgbmV3IE5vdGljZShcIlBsZWFzZSBjb25uZWN0IHRvIEdvb2dsZSBDYWxlbmRhciBmaXJzdFwiKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeSA9IChjb250ZXh0LnF1ZXJ5IHx8IFwiXCIpLnRyaW0oKTtcbiAgICBjb25zb2xlLmxvZyhcInRoZSBxdWVyeVwiLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbixcbiAgICB9KTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBGZXRjaCBhbGwgZXZlbnRzIGZyb20gY2FjaGVcbiAgICAgIGNvbnN0IGFsbEV2ZW50cyA9IGF3YWl0IHRoaXMuZmV0Y2hFdmVudHNXaXRoQ2FjaGUoKTtcblxuICAgICAgLy8gRmlsdGVyIGV2ZW50cyBiYXNlZCBvbiBxdWVyeVxuICAgICAgY29uc3QgZmlsdGVyZWRFdmVudHMgPSB0aGlzLmZpbHRlckV2ZW50cyhhbGxFdmVudHMsIHF1ZXJ5KTtcblxuICAgICAgY29uc29sZS5sb2coXCJmaWx0ZXJlZCBldmVudHNcIiwgZmlsdGVyZWRFdmVudHMpO1xuXG4gICAgICAvLyBSZXR1cm4gY3JlYXRlIG9wdGlvbiArIGZpbHRlcmVkIGV2ZW50c1xuICAgICAgY29uc3Qgc3VnZ2VzdGlvbnM6IEV2ZW50U3VnZ2VzdGlvbltdID0gW107XG5cbiAgICAgIC8vIEFkZCBjcmVhdGUgbmV3IGV2ZW50IG9wdGlvbiBpZiB0aGVyZSdzIGEgcXVlcnlcbiAgICAgIGlmIChxdWVyeSAmJiBxdWVyeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICAgIGlzQ3JlYXRlOiB0cnVlLFxuICAgICAgICAgIHN1bW1hcnk6IGArIENyZWF0ZSBuZXcgZXZlbnQ6IFwiJHtxdWVyeX1cImAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgZmlsdGVyZWQgZXZlbnRzXG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKFxuICAgICAgICAuLi5maWx0ZXJlZEV2ZW50cy5tYXAoKGV2ZW50KSA9PiAoe1xuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIHN1bW1hcnk6IGV2ZW50LnN1bW1hcnkgfHwgZXZlbnQuZGVzY3JpcHRpb24gfHwgXCJVbnRpdGxlZCBFdmVudFwiLFxuICAgICAgICB9KSksXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHN1Z2dlc3Rpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLy8gcmVuZGVyIGVhY2ggc3VnZ2VzdGlvblxuICByZW5kZXJTdWdnZXN0aW9uKGl0ZW06IEV2ZW50U3VnZ2VzdGlvbiwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgZWwuZW1wdHkoKTtcblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IGNsczogXCJnY2FsLXN1Z2dlc3Rpb24tY29udGFpbmVyXCIgfSk7XG4gICAgY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPVxuICAgICAgXCJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHBhZGRpbmc6IDRweCAwO1wiO1xuXG4gICAgaWYgKGl0ZW0uaXNDcmVhdGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJjcmVhdGUgbmV3IGV2ZW50IGZlYXR1cmUgY29taW5nIHNvb24hXCIpO1xuICAgIH0gZWxzZSBpZiAoaXRlbS5ldmVudCkge1xuICAgICAgY29uc3QgZXZlbnQgPSBpdGVtLmV2ZW50O1xuICAgICAgY29uc3QgbGVmdERpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgIGxlZnREaXYuc3R5bGUuY3NzVGV4dCA9IFwiZmxleDogMTsgbWluLXdpZHRoOiAwO1wiO1xuXG4gICAgICAvLyBFdmVudCB0aXRsZVxuICAgICAgY29uc3QgdGl0bGVFbCA9IGxlZnREaXYuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICB0ZXh0OiBldmVudC5zdW1tYXJ5IHx8IFwiVW50aXRsZWQgRXZlbnRcIixcbiAgICAgICAgY2xzOiBcImdjYWwtZXZlbnQtdGl0bGVcIixcbiAgICAgIH0pO1xuICAgICAgdGl0bGVFbC5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICAgXCJmb250LXdlaWdodDogNTAwOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgd2hpdGUtc3BhY2U6IG5vd3JhcDtcIjtcblxuICAgICAgLy8gQWRkIGxvY2F0aW9uIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKGV2ZW50LmxvY2F0aW9uKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uRWwgPSBsZWZ0RGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICB0ZXh0OiBldmVudC5sb2NhdGlvbixcbiAgICAgICAgICBjbHM6IFwiZ2NhbC1ldmVudC1sb2NhdGlvblwiLFxuICAgICAgICB9KTtcbiAgICAgICAgbG9jYXRpb25FbC5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICAgICBcImZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdoaXRlLXNwYWNlOiBub3dyYXA7IG1hcmdpbi10b3A6IDJweDtcIjtcbiAgICAgIH1cblxuICAgICAgLy8gRGF0ZSBhbmQgdGltZSBvbiB0aGUgcmlnaHRcbiAgICAgIGNvbnN0IHJpZ2h0RGl2ID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgcmlnaHREaXYuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAgIFwiZmxleC1zaHJpbms6IDA7IG1hcmdpbi1sZWZ0OiAxMnB4OyB0ZXh0LWFsaWduOiByaWdodDtcIjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoXG4gICAgICAgICAgZXZlbnQuc3RhcnQuZGF0ZVRpbWUgfHwgZXZlbnQuc3RhcnQuZGF0ZSB8fCBcIlwiLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBpc1RvZGF5ID0gc3RhcnREYXRlLnRvRGF0ZVN0cmluZygpID09PSBub3cudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGlzVG9tb3Jyb3cgPVxuICAgICAgICAgIHN0YXJ0RGF0ZS50b0RhdGVTdHJpbmcoKSA9PT1cbiAgICAgICAgICBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgODY0MDAwMDApLnRvRGF0ZVN0cmluZygpO1xuXG4gICAgICAgIC8vIEZvcm1hdCBkYXRlXG4gICAgICAgIGxldCBkYXRlU3RyID0gXCJcIjtcbiAgICAgICAgaWYgKGlzVG9kYXkpIHtcbiAgICAgICAgICBkYXRlU3RyID0gXCJUb2RheVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVG9tb3Jyb3cpIHtcbiAgICAgICAgICBkYXRlU3RyID0gXCJUb21vcnJvd1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGVTdHIgPSBzdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKFtdLCB7XG4gICAgICAgICAgICBtb250aDogXCJzaG9ydFwiLFxuICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIixcbiAgICAgICAgICAgIHllYXI6XG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpICE9PSBub3cuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgID8gXCJudW1lcmljXCJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0aW1lU3RyID0gXCJcIjtcbiAgICAgICAgaWYgKGV2ZW50LnN0YXJ0LmRhdGVUaW1lKSB7XG4gICAgICAgICAgdGltZVN0ciA9IHN0YXJ0RGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHtcbiAgICAgICAgICAgIGhvdXI6IFwibnVtZXJpY1wiLFxuICAgICAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgICAgIGhvdXIxMjogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lU3RyID0gXCJBbGwgZGF5XCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEaXNwbGF5IGRhdGVcbiAgICAgICAgY29uc3QgZGF0ZUVsID0gcmlnaHREaXYuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgIHRleHQ6IGRhdGVTdHIsXG4gICAgICAgICAgY2xzOiBcImdjYWwtZXZlbnQtZGF0ZVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgZGF0ZUVsLnN0eWxlLmNzc1RleHQgPSBcImZvbnQtc2l6ZTogMC44NWVtOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XCI7XG5cbiAgICAgICAgLy8gRGlzcGxheSB0aW1lXG4gICAgICAgIGNvbnN0IHRpbWVFbCA9IHJpZ2h0RGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICB0ZXh0OiB0aW1lU3RyLFxuICAgICAgICAgIGNsczogXCJnY2FsLWV2ZW50LXRpbWVcIixcbiAgICAgICAgfSk7XG4gICAgICAgIHRpbWVFbC5zdHlsZS5jc3NUZXh0ID0gXCJmb250LXNpemU6IDAuOWVtOyBmb250LXdlaWdodDogNTAwO1wiO1xuXG4gICAgICAgIC8vIEFkZCBjb25mZXJlbmNlIGluZGljYXRvciBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKGV2ZW50LmhhbmdvdXRMaW5rIHx8IGV2ZW50LmNvbmZlcmVuY2VEYXRhKSB7XG4gICAgICAgICAgY29uc3QgY29uZmVyZW5jZUVsID0gcmlnaHREaXYuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJcdUQ4M0NcdURGQTUgVmlkZW9cIixcbiAgICAgICAgICAgIGNsczogXCJnY2FsLWV2ZW50LWNvbmZlcmVuY2VcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25mZXJlbmNlRWwuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAgICAgICBcImZvbnQtc2l6ZTogMC43NWVtOyBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgbWFyZ2luLXRvcDogMnB4O1wiO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmb3JtYXR0aW5nIGRhdGU6XCIsIGUpO1xuICAgICAgICByaWdodERpdi5jcmVhdGVFbChcInNtYWxsXCIsIHtcbiAgICAgICAgICB0ZXh0OiBcIkludmFsaWQgZGF0ZVwiLFxuICAgICAgICAgIGF0dHI6IHsgc3R5bGU6IFwiY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1wiIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHVzZXIgc2VsZWN0cyBhIHN1Z2dlc3Rpb25cbiAgc2VsZWN0U3VnZ2VzdGlvbihcbiAgICBpdGVtOiBFdmVudFN1Z2dlc3Rpb24sXG4gICAgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCxcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbnRleHQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBjb250ZXh0IGF2YWlsYWJsZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXRlbS5pc0NyZWF0ZSkge1xuICAgICAgbmV3IE5vdGljZShcImNyZWF0ZSBuZXcgZXZlbnQgZmVhdHVyZSBjb21pbmcgc29vbiFcIik7XG4gICAgfSBlbHNlIGlmIChpdGVtLmV2ZW50KSB7XG4gICAgICBjb25zdCBldmVudCA9IGl0ZW0uZXZlbnQ7XG4gICAgICBjb25zdCBldmVudExpbmsgPVxuICAgICAgICBldmVudC5odG1sTGluayB8fFxuICAgICAgICBgaHR0cHM6Ly9jYWxlbmRhci5nb29nbGUuY29tL2NhbGVuZGFyL2V2ZW50P2VpZD0ke2VuY29kZVVSSUNvbXBvbmVudChldmVudC5pZCl9YDtcblxuICAgICAgY29uc3QgZXZlbnRUaXRsZSA9IGV2ZW50LnN1bW1hcnkgfHwgXCJVbnRpdGxlZCBFdmVudFwiO1xuXG4gICAgICAvLyBGb3JtYXQ6IFtFdmVudCBOYW1lXShHb29nbGUgQ2FsZW5kYXIgTGluaylcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRleHQgPSBgWyR7ZXZlbnRUaXRsZX1dKCR7ZXZlbnRMaW5rfSlgO1xuXG4gICAgICB0aGlzLmNvbnRleHQuZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICAgICAgZm9ybWF0dGVkVGV4dCxcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0YXJ0LFxuICAgICAgICB0aGlzLmNvbnRleHQuZW5kLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBjYWNoZSB3aGVuIG5lZWRlZCAoY2FuIGJlIGNhbGxlZCBmcm9tIHBsdWdpbilcbiAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlZEV2ZW50cyA9IFtdO1xuICAgIHRoaXMubGFzdEZldGNoVGltZSA9IDA7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBjbGFzcyBEb25hdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHN1cGVyKGFwcCk7XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAvLyBBZGQgY3VzdG9tIGNsYXNzIGZvciBzdHlsaW5nXG4gICAgY29udGVudEVsLmFkZENsYXNzKFwiZG9uYXRpb24tbW9kYWxcIik7XG5cbiAgICAvLyBIZWFkZXJcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7XG4gICAgICB0ZXh0OiBcIlx1Mjc2NFx1RkUwRiBTdXBwb3J0IERldmVsb3BtZW50XCIsXG4gICAgICBjbHM6IFwiZG9uYXRpb24taGVhZGVyXCIsXG4gICAgfSk7XG5cbiAgICAvLyBEZXNjcmlwdGlvblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgdGV4dDogXCJJZiB5b3UgZW5qb3kgdXNpbmcgdGhpcyBwbHVnaW4sIGNvbnNpZGVyIHN1cHBvcnRpbmcgaXRzIGRldmVsb3BtZW50ISBZb3VyIHN1cHBvcnQgaGVscHMga2VlcCB0aGlzIHByb2plY3QgYWxpdmUgYW5kIGVuYWJsZXMgbmV3IGZlYXR1cmVzLlwiLFxuICAgICAgY2xzOiBcImRvbmF0aW9uLWRlc2NyaXB0aW9uXCIsXG4gICAgfSk7XG5cbiAgICAvLyBCdXkgTWUgYSBDb2ZmZWVcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIlx1MjYxNSBCdXkgTWUgYSBDb2ZmZWVcIilcbiAgICAgIC5zZXREZXNjKFwiU3VwcG9ydCB3aXRoIGEgb25lLXRpbWUgZG9uYXRpb25cIilcbiAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuXG4gICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJEb25hdGVcIilcbiAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB3aW5kb3cub3BlbihcImh0dHBzOi8vd3d3LmJ1eW1lYWNvZmZlZS5jb20veW91cnVzZXJuYW1lXCIsIFwiX2JsYW5rXCIpO1xuICAgICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgIC8vIEdpdEh1YiBTcG9uc29ycyAob3B0aW9uYWwpXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoXCJcdTJCNTAgR2l0SHViIFNwb25zb3JzXCIpXG4gICAgICAuc2V0RGVzYyhcIlNwb25zb3Igb24gR2l0SHViIGZvciByZWN1cnJpbmcgc3VwcG9ydFwiKVxuICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICBidG4uc2V0QnV0dG9uVGV4dChcIkJlY29tZSBhIFNwb25zb3JcIikub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgd2luZG93Lm9wZW4oXCJodHRwczovL2dpdGh1Yi5jb20vc3BvbnNvcnMveW91cnVzZXJuYW1lXCIsIFwiX2JsYW5rXCIpO1xuICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICAvLyBUaGFuayB5b3UgbWVzc2FnZVxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuICAgICAgdGV4dDogXCJUaGFuayB5b3UgZm9yIHlvdXIgc3VwcG9ydCEgRXZlcnkgY29udHJpYnV0aW9uIGhlbHBzIGltcHJvdmUgdGhpcyBwbHVnaW4uIFx1RDgzRFx1REU0RlwiLFxuICAgICAgY2xzOiBcImRvbmF0aW9uLXRoYW5rc1wiLFxuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKS5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIikub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNDQSxJQUFBQSxtQkFBc0M7OztBQ00vQixJQUFNLDBCQUFrRDtBQUFBLEVBQzdELFVBQVU7QUFBQSxFQUNWLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLGlC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QUE7QUFFRSxzQkFBc0M7QUFDdEMsNEJBQWlEO0FBQUE7QUFBQSxFQUVqRCxNQUFNLFNBQVM7QUFDYixVQUFNLEtBQUssYUFBYTtBQUd4QixTQUFLLGFBQWEsSUFBSSxpQkFBaUIsS0FBSyxLQUFLLElBQUk7QUFDckQsU0FBSyxjQUFjLEtBQUssVUFBVTtBQUdsQyxTQUFLO0FBQUEsTUFDSDtBQUFBLE1BQ0E7QUFBQSxNQUNBLENBQUMsUUFBb0I7QUFDbkIsWUFBSSxjQUFjLEtBQUssR0FBRyxFQUFFLEtBQUs7QUFBQSxNQUNuQztBQUFBLElBQ0Y7QUFHQSxTQUFLLGdDQUFnQyxzQkFBc0IsT0FBTyxTQUFTO0FBaEMvRTtBQWlDTSxZQUFNLFFBQVEsS0FBSztBQUVuQixVQUFJLE9BQU87QUFDVCxhQUFLLFNBQVMsY0FBYztBQUM1QixjQUFNLEtBQUssYUFBYTtBQUN4QixtQkFBSyxlQUFMLG1CQUFpQjtBQUNqQixZQUFJLHdCQUFPLG1DQUE4QjtBQUFBLE1BQzNDLE9BQU87QUFDTCxZQUFJO0FBQUEsVUFDRiw2QkFBd0IsS0FBSyxTQUFTLDRCQUE0QjtBQUFBLFFBQ3BFO0FBQUEsTUFDRjtBQUFBLElBQ0YsQ0FBQztBQUdELFNBQUssbUJBQW1CLElBQUksc0JBQXNCLEtBQUssS0FBSyxJQUFJO0FBQ2hFLFNBQUssc0JBQXNCLEtBQUssZ0JBQWdCO0FBQUEsRUFDbEQ7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUFDO0FBQUEsRUFFWixNQUFNLGVBQWU7QUFDbkIsU0FBSyxXQUFXLE9BQU87QUFBQSxNQUNyQixDQUFDO0FBQUEsTUFDRDtBQUFBLE1BQ0MsTUFBTSxLQUFLLFNBQVM7QUFBQSxJQUN2QjtBQUFBLEVBQ0Y7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNuQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNuQztBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIl9iIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
