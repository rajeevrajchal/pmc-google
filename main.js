/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PMCPlugin
});
module.exports = __toCommonJS(main_exports);

// src/components/setting.ts
var import_obsidian4 = require("obsidian");

// src/components/tabs/google/types.ts
var DEFAULT_GOOGLE_SETTINGS = {
  clientId: "",
  accessToken: "",
  tokenExpiry: "unlimited",
  tokenExpiryDate: void 0,
  timeRange: 90
};
var TOKEN_EXPIRY_OPTIONS = {
  "1week": "1 Week",
  "1month": "1 Month",
  "3months": "3 Months",
  "6months": "6 Months",
  unlimited: "Unlimited (Until manually disconnected)"
};
var GOOGLE_OAUTH_CALLBACK_URL = "https://rajeevrajchal.github.io/pmc/oauth-callback";

// src/components/tabs/google/auth.ts
var import_obsidian = require("obsidian");
var GoogleAuth = class {
  /**
   * Initiate OAuth flow to connect to Google Calendar
   * @param clientId - OAuth 2.0 Client ID from Google Cloud Console
   */
  static initiateOAuthFlow(clientId) {
    if (!clientId || clientId.trim() === "") {
      new import_obsidian.Notice("Please configure Client ID first");
      return;
    }
    const authUrl = this.buildAuthUrl(clientId);
    new import_obsidian.Notice("Opening Google authentication...");
    window.open(authUrl, "_blank");
  }
  /**
   * Build the OAuth authorization URL
   */
  static buildAuthUrl(clientId) {
    const params = new URLSearchParams({
      client_id: clientId,
      redirect_uri: GOOGLE_OAUTH_CALLBACK_URL,
      response_type: "token",
      scope: this.SCOPES.join(" "),
      access_type: "online"
    });
    return `${this.OAUTH_URL}?${params.toString()}`;
  }
  /**
   * Disconnect from Google Calendar
   * Clears the stored access token
   */
  static disconnect() {
    new import_obsidian.Notice("Disconnected from Google Calendar");
  }
};
GoogleAuth.OAUTH_URL = "https://accounts.google.com/o/oauth2/v2/auth";
GoogleAuth.SCOPES = [
  "https://www.googleapis.com/auth/calendar.readonly",
  "https://www.googleapis.com/auth/calendar.events"
];

// src/components/tabs/google/calendar-api.ts
var import_obsidian2 = require("obsidian");

// src/components/tabs/google/token-manager.ts
var TokenManager = class {
  /**
   * Calculate token expiry date based on the selected option
   * @param expiryOption - The expiry option selected by the user
   * @returns Unix timestamp when token expires, or undefined for unlimited
   */
  static calculateExpiryDate(expiryOption) {
    if (expiryOption === "unlimited") {
      return void 0;
    }
    const now = Date.now();
    const millisecondsPerDay = 24 * 60 * 60 * 1e3;
    switch (expiryOption) {
      case "1week":
        return now + 7 * millisecondsPerDay;
      case "1month":
        return now + 30 * millisecondsPerDay;
      case "3months":
        return now + 90 * millisecondsPerDay;
      case "6months":
        return now + 180 * millisecondsPerDay;
      default:
        return void 0;
    }
  }
  /**
   * Check if the token has expired
   * @param expiryDate - Unix timestamp when token expires
   * @returns true if token is expired, false otherwise
   */
  static isTokenExpired(expiryDate) {
    if (!expiryDate) {
      return false;
    }
    return Date.now() >= expiryDate;
  }
  /**
   * Get human-readable time remaining until token expires
   * @param expiryDate - Unix timestamp when token expires
   * @returns Formatted string like "5 days", "2 hours", or "Unlimited"
   */
  static getTimeRemaining(expiryDate) {
    if (!expiryDate) {
      return "Unlimited";
    }
    const remaining = expiryDate - Date.now();
    if (remaining <= 0) {
      return "Expired";
    }
    const days = Math.floor(remaining / (24 * 60 * 60 * 1e3));
    const hours = Math.floor(remaining % (24 * 60 * 60 * 1e3) / (60 * 60 * 1e3));
    const minutes = Math.floor(remaining % (60 * 60 * 1e3) / (60 * 1e3));
    if (days > 0) {
      return `${days} day${days !== 1 ? "s" : ""}`;
    } else if (hours > 0) {
      return `${hours} hour${hours !== 1 ? "s" : ""}`;
    } else {
      return `${minutes} minute${minutes !== 1 ? "s" : ""}`;
    }
  }
  /**
   * Check if token needs refresh soon (within 24 hours)
   * @param expiryDate - Unix timestamp when token expires
   * @returns true if token expires within 24 hours
   */
  static needsRefreshSoon(expiryDate) {
    if (!expiryDate) {
      return false;
    }
    const oneDayInMs = 24 * 60 * 60 * 1e3;
    const remaining = expiryDate - Date.now();
    return remaining > 0 && remaining < oneDayInMs;
  }
  /**
   * Format expiry date to readable string
   * @param expiryDate - Unix timestamp when token expires
   * @returns Formatted date string
   */
  static formatExpiryDate(expiryDate) {
    if (!expiryDate) {
      return "Never";
    }
    const date = new Date(expiryDate);
    return date.toLocaleDateString(void 0, {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit"
    });
  }
};

// src/components/tabs/google/calendar-api.ts
var GoogleCalendarAPI = class {
  /**
   * Fetch calendar events from Google Calendar
   * @param accessToken - OAuth access token
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @param query - Search query for events
   * @param timeMin - Start time for events (ISO 8601)
   * @param timeMax - End time for events (ISO 8601)
   * @param maxResults - Maximum number of events to return
   * @param tokenExpiryDate - Optional token expiry date for validation
   * @returns Array of calendar events
   */
  static async fetchEvents(accessToken, calendarId = "primary", query, timeMin, timeMax, maxResults = 250, tokenExpiryDate) {
    try {
      if (TokenManager.isTokenExpired(tokenExpiryDate)) {
        new import_obsidian2.Notice("\u26A0\uFE0F Google Calendar token has expired. Please reconnect in settings.");
        throw new Error("Token expired");
      }
      const params = {
        singleEvents: "true",
        orderBy: "startTime",
        maxResults: maxResults.toString()
      };
      if (timeMin) {
        params.timeMin = timeMin;
      }
      if (timeMax) {
        params.timeMax = timeMax;
      }
      if (query && query.trim() !== "") {
        params.q = query;
      }
      const queryString = new URLSearchParams(params).toString();
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events?${queryString}`,
        {
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json"
          }
        }
      );
      if (!response.ok) {
        const errorText = await response.text();
        console.error("API Error Response:", errorText);
        throw new Error(`Failed to fetch events: ${response.statusText}`);
      }
      const data = await response.json();
      return data.items || [];
    } catch (error) {
      console.error("Error fetching calendar events:", error);
      new import_obsidian2.Notice("Failed to fetch calendar events");
      throw error;
    }
  }
  /**
   * Create a new calendar event
   * @param accessToken - OAuth access token
   * @param event - Event details to create
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @param tokenExpiryDate - Optional token expiry date for validation
   * @returns Created event
   */
  static async createEvent(accessToken, event, calendarId = "primary", tokenExpiryDate) {
    try {
      if (TokenManager.isTokenExpired(tokenExpiryDate)) {
        new import_obsidian2.Notice("\u26A0\uFE0F Google Calendar token has expired. Please reconnect in settings.");
        throw new Error("Token expired");
      }
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events`,
        {
          method: "POST",
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify(event)
        }
      );
      if (!response.ok) {
        throw new Error(`Failed to create event: ${response.statusText}`);
      }
      const createdEvent = await response.json();
      new import_obsidian2.Notice("Event created successfully");
      return createdEvent;
    } catch (error) {
      console.error("Error creating calendar event:", error);
      new import_obsidian2.Notice("Failed to create calendar event");
      throw error;
    }
  }
  /**
   * Update an existing calendar event
   * @param accessToken - OAuth access token
   * @param eventId - ID of the event to update
   * @param event - Updated event details
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @param tokenExpiryDate - Optional token expiry date for validation
   * @returns Updated event
   */
  static async updateEvent(accessToken, eventId, event, calendarId = "primary", tokenExpiryDate) {
    try {
      if (TokenManager.isTokenExpired(tokenExpiryDate)) {
        new import_obsidian2.Notice("\u26A0\uFE0F Google Calendar token has expired. Please reconnect in settings.");
        throw new Error("Token expired");
      }
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events/${eventId}`,
        {
          method: "PUT",
          headers: {
            Authorization: `Bearer ${accessToken}`,
            "Content-Type": "application/json"
          },
          body: JSON.stringify(event)
        }
      );
      if (!response.ok) {
        throw new Error(`Failed to update event: ${response.statusText}`);
      }
      const updatedEvent = await response.json();
      new import_obsidian2.Notice("Event updated successfully");
      return updatedEvent;
    } catch (error) {
      console.error("Error updating calendar event:", error);
      new import_obsidian2.Notice("Failed to update calendar event");
      throw error;
    }
  }
  /**
   * Delete a calendar event
   * @param accessToken - OAuth access token
   * @param eventId - ID of the event to delete
   * @param calendarId - Calendar ID (defaults to 'primary')
   * @param tokenExpiryDate - Optional token expiry date for validation
   */
  static async deleteEvent(accessToken, eventId, calendarId = "primary", tokenExpiryDate) {
    try {
      if (TokenManager.isTokenExpired(tokenExpiryDate)) {
        new import_obsidian2.Notice("\u26A0\uFE0F Google Calendar token has expired. Please reconnect in settings.");
        throw new Error("Token expired");
      }
      const response = await fetch(
        `${this.BASE_URL}/calendars/${calendarId}/events/${eventId}`,
        {
          method: "DELETE",
          headers: {
            Authorization: `Bearer ${accessToken}`
          }
        }
      );
      if (!response.ok) {
        throw new Error(`Failed to delete event: ${response.statusText}`);
      }
      new import_obsidian2.Notice("Event deleted successfully");
    } catch (error) {
      console.error("Error deleting calendar event:", error);
      new import_obsidian2.Notice("Failed to delete calendar event");
      throw error;
    }
  }
  /**
   * Get list of available calendars
   * @param accessToken - OAuth access token
   * @param tokenExpiryDate - Optional token expiry date for validation
   * @returns Array of calendar objects
   */
  static async listCalendars(accessToken, tokenExpiryDate) {
    try {
      if (TokenManager.isTokenExpired(tokenExpiryDate)) {
        new import_obsidian2.Notice("\u26A0\uFE0F Google Calendar token has expired. Please reconnect in settings.");
        throw new Error("Token expired");
      }
      const response = await fetch(`${this.BASE_URL}/users/me/calendarList`, {
        headers: {
          Authorization: `Bearer ${accessToken}`,
          "Content-Type": "application/json"
        }
      });
      if (!response.ok) {
        throw new Error(`Failed to fetch calendars: ${response.statusText}`);
      }
      const data = await response.json();
      return data.items || [];
    } catch (error) {
      console.error("Error fetching calendars:", error);
      new import_obsidian2.Notice("Failed to fetch calendars");
      throw error;
    }
  }
  /**
   * Sync calendar events (fetch and cache)
   * @param accessToken - OAuth access token
   * @param tokenExpiryDate - Optional token expiry date for validation
   */
  static async syncCalendar(accessToken, tokenExpiryDate) {
    try {
      if (TokenManager.isTokenExpired(tokenExpiryDate)) {
        new import_obsidian2.Notice("\u26A0\uFE0F Google Calendar token has expired. Please reconnect in settings.");
        throw new Error("Token expired");
      }
      new import_obsidian2.Notice("Syncing calendar...");
      const timeMin = (/* @__PURE__ */ new Date()).toISOString();
      const timeMax = new Date(
        Date.now() + 30 * 24 * 60 * 60 * 1e3
      ).toISOString();
      const events = await this.fetchEvents(
        accessToken,
        "primary",
        void 0,
        timeMin,
        timeMax
      );
      new import_obsidian2.Notice(`Synced ${events.length} events`);
      return;
    } catch (error) {
      console.error("Error syncing calendar:", error);
      new import_obsidian2.Notice("Failed to sync calendar");
      throw error;
    }
  }
};
GoogleCalendarAPI.BASE_URL = "https://www.googleapis.com/calendar/v3";

// src/components/tabs/google/settings-ui.ts
var import_obsidian3 = require("obsidian");
var GoogleSettingsUI = class {
  /**
   * Render setup guide with step-by-step instructions
   */
  static renderSetupGuide(containerEl) {
    const setupSection = containerEl.createDiv({ cls: "pmc-setup-guide" });
    setupSection.createEl("h4", { text: "\u{1F4CB} Setup Guide" });
    const setupSteps = setupSection.createEl("ol");
    const step1 = setupSteps.createEl("li");
    step1.createEl("strong", { text: "Create a Google Cloud Project:" });
    const step1List = step1.createEl("ul");
    step1List.createEl("li").innerHTML = 'Go to <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a>';
    step1List.createEl("li", {
      text: 'Click "Select a project" \u2192 "New Project"'
    });
    step1List.createEl("li", {
      text: 'Give it a name (e.g., "Obsidian PMC Plugin") and click "Create"'
    });
    const step2 = setupSteps.createEl("li");
    step2.createEl("strong", { text: "Enable Google Calendar API:" });
    const step2List = step2.createEl("ul");
    step2List.createEl("li", {
      text: 'In the sidebar, go to "APIs & Services" \u2192 "Library"'
    });
    step2List.createEl("li", { text: 'Search for "Google Calendar API"' });
    step2List.createEl("li", { text: 'Click on it and press "Enable"' });
    const step3 = setupSteps.createEl("li");
    step3.createEl("strong", { text: "Create OAuth 2.0 Credentials:" });
    const step3List = step3.createEl("ul");
    step3List.createEl("li", {
      text: 'Go to "APIs & Services" \u2192 "Credentials"'
    });
    step3List.createEl("li", {
      text: 'Click "Create Credentials" \u2192 "OAuth client ID"'
    });
    step3List.createEl("li", {
      text: "If prompted, configure the OAuth consent screen first"
    });
    step3List.createEl("li", {
      text: 'Select "Web application" as the application type'
    });
    step3List.createEl("li", { text: "Add this Authorized redirect URI: " }).createEl("code", { text: GOOGLE_OAUTH_CALLBACK_URL });
    step3List.createEl("li", {
      text: 'Click "Create" and copy your Client ID'
    });
    const step4 = setupSteps.createEl("li");
    step4.createEl("strong", {
      text: "Paste the Client ID below and click Connect"
    });
  }
  /**
   * Render OAuth callback URL setting
   */
  static renderCallbackUrlSetting(containerEl) {
    new import_obsidian3.Setting(containerEl).setName("OAuth Callback URL").setDesc("Use this URL when configuring your Google OAuth application").addText(
      (text) => text.setValue(GOOGLE_OAUTH_CALLBACK_URL).setDisabled(true)
    ).addButton(
      (btn) => btn.setButtonText("Copy").onClick(() => {
        navigator.clipboard.writeText(GOOGLE_OAUTH_CALLBACK_URL);
        new import_obsidian3.Notice("Callback URL copied to clipboard!");
      })
    );
  }
  /**
   * Render Client ID input setting
   */
  static renderClientIdSetting(containerEl, currentClientId, onSave) {
    new import_obsidian3.Setting(containerEl).setName("Client ID").setDesc("OAuth 2.0 Client ID from Google Cloud Console").addText(
      (text) => text.setPlaceholder("123456789-abcdefg.apps.googleusercontent.com").setValue(currentClientId).onChange(async (value) => {
        await onSave(value.trim());
      })
    );
  }
  /**
   * Render token expiry dropdown setting
   */
  static renderTokenExpirySetting(containerEl, currentExpiry, onSave) {
    new import_obsidian3.Setting(containerEl).setName("Token Expiry").setDesc(
      "How long before the access token expires and requires re-authentication"
    ).addDropdown((dropdown) => {
      Object.entries(TOKEN_EXPIRY_OPTIONS).forEach(([key, label]) => {
        dropdown.addOption(key, label);
      });
      dropdown.setValue(currentExpiry).onChange(async (value) => {
        await onSave(value);
      });
    });
  }
  /**
   * Render token status information
   */
  static renderTokenStatus(containerEl, expiryDate) {
    const timeRemaining = TokenManager.getTimeRemaining(expiryDate);
    const isExpired = TokenManager.isTokenExpired(expiryDate);
    const needsRefresh = TokenManager.needsRefreshSoon(expiryDate);
    let statusText;
    if (!expiryDate) {
      statusText = "\u2705 Token valid: Unlimited";
    } else if (isExpired) {
      statusText = "\u26A0\uFE0F Token expired";
    } else if (needsRefresh) {
      statusText = `\u26A0\uFE0F Token expires in ${timeRemaining}`;
    } else {
      statusText = `\u2705 Token valid for ${timeRemaining}`;
    }
    new import_obsidian3.Setting(containerEl).setName("Token Status").setDesc(statusText);
  }
  /**
   * Render account connection setting with buttons
   */
  static renderAccountSetting(containerEl, isConnected, clientId, onConnect, onDisconnect, onSync) {
    console.log("is connected:", isConnected);
    const accountSetting = new import_obsidian3.Setting(containerEl).setName("Account").setDesc(isConnected ? "\u2705 Connected" : "\u274C Not Connected");
    if (isConnected) {
      accountSetting.addButton(
        (btn) => btn.setButtonText("Sync Calendar").onClick(async () => {
          await onSync();
        })
      );
      accountSetting.addButton(
        (btn) => btn.setWarning().setButtonText("Disconnect").onClick(async () => {
          await onDisconnect();
        })
      );
    } else {
      if (!clientId || clientId === "") {
        accountSetting.setDesc("\u26A0\uFE0F Please set Client ID first");
      } else {
        accountSetting.addButton(
          (btn) => btn.setCta().setButtonText("Connect to Google").onClick(() => {
            onConnect();
          })
        );
      }
    }
  }
};

// src/components/setting.ts
var DEFAULT_SETTINGS = {
  ...DEFAULT_GOOGLE_SETTINGS
};
var PMCPluginSetting = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Pick Google Calendar Event" });
    const introSection = containerEl.createDiv({ cls: "pmc-intro-section" });
    introSection.style.marginBottom = "20px";
    introSection.style.padding = "15px";
    introSection.style.background = "var(--background-secondary)";
    introSection.style.borderRadius = "8px";
    introSection.createEl("h4", { text: "How to Use" });
    const usageList = introSection.createEl("ul");
    usageList.style.marginLeft = "20px";
    const item1 = usageList.createEl("li");
    item1.innerHTML = "Type <code>:</code> in your note to trigger the calendar event picker";
    const item2 = usageList.createEl("li");
    item2.innerHTML = "Type <code>:meeting</code> to search and filter events containing 'meeting'";
    const item3 = usageList.createEl("li");
    item3.innerHTML = "Select an event from the list to insert it as a link in your note";
    const item4 = usageList.createEl("li");
    item4.innerHTML = "Choose <strong>+ Create new event</strong> to create a new calendar event";
    containerEl.createEl("h3", { text: "Setup & Configuration" });
    GoogleSettingsUI.renderSetupGuide(containerEl);
    GoogleSettingsUI.renderCallbackUrlSetting(containerEl);
    GoogleSettingsUI.renderClientIdSetting(
      containerEl,
      this.plugin.settings.clientId,
      async (clientId) => {
        this.plugin.settings.clientId = clientId;
        await this.plugin.saveSettings();
        this.display();
      }
    );
    GoogleSettingsUI.renderTokenExpirySetting(
      containerEl,
      this.plugin.settings.tokenExpiry,
      async (expiry) => {
        this.plugin.settings.tokenExpiry = expiry;
        this.plugin.settings.tokenExpiryDate = TokenManager.calculateExpiryDate(expiry);
        await this.plugin.saveSettings();
        this.display();
      }
    );
    new import_obsidian4.Setting(containerEl).setName("Suggestion Time Range").setDesc(
      'Time duration to fetch calendar events for suggestions (e.g., "90 days"). Events from this many days in the past and future will be considered.'
    ).addText(
      (text) => text.setPlaceholder("90 days").setValue(String(this.plugin.settings.timeRange)).onChange(async (value) => {
        this.plugin.settings.timeRange = Number(value);
        await this.plugin.saveSettings();
      })
    );
    if (this.plugin.settings.accessToken) {
      GoogleSettingsUI.renderTokenStatus(
        containerEl,
        this.plugin.settings.tokenExpiryDate
      );
    }
    GoogleSettingsUI.renderAccountSetting(
      containerEl,
      !!this.plugin.settings.accessToken,
      this.plugin.settings.clientId,
      () => {
        GoogleAuth.initiateOAuthFlow(this.plugin.settings.clientId);
      },
      async () => {
        this.plugin.settings.accessToken = "";
        this.plugin.settings.tokenExpiryDate = void 0;
        await this.plugin.saveSettings();
        this.display();
        GoogleAuth.disconnect();
      },
      async () => {
        await GoogleCalendarAPI.syncCalendar(
          this.plugin.settings.accessToken,
          this.plugin.settings.tokenExpiryDate
        );
      }
    );
  }
};

// src/main.ts
var import_obsidian7 = require("obsidian");

// src/components/event-suggestion.ts
var import_obsidian6 = require("obsidian");

// src/components/create-event.ts
var import_obsidian5 = require("obsidian");
var CreateEventModal = class extends import_obsidian5.Modal {
  constructor(app, plugin, initialTitle, onSubmit) {
    super(app);
    this.plugin = plugin;
    this.initialTitle = initialTitle;
    this.onSubmit = onSubmit;
    this.title = initialTitle || "";
    this.isAllDay = false;
    this.description = "";
    const now = /* @__PURE__ */ new Date();
    this.date = now.toISOString().split("T")[0] || "";
    const startHour = (now.getHours() + 1) % 24;
    const endHour = (now.getHours() + 2) % 24;
    this.startTime = `${String(startHour).padStart(2, "0")}:00`;
    this.endTime = `${String(endHour).padStart(2, "0")}:00`;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Create Calendar Event" });
    new import_obsidian5.Setting(contentEl).setName("Event title").setDesc("Name of the event").addText(
      (text) => text.setPlaceholder("Team Meeting").setValue(this.title).onChange((value) => {
        this.title = value;
      })
    );
    new import_obsidian5.Setting(contentEl).setName("Date").setDesc("Event date").addText((text) => {
      text.setPlaceholder("YYYY-MM-DD").setValue(this.date).onChange((value) => {
        this.date = value;
      });
      text.inputEl.type = "date";
    });
    new import_obsidian5.Setting(contentEl).setName("All-day event").setDesc("Toggle for all-day events").addToggle(
      (toggle) => toggle.setValue(this.isAllDay).onChange((value) => {
        this.isAllDay = value;
        const timeSettings = contentEl.querySelectorAll(".time-setting");
        timeSettings.forEach((el) => {
          el.style.display = value ? "none" : "flex";
        });
      })
    );
    const startTimeSetting = new import_obsidian5.Setting(contentEl).setName("Start time").setDesc("Event start time").addText((text) => {
      text.setPlaceholder("09:00").setValue(this.startTime).onChange((value) => {
        this.startTime = value;
      });
      text.inputEl.type = "time";
    });
    startTimeSetting.settingEl.addClass("time-setting");
    const endTimeSetting = new import_obsidian5.Setting(contentEl).setName("End time").setDesc("Event end time").addText((text) => {
      text.setPlaceholder("10:00").setValue(this.endTime).onChange((value) => {
        this.endTime = value;
      });
      text.inputEl.type = "time";
    });
    endTimeSetting.settingEl.addClass("time-setting");
    new import_obsidian5.Setting(contentEl).setName("Description").setDesc("Additional details (optional)").addTextArea((text) => {
      text.setPlaceholder("Meeting agenda, notes, etc.").setValue(this.description).onChange((value) => {
        this.description = value;
      });
      text.inputEl.rows = 4;
      text.inputEl.style.width = "100%";
    });
    const buttonContainer = contentEl.createDiv({
      cls: "modal-button-container"
    });
    buttonContainer.style.cssText = "display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end;";
    const cancelBtn = buttonContainer.createEl("button", { text: "Cancel" });
    cancelBtn.addEventListener("click", () => {
      this.close();
    });
    const createBtn = buttonContainer.createEl("button", {
      text: "Create Event",
      cls: "mod-cta"
    });
    createBtn.addEventListener("click", () => {
      this.createEvent();
    });
  }
  async createEvent() {
    if (!this.title.trim()) {
      new import_obsidian5.Notice("\u274C Event title is required");
      return;
    }
    if (!this.date) {
      new import_obsidian5.Notice("\u274C Event date is required");
      return;
    }
    if (!this.isAllDay && (!this.startTime || !this.endTime)) {
      new import_obsidian5.Notice("\u274C Start and end times are required");
      return;
    }
    if (!this.plugin.settings.accessToken) {
      new import_obsidian5.Notice("\u274C Not authenticated. Please connect your Google account in settings.");
      return;
    }
    if (TokenManager.isTokenExpired(this.plugin.settings.tokenExpiryDate)) {
      new import_obsidian5.Notice("\u274C Access token has expired. Please reconnect your Google account in settings.");
      return;
    }
    try {
      const event = {
        summary: this.title.trim(),
        description: this.description.trim() || void 0
      };
      if (this.isAllDay) {
        event.start = {
          date: this.date,
          timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };
        event.end = {
          date: this.date,
          timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };
      } else {
        const startDateTime = `${this.date}T${this.startTime}:00`;
        const endDateTime = `${this.date}T${this.endTime}:00`;
        event.start = {
          dateTime: startDateTime,
          timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };
        event.end = {
          dateTime: endDateTime,
          timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone
        };
      }
      console.log("Creating event:", event);
      const createdEvent = await GoogleCalendarAPI.createEvent(
        this.plugin.settings.accessToken,
        event,
        "primary",
        this.plugin.settings.tokenExpiryDate
      );
      console.log("Event created:", createdEvent);
      const eventLink = createdEvent.htmlLink || `https://calendar.google.com/calendar/event?eid=${encodeURIComponent(createdEvent.id)}`;
      new import_obsidian5.Notice(`\u2705 Event "${this.title}" created successfully!`);
      this.onSubmit({
        title: this.title,
        link: eventLink
      });
      this.close();
    } catch (error) {
      console.error("Error creating event:", error);
      const errorMessage = error instanceof Error ? error.message : "Unknown error";
      new import_obsidian5.Notice(`\u274C Failed to create event: ${errorMessage}`);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/event-suggestion.ts
var EditorEventSuggestion = class extends import_obsidian6.EditorSuggest {
  // 5 minutes
  constructor(app, plugin) {
    super(app);
    this.cachedEvents = [];
    this.lastFetchTime = 0;
    this.CACHE_DURATION = 5 * 60 * 1e3;
    this.plugin = plugin;
  }
  onTrigger(cursor, editor, file) {
    const line = editor.getLine(cursor.line);
    const textBeforeCursor = line.substring(0, cursor.ch);
    const colonMatch = textBeforeCursor.match(/:([\w\s]*)$/);
    if (colonMatch) {
      const query = colonMatch[1] || "";
      const startCh = cursor.ch - colonMatch[0].length + 1;
      return {
        start: { line: cursor.line, ch: startCh },
        end: cursor,
        query
      };
    }
    return null;
  }
  async fetchEventsWithCache(query) {
    const now = Date.now();
    const shouldRefetch = now - this.lastFetchTime > this.CACHE_DURATION;
    if (shouldRefetch || this.cachedEvents.length === 0) {
      try {
        const timeMin = new Date(
          Date.now() - 1 * 24 * 60 * 60 * 1e3
        ).toISOString();
        const timeMax = new Date(
          Date.now() + this.plugin.settings.timeRange * 24 * 60 * 60 * 1e3
        ).toISOString();
        this.cachedEvents = await GoogleCalendarAPI.fetchEvents(
          this.plugin.settings.accessToken,
          "primary",
          void 0,
          timeMin,
          timeMax,
          250,
          this.plugin.settings.tokenExpiryDate
        );
        this.lastFetchTime = now;
      } catch (error) {
        console.error("Error fetching events:", error);
        return [];
      }
    }
    return this.cachedEvents;
  }
  filterEvents(events, query) {
    if (!query || query.trim() === "") {
      return events;
    }
    const lowerQuery = query.toLowerCase().trim();
    return events.filter((event) => {
      var _a, _b, _c, _d;
      if ((_a = event.summary) == null ? void 0 : _a.toLowerCase().includes(lowerQuery)) {
        return true;
      }
      if ((_b = event.description) == null ? void 0 : _b.toLowerCase().includes(lowerQuery)) {
        return true;
      }
      if ((_c = event.location) == null ? void 0 : _c.toLowerCase().includes(lowerQuery)) {
        return true;
      }
      if ((_d = event.attendees) == null ? void 0 : _d.some(
        (attendee) => {
          var _a2, _b2;
          return ((_a2 = attendee.email) == null ? void 0 : _a2.toLowerCase().includes(lowerQuery)) || ((_b2 = attendee.displayName) == null ? void 0 : _b2.toLowerCase().includes(lowerQuery));
        }
      )) {
        return true;
      }
      return false;
    });
  }
  // return list of suggestions
  async getSuggestions(context) {
    if (this.plugin.settings.accessToken === "") {
      console.log("connect google calendar first");
      new import_obsidian6.Notice("Please connect to Google Calendar first");
      return [];
    }
    const query = (context.query || "").trim();
    try {
      const allEvents = await this.fetchEventsWithCache();
      const filteredEvents = this.filterEvents(allEvents, query);
      console.log("filtered events", filteredEvents);
      const suggestions = [];
      suggestions.push(
        ...filteredEvents.map((event) => ({
          event,
          summary: event.summary || event.description || "Untitled Event"
        }))
      );
      return [
        {
          isCreate: true,
          summary: `+ Create new event`
        },
        ...suggestions
      ];
    } catch (error) {
      console.error("Error getting suggestions:", error);
      return [];
    }
  }
  // render each suggestion
  renderSuggestion(item, el) {
    el.empty();
    const container = el.createDiv({ cls: "gcal-suggestion-container" });
    container.style.cssText = "display: flex; justify-content: space-between; align-items: center; padding: 4px 0;";
    if (item.isCreate) {
      container.style.cssText += "color: var(--interactive-accent); font-weight: 600;";
      container.createEl("span", { text: item.summary });
    } else if (item.event) {
      const event = item.event;
      const leftDiv = container.createDiv();
      leftDiv.style.cssText = "flex: 1; min-width: 0;";
      const titleEl = leftDiv.createEl("div", {
        text: event.summary || "Untitled Event",
        cls: "gcal-event-title"
      });
      titleEl.style.cssText = "font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;";
      if (event.location) {
        const locationEl = leftDiv.createEl("div", {
          text: event.location,
          cls: "gcal-event-location"
        });
        locationEl.style.cssText = "font-size: 0.8em; color: var(--text-muted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-top: 2px;";
      }
      const rightDiv = container.createDiv();
      rightDiv.style.cssText = "flex-shrink: 0; margin-left: 12px; text-align: right;";
      try {
        const startDate = new Date(
          event.start.dateTime || event.start.date || ""
        );
        const now = /* @__PURE__ */ new Date();
        const isToday = startDate.toDateString() === now.toDateString();
        const isTomorrow = startDate.toDateString() === new Date(now.getTime() + 864e5).toDateString();
        let dateStr = "";
        if (isToday) {
          dateStr = "Today";
        } else if (isTomorrow) {
          dateStr = "Tomorrow";
        } else {
          dateStr = startDate.toLocaleDateString([], {
            month: "short",
            day: "numeric",
            year: startDate.getFullYear() !== now.getFullYear() ? "numeric" : void 0
          });
        }
        let timeStr = "";
        if (event.start.dateTime) {
          timeStr = startDate.toLocaleTimeString([], {
            hour: "numeric",
            minute: "2-digit",
            hour12: true
          });
        } else {
          timeStr = "All day";
        }
        const dateEl = rightDiv.createEl("div", {
          text: dateStr,
          cls: "gcal-event-date"
        });
        dateEl.style.cssText = "font-size: 0.85em; color: var(--text-muted);";
        const timeEl = rightDiv.createEl("div", {
          text: timeStr,
          cls: "gcal-event-time"
        });
        timeEl.style.cssText = "font-size: 0.9em; font-weight: 500;";
        if (event.hangoutLink || event.conferenceData) {
          const conferenceEl = rightDiv.createEl("div", {
            text: "\u{1F3A5} Video",
            cls: "gcal-event-conference"
          });
          conferenceEl.style.cssText = "font-size: 0.75em; color: var(--interactive-accent); margin-top: 2px;";
        }
      } catch (e) {
        console.error("Error formatting date:", e);
        rightDiv.createEl("small", {
          text: "Invalid date",
          attr: { style: "color: var(--text-error);" }
        });
      }
    }
  }
  // user selects a suggestion
  selectSuggestion(item, evt) {
    if (!this.context) {
      console.error("No context available");
      return;
    }
    if (item.isCreate) {
      new CreateEventModal(
        this.app,
        this.plugin,
        this.context.query,
        (eventData) => {
          if (this.context) {
            const formattedText = `[${eventData.title}](${eventData.link})`;
            this.context.editor.replaceRange(
              formattedText,
              this.context.start,
              this.context.end
            );
          }
        }
      ).open();
    } else if (item.event) {
      const event = item.event;
      const eventLink = event.htmlLink || `https://calendar.google.com/calendar/event?eid=${encodeURIComponent(event.id)}`;
      const eventTitle = event.summary || "Untitled Event";
      const formattedText = `[${eventTitle}](${eventLink})`;
      this.context.editor.replaceRange(
        formattedText,
        this.context.start,
        this.context.end
      );
    }
  }
  // Clear cache when needed (can be called from plugin)
  clearCache() {
    this.cachedEvents = [];
    this.lastFetchTime = 0;
  }
};

// src/main.ts
var PMCPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.settingTab = null;
    this.editorSuggestion = null;
  }
  async onload() {
    await this.loadSettings();
    this.settingTab = new PMCPluginSetting(this.app, this);
    this.addSettingTab(this.settingTab);
    this.registerObsidianProtocolHandler("pick-meeting-token", async (data) => {
      var _a;
      const token = data.access_token;
      if (token) {
        this.settings.accessToken = token;
        const expiryOption = this.settings.tokenExpiry || "unlimited";
        this.settings.tokenExpiryDate = TokenManager.calculateExpiryDate(expiryOption);
        await this.saveSettings();
        (_a = this.settingTab) == null ? void 0 : _a.display();
        new import_obsidian7.Notice("\u2705 Google Calendar Connected!");
      } else {
        new import_obsidian7.Notice(
          `\u274C Connection failed: ${data.error || "No token found in response"}`
        );
      }
    });
    this.editorSuggestion = new EditorEventSuggestion(this.app, this);
    this.registerEditorSuggest(this.editorSuggestion);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZy50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS90eXBlcy50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS9hdXRoLnRzIiwgInNyYy9jb21wb25lbnRzL3RhYnMvZ29vZ2xlL2NhbGVuZGFyLWFwaS50cyIsICJzcmMvY29tcG9uZW50cy90YWJzL2dvb2dsZS90b2tlbi1tYW5hZ2VyLnRzIiwgInNyYy9jb21wb25lbnRzL3RhYnMvZ29vZ2xlL3NldHRpbmdzLXVpLnRzIiwgInNyYy9jb21wb25lbnRzL2V2ZW50LXN1Z2dlc3Rpb24udHMiLCAic3JjL2NvbXBvbmVudHMvY3JlYXRlLWV2ZW50LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuICBERUZBVUxUX1NFVFRJTkdTLFxuICBQTUNQbHVnaW5TZXR0aW5nLFxuICBQTUNQbHVnaW5TZXR0aW5nVHlwZSxcbn0gZnJvbSBcImNvbXBvbmVudHMvc2V0dGluZ1wiO1xuaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgeyBFZGl0b3JFdmVudFN1Z2dlc3Rpb24gfSBmcm9tIFwiY29tcG9uZW50cy9ldmVudC1zdWdnZXN0aW9uXCI7XG5pbXBvcnQgeyBUb2tlbk1hbmFnZXIgfSBmcm9tIFwiY29tcG9uZW50cy90YWJzL2dvb2dsZS90b2tlbi1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBUb2tlbkV4cGlyeU9wdGlvbiB9IGZyb20gXCJjb21wb25lbnRzL3RhYnMvZ29vZ2xlL3R5cGVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBNQ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBQTUNQbHVnaW5TZXR0aW5nVHlwZTtcbiAgc2V0dGluZ1RhYjogUE1DUGx1Z2luU2V0dGluZyB8IG51bGwgPSBudWxsO1xuICBlZGl0b3JTdWdnZXN0aW9uOiBFZGl0b3JFdmVudFN1Z2dlc3Rpb24gfCBudWxsID0gbnVsbDtcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIC8vcmVnaXN0ZXIgc2V0dGluZ3MgdGFiXG4gICAgdGhpcy5zZXR0aW5nVGFiID0gbmV3IFBNQ1BsdWdpblNldHRpbmcodGhpcy5hcHAsIHRoaXMpO1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdUYWIpO1xuXG4gICAgLy9nb29nbGUgb2F1dGggY2FsbGJhY2sgaGFuZGxlclxuICAgIHRoaXMucmVnaXN0ZXJPYnNpZGlhblByb3RvY29sSGFuZGxlcihcInBpY2stbWVldGluZy10b2tlblwiLCBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBkYXRhLmFjY2Vzc190b2tlbjtcblxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYWNjZXNzVG9rZW4gPSB0b2tlbjtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgYW5kIHN0b3JlIHRva2VuIGV4cGlyeSBkYXRlIGJhc2VkIG9uIHVzZXIgc2V0dGluZ3NcbiAgICAgICAgY29uc3QgZXhwaXJ5T3B0aW9uID0gKHRoaXMuc2V0dGluZ3MudG9rZW5FeHBpcnkgfHxcbiAgICAgICAgICBcInVubGltaXRlZFwiKSBhcyBUb2tlbkV4cGlyeU9wdGlvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy50b2tlbkV4cGlyeURhdGUgPVxuICAgICAgICAgIFRva2VuTWFuYWdlci5jYWxjdWxhdGVFeHBpcnlEYXRlKGV4cGlyeU9wdGlvbik7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5zZXR0aW5nVGFiPy5kaXNwbGF5KCk7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTI3MDUgR29vZ2xlIENhbGVuZGFyIENvbm5lY3RlZCFcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKFxuICAgICAgICAgIGBcdTI3NEMgQ29ubmVjdGlvbiBmYWlsZWQ6ICR7ZGF0YS5lcnJvciB8fCBcIk5vIHRva2VuIGZvdW5kIGluIHJlc3BvbnNlXCJ9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vcmVnaXN0ZXIgZWRpdG9yIHN1Z2dlc3Rpb25cbiAgICB0aGlzLmVkaXRvclN1Z2dlc3Rpb24gPSBuZXcgRWRpdG9yRXZlbnRTdWdnZXN0aW9uKHRoaXMuYXBwLCB0aGlzKTtcbiAgICB0aGlzLnJlZ2lzdGVyRWRpdG9yU3VnZ2VzdCh0aGlzLmVkaXRvclN1Z2dlc3Rpb24pO1xuICB9XG5cbiAgb251bmxvYWQoKSB7fVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHt9LFxuICAgICAgREVGQVVMVF9TRVRUSU5HUyxcbiAgICAgIChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8UE1DUGx1Z2luU2V0dGluZ1R5cGU+LFxuICAgICk7XG4gIH1cblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgfVxufVxuIiwgImltcG9ydCBQTUNQbHVnaW4gZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtcbiAgR29vZ2xlQ2FsZW5kYXJTZXR0aW5ncyxcbiAgREVGQVVMVF9HT09HTEVfU0VUVElOR1MsXG4gIFRva2VuRXhwaXJ5T3B0aW9uLFxufSBmcm9tIFwiLi90YWJzL2dvb2dsZS90eXBlc1wiO1xuaW1wb3J0IHsgR29vZ2xlQXV0aCB9IGZyb20gXCIuL3RhYnMvZ29vZ2xlL2F1dGhcIjtcbmltcG9ydCB7IEdvb2dsZUNhbGVuZGFyQVBJIH0gZnJvbSBcIi4vdGFicy9nb29nbGUvY2FsZW5kYXItYXBpXCI7XG5pbXBvcnQgeyBHb29nbGVTZXR0aW5nc1VJIH0gZnJvbSBcIi4vdGFicy9nb29nbGUvc2V0dGluZ3MtdWlcIjtcbmltcG9ydCB7IFRva2VuTWFuYWdlciB9IGZyb20gXCIuL3RhYnMvZ29vZ2xlL3Rva2VuLW1hbmFnZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBQTUNQbHVnaW5TZXR0aW5nVHlwZSBleHRlbmRzIEdvb2dsZUNhbGVuZGFyU2V0dGluZ3Mge31cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBNQ1BsdWdpblNldHRpbmdUeXBlID0ge1xuICAuLi5ERUZBVUxUX0dPT0dMRV9TRVRUSU5HUyxcbn07XG5cbmV4cG9ydCBjbGFzcyBQTUNQbHVnaW5TZXR0aW5nIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gIHBsdWdpbjogUE1DUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBNQ1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgLy8gVGl0bGUgYW5kIGRlc2NyaXB0aW9uXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiUGljayBHb29nbGUgQ2FsZW5kYXIgRXZlbnRcIiB9KTtcbiAgICBcbiAgICBjb25zdCBpbnRyb1NlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwicG1jLWludHJvLXNlY3Rpb25cIiB9KTtcbiAgICBpbnRyb1NlY3Rpb24uc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgaW50cm9TZWN0aW9uLnN0eWxlLnBhZGRpbmcgPSBcIjE1cHhcIjtcbiAgICBpbnRyb1NlY3Rpb24uc3R5bGUuYmFja2dyb3VuZCA9IFwidmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpXCI7XG4gICAgaW50cm9TZWN0aW9uLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiOHB4XCI7XG4gICAgXG4gICAgaW50cm9TZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIkhvdyB0byBVc2VcIiB9KTtcbiAgICBjb25zdCB1c2FnZUxpc3QgPSBpbnRyb1NlY3Rpb24uY3JlYXRlRWwoXCJ1bFwiKTtcbiAgICB1c2FnZUxpc3Quc3R5bGUubWFyZ2luTGVmdCA9IFwiMjBweFwiO1xuICAgIFxuICAgIGNvbnN0IGl0ZW0xID0gdXNhZ2VMaXN0LmNyZWF0ZUVsKFwibGlcIik7XG4gICAgaXRlbTEuaW5uZXJIVE1MID0gXCJUeXBlIDxjb2RlPjo8L2NvZGU+IGluIHlvdXIgbm90ZSB0byB0cmlnZ2VyIHRoZSBjYWxlbmRhciBldmVudCBwaWNrZXJcIjtcbiAgICBcbiAgICBjb25zdCBpdGVtMiA9IHVzYWdlTGlzdC5jcmVhdGVFbChcImxpXCIpO1xuICAgIGl0ZW0yLmlubmVySFRNTCA9IFwiVHlwZSA8Y29kZT46bWVldGluZzwvY29kZT4gdG8gc2VhcmNoIGFuZCBmaWx0ZXIgZXZlbnRzIGNvbnRhaW5pbmcgJ21lZXRpbmcnXCI7XG4gICAgXG4gICAgY29uc3QgaXRlbTMgPSB1c2FnZUxpc3QuY3JlYXRlRWwoXCJsaVwiKTtcbiAgICBpdGVtMy5pbm5lckhUTUwgPSBcIlNlbGVjdCBhbiBldmVudCBmcm9tIHRoZSBsaXN0IHRvIGluc2VydCBpdCBhcyBhIGxpbmsgaW4geW91ciBub3RlXCI7XG4gICAgXG4gICAgY29uc3QgaXRlbTQgPSB1c2FnZUxpc3QuY3JlYXRlRWwoXCJsaVwiKTtcbiAgICBpdGVtNC5pbm5lckhUTUwgPSBcIkNob29zZSA8c3Ryb25nPisgQ3JlYXRlIG5ldyBldmVudDwvc3Ryb25nPiB0byBjcmVhdGUgYSBuZXcgY2FsZW5kYXIgZXZlbnRcIjtcbiAgICBcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJTZXR1cCAmIENvbmZpZ3VyYXRpb25cIiB9KTtcblxuICAgIC8vIFJlbmRlciBzZXR1cCBndWlkZVxuICAgIEdvb2dsZVNldHRpbmdzVUkucmVuZGVyU2V0dXBHdWlkZShjb250YWluZXJFbCk7XG4gICAgLy8gUmVuZGVyIE9BdXRoIGNhbGxiYWNrIFVSTFxuICAgIEdvb2dsZVNldHRpbmdzVUkucmVuZGVyQ2FsbGJhY2tVcmxTZXR0aW5nKGNvbnRhaW5lckVsKTtcbiAgICAvLyBSZW5kZXIgQ2xpZW50IElEIGlucHV0XG4gICAgR29vZ2xlU2V0dGluZ3NVSS5yZW5kZXJDbGllbnRJZFNldHRpbmcoXG4gICAgICBjb250YWluZXJFbCxcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWVudElkLFxuICAgICAgYXN5bmMgKGNsaWVudElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy8gUmVuZGVyIFRva2VuIEV4cGlyeSBzZXR0aW5nXG4gICAgR29vZ2xlU2V0dGluZ3NVSS5yZW5kZXJUb2tlbkV4cGlyeVNldHRpbmcoXG4gICAgICBjb250YWluZXJFbCxcbiAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5IGFzIFRva2VuRXhwaXJ5T3B0aW9uLFxuICAgICAgYXN5bmMgKGV4cGlyeTogVG9rZW5FeHBpcnlPcHRpb24pID0+IHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW5FeHBpcnkgPSBleHBpcnk7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5RGF0ZSA9XG4gICAgICAgICAgVG9rZW5NYW5hZ2VyLmNhbGN1bGF0ZUV4cGlyeURhdGUoZXhwaXJ5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgLy9zdWdnZXN0aW9uIHRpbWUgcmFuZ2Ugc2V0dGluZ1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJTdWdnZXN0aW9uIFRpbWUgUmFuZ2VcIilcbiAgICAgIC5zZXREZXNjKFxuICAgICAgICAnVGltZSBkdXJhdGlvbiB0byBmZXRjaCBjYWxlbmRhciBldmVudHMgZm9yIHN1Z2dlc3Rpb25zIChlLmcuLCBcIjkwIGRheXNcIikuIEV2ZW50cyBmcm9tIHRoaXMgbWFueSBkYXlzIGluIHRoZSBwYXN0IGFuZCBmdXR1cmUgd2lsbCBiZSBjb25zaWRlcmVkLicsXG4gICAgICApXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjkwIGRheXNcIilcbiAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnRpbWVSYW5nZSkpIC8vIEVuc3VyZSB5b3VyIHNldHRpbmdzIG9iamVjdCBoYXMgdGhpcyBrZXlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50aW1lUmFuZ2UgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgLy8gUmVuZGVyIHRva2VuIHN0YXR1cyBpZiBjb25uZWN0ZWRcbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWNjZXNzVG9rZW4pIHtcbiAgICAgIEdvb2dsZVNldHRpbmdzVUkucmVuZGVyVG9rZW5TdGF0dXMoXG4gICAgICAgIGNvbnRhaW5lckVsLFxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2tlbkV4cGlyeURhdGUsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFJlbmRlciBhY2NvdW50IGNvbm5lY3Rpb24gc2VjdGlvblxuICAgIEdvb2dsZVNldHRpbmdzVUkucmVuZGVyQWNjb3VudFNldHRpbmcoXG4gICAgICBjb250YWluZXJFbCxcbiAgICAgICEhdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWNjZXNzVG9rZW4sXG4gICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGllbnRJZCxcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8gT24gQ29ubmVjdFxuICAgICAgICBHb29nbGVBdXRoLmluaXRpYXRlT0F1dGhGbG93KHRoaXMucGx1Z2luLnNldHRpbmdzLmNsaWVudElkKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFjY2Vzc1Rva2VuID0gXCJcIjtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW5FeHBpcnlEYXRlID0gdW5kZWZpbmVkO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgIEdvb2dsZUF1dGguZGlzY29ubmVjdCgpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgR29vZ2xlQ2FsZW5kYXJBUEkuc3luY0NhbGVuZGFyKFxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5RGF0ZSxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgKTtcbiAgfVxufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlQ2FsZW5kYXJTZXR0aW5ncyB7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIHRva2VuRXhwaXJ5OiBzdHJpbmc7XG4gIHRva2VuRXhwaXJ5RGF0ZT86IG51bWJlcjtcbiAgdGltZVJhbmdlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0dPT0dMRV9TRVRUSU5HUzogR29vZ2xlQ2FsZW5kYXJTZXR0aW5ncyA9IHtcbiAgY2xpZW50SWQ6IFwiXCIsXG4gIGFjY2Vzc1Rva2VuOiBcIlwiLFxuICB0b2tlbkV4cGlyeTogXCJ1bmxpbWl0ZWRcIixcbiAgdG9rZW5FeHBpcnlEYXRlOiB1bmRlZmluZWQsXG4gIHRpbWVSYW5nZTogOTAsXG59O1xuXG5leHBvcnQgdHlwZSBUb2tlbkV4cGlyeU9wdGlvbiA9XG4gIHwgXCIxd2Vla1wiXG4gIHwgXCIxbW9udGhcIlxuICB8IFwiM21vbnRoc1wiXG4gIHwgXCI2bW9udGhzXCJcbiAgfCBcInVubGltaXRlZFwiO1xuXG5leHBvcnQgY29uc3QgVE9LRU5fRVhQSVJZX09QVElPTlM6IFJlY29yZDxUb2tlbkV4cGlyeU9wdGlvbiwgc3RyaW5nPiA9IHtcbiAgXCIxd2Vla1wiOiBcIjEgV2Vla1wiLFxuICBcIjFtb250aFwiOiBcIjEgTW9udGhcIixcbiAgXCIzbW9udGhzXCI6IFwiMyBNb250aHNcIixcbiAgXCI2bW9udGhzXCI6IFwiNiBNb250aHNcIixcbiAgdW5saW1pdGVkOiBcIlVubGltaXRlZCAoVW50aWwgbWFudWFsbHkgZGlzY29ubmVjdGVkKVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IEdPT0dMRV9PQVVUSF9DQUxMQkFDS19VUkwgPVxuICBcImh0dHBzOi8vcmFqZWV2cmFqY2hhbC5naXRodWIuaW8vcG1jL29hdXRoLWNhbGxiYWNrXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgT0F1dGhUb2tlblJlc3BvbnNlIHtcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XG4gIGV4cGlyZXNfaW46IG51bWJlcjtcbiAgc2NvcGU6IHN0cmluZztcbiAgdG9rZW5fdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhbGVuZGFyRXZlbnQge1xuICBraW5kOiBzdHJpbmc7XG4gIGV0YWc6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgc3RhdHVzOiBzdHJpbmc7XG4gIGh0bWxMaW5rOiBzdHJpbmc7XG4gIGNyZWF0ZWQ6IHN0cmluZztcbiAgdXBkYXRlZDogc3RyaW5nO1xuICBzdW1tYXJ5OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgY3JlYXRvcj86IHtcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICAgIHNlbGY/OiBib29sZWFuO1xuICB9O1xuICBvcmdhbml6ZXI/OiB7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgICBzZWxmPzogYm9vbGVhbjtcbiAgfTtcbiAgc3RhcnQ6IHtcbiAgICBkYXRlVGltZT86IHN0cmluZztcbiAgICBkYXRlPzogc3RyaW5nO1xuICAgIHRpbWVab25lPzogc3RyaW5nO1xuICB9O1xuICBlbmQ6IHtcbiAgICBkYXRlVGltZT86IHN0cmluZztcbiAgICBkYXRlPzogc3RyaW5nO1xuICAgIHRpbWVab25lPzogc3RyaW5nO1xuICB9O1xuICBpQ2FsVUlEPzogc3RyaW5nO1xuICBzZXF1ZW5jZT86IG51bWJlcjtcbiAgYXR0ZW5kZWVzPzogQXJyYXk8e1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgZGlzcGxheU5hbWU/OiBzdHJpbmc7XG4gICAgcmVzcG9uc2VTdGF0dXM/OiBzdHJpbmc7XG4gICAgc2VsZj86IGJvb2xlYW47XG4gICAgb3JnYW5pemVyPzogYm9vbGVhbjtcbiAgfT47XG4gIGhhbmdvdXRMaW5rPzogc3RyaW5nO1xuICBjb25mZXJlbmNlRGF0YT86IHtcbiAgICBjcmVhdGVSZXF1ZXN0Pzoge1xuICAgICAgcmVxdWVzdElkOiBzdHJpbmc7XG4gICAgICBjb25mZXJlbmNlU29sdXRpb25LZXk6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIHN0YXR1czoge1xuICAgICAgICBzdGF0dXNDb2RlOiBzdHJpbmc7XG4gICAgICB9O1xuICAgIH07XG4gICAgZW50cnlQb2ludHM/OiBBcnJheTx7XG4gICAgICBlbnRyeVBvaW50VHlwZTogc3RyaW5nO1xuICAgICAgdXJpOiBzdHJpbmc7XG4gICAgICBsYWJlbD86IHN0cmluZztcbiAgICB9PjtcbiAgICBjb25mZXJlbmNlU29sdXRpb24/OiB7XG4gICAgICBrZXk6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgfTtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIGljb25Vcmk/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBjb25mZXJlbmNlSWQ/OiBzdHJpbmc7XG4gIH07XG4gIHJlbWluZGVycz86IHtcbiAgICB1c2VEZWZhdWx0OiBib29sZWFuO1xuICAgIG92ZXJyaWRlcz86IEFycmF5PHtcbiAgICAgIG1ldGhvZDogc3RyaW5nO1xuICAgICAgbWludXRlczogbnVtYmVyO1xuICAgIH0+O1xuICB9O1xuICBldmVudFR5cGU6IHN0cmluZztcbn1cbiIsICIvKipcbiAqIEdvb2dsZSBPQXV0aCBhdXRoZW50aWNhdGlvbiBhbmQgY29ubmVjdGlvbiBtYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBHT09HTEVfT0FVVEhfQ0FMTEJBQ0tfVVJMIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNsYXNzIEdvb2dsZUF1dGgge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBPQVVUSF9VUkwgPVxuICAgIFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL3YyL2F1dGhcIjtcbiAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgU0NPUEVTID0gW1xuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5ldmVudHNcIixcbiAgXTtcblxuICAvKipcbiAgICogSW5pdGlhdGUgT0F1dGggZmxvdyB0byBjb25uZWN0IHRvIEdvb2dsZSBDYWxlbmRhclxuICAgKiBAcGFyYW0gY2xpZW50SWQgLSBPQXV0aCAyLjAgQ2xpZW50IElEIGZyb20gR29vZ2xlIENsb3VkIENvbnNvbGVcbiAgICovXG4gIHN0YXRpYyBpbml0aWF0ZU9BdXRoRmxvdyhjbGllbnRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFjbGllbnRJZCB8fCBjbGllbnRJZC50cmltKCkgPT09IFwiXCIpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2UgY29uZmlndXJlIENsaWVudCBJRCBmaXJzdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhdXRoVXJsID0gdGhpcy5idWlsZEF1dGhVcmwoY2xpZW50SWQpO1xuXG4gICAgbmV3IE5vdGljZShcIk9wZW5pbmcgR29vZ2xlIGF1dGhlbnRpY2F0aW9uLi4uXCIpO1xuXG4gICAgLy8gT3BlbiBPQXV0aCBVUkwgaW4gYnJvd3NlclxuICAgIHdpbmRvdy5vcGVuKGF1dGhVcmwsIFwiX2JsYW5rXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIHRoZSBPQXV0aCBhdXRob3JpemF0aW9uIFVSTFxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgYnVpbGRBdXRoVXJsKGNsaWVudElkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgY2xpZW50X2lkOiBjbGllbnRJZCxcbiAgICAgIHJlZGlyZWN0X3VyaTogR09PR0xFX09BVVRIX0NBTExCQUNLX1VSTCxcbiAgICAgIHJlc3BvbnNlX3R5cGU6IFwidG9rZW5cIixcbiAgICAgIHNjb3BlOiB0aGlzLlNDT1BFUy5qb2luKFwiIFwiKSxcbiAgICAgIGFjY2Vzc190eXBlOiBcIm9ubGluZVwiLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGAke3RoaXMuT0FVVEhfVVJMfT8ke3BhcmFtcy50b1N0cmluZygpfWA7XG4gIH1cblxuICAvKipcbiAgICogRGlzY29ubmVjdCBmcm9tIEdvb2dsZSBDYWxlbmRhclxuICAgKiBDbGVhcnMgdGhlIHN0b3JlZCBhY2Nlc3MgdG9rZW5cbiAgICovXG4gIHN0YXRpYyBkaXNjb25uZWN0KCk6IHZvaWQge1xuICAgIG5ldyBOb3RpY2UoXCJEaXNjb25uZWN0ZWQgZnJvbSBHb29nbGUgQ2FsZW5kYXJcIik7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgVG9rZW5NYW5hZ2VyIH0gZnJvbSBcIi4vdG9rZW4tbWFuYWdlclwiO1xuXG5leHBvcnQgY2xhc3MgR29vZ2xlQ2FsZW5kYXJBUEkge1xuICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBCQVNFX1VSTCA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY2FsZW5kYXIvdjNcIjtcblxuICAvKipcbiAgICogRmV0Y2ggY2FsZW5kYXIgZXZlbnRzIGZyb20gR29vZ2xlIENhbGVuZGFyXG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gY2FsZW5kYXJJZCAtIENhbGVuZGFyIElEIChkZWZhdWx0cyB0byAncHJpbWFyeScpXG4gICAqIEBwYXJhbSBxdWVyeSAtIFNlYXJjaCBxdWVyeSBmb3IgZXZlbnRzXG4gICAqIEBwYXJhbSB0aW1lTWluIC0gU3RhcnQgdGltZSBmb3IgZXZlbnRzIChJU08gODYwMSlcbiAgICogQHBhcmFtIHRpbWVNYXggLSBFbmQgdGltZSBmb3IgZXZlbnRzIChJU08gODYwMSlcbiAgICogQHBhcmFtIG1heFJlc3VsdHMgLSBNYXhpbXVtIG51bWJlciBvZiBldmVudHMgdG8gcmV0dXJuXG4gICAqIEBwYXJhbSB0b2tlbkV4cGlyeURhdGUgLSBPcHRpb25hbCB0b2tlbiBleHBpcnkgZGF0ZSBmb3IgdmFsaWRhdGlvblxuICAgKiBAcmV0dXJucyBBcnJheSBvZiBjYWxlbmRhciBldmVudHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmZXRjaEV2ZW50cyhcbiAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICAgIGNhbGVuZGFySWQ6IHN0cmluZyA9IFwicHJpbWFyeVwiLFxuICAgIHF1ZXJ5Pzogc3RyaW5nLFxuICAgIHRpbWVNaW4/OiBzdHJpbmcsXG4gICAgdGltZU1heD86IHN0cmluZyxcbiAgICBtYXhSZXN1bHRzOiBudW1iZXIgPSAyNTAsXG4gICAgdG9rZW5FeHBpcnlEYXRlPzogbnVtYmVyLFxuICApOiBQcm9taXNlPENhbGVuZGFyRXZlbnRbXT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiZWZvcmUgbWFraW5nIEFQSSBjYWxsXG4gICAgICBpZiAoVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKHRva2VuRXhwaXJ5RGF0ZSkpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBHb29nbGUgQ2FsZW5kYXIgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWNvbm5lY3QgaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBleHBpcmVkXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICBzaW5nbGVFdmVudHM6IFwidHJ1ZVwiLFxuICAgICAgICBvcmRlckJ5OiBcInN0YXJ0VGltZVwiLFxuICAgICAgICBtYXhSZXN1bHRzOiBtYXhSZXN1bHRzLnRvU3RyaW5nKCksXG4gICAgICB9O1xuXG4gICAgICBpZiAodGltZU1pbikge1xuICAgICAgICBwYXJhbXMudGltZU1pbiA9IHRpbWVNaW47XG4gICAgICB9XG4gICAgICBpZiAodGltZU1heCkge1xuICAgICAgICBwYXJhbXMudGltZU1heCA9IHRpbWVNYXg7XG4gICAgICB9XG4gICAgICBpZiAocXVlcnkgJiYgcXVlcnkudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgIHBhcmFtcy5xID0gcXVlcnk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhwYXJhbXMpLnRvU3RyaW5nKCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke3RoaXMuQkFTRV9VUkx9L2NhbGVuZGFycy8ke2NhbGVuZGFySWR9L2V2ZW50cz8ke3F1ZXJ5U3RyaW5nfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YWNjZXNzVG9rZW59YCxcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkFQSSBFcnJvciBSZXNwb25zZTpcIiwgZXJyb3JUZXh0KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZXZlbnRzOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5pdGVtcyB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNhbGVuZGFyIGV2ZW50czpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBmZXRjaCBjYWxlbmRhciBldmVudHNcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGNhbGVuZGFyIGV2ZW50XG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gZXZlbnQgLSBFdmVudCBkZXRhaWxzIHRvIGNyZWF0ZVxuICAgKiBAcGFyYW0gY2FsZW5kYXJJZCAtIENhbGVuZGFyIElEIChkZWZhdWx0cyB0byAncHJpbWFyeScpXG4gICAqIEBwYXJhbSB0b2tlbkV4cGlyeURhdGUgLSBPcHRpb25hbCB0b2tlbiBleHBpcnkgZGF0ZSBmb3IgdmFsaWRhdGlvblxuICAgKiBAcmV0dXJucyBDcmVhdGVkIGV2ZW50XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlRXZlbnQoXG4gICAgYWNjZXNzVG9rZW46IHN0cmluZyxcbiAgICBldmVudDogUGFydGlhbDxDYWxlbmRhckV2ZW50PixcbiAgICBjYWxlbmRhcklkOiBzdHJpbmcgPSBcInByaW1hcnlcIixcbiAgICB0b2tlbkV4cGlyeURhdGU/OiBudW1iZXIsXG4gICk6IFByb21pc2U8Q2FsZW5kYXJFdmVudD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiZWZvcmUgbWFraW5nIEFQSSBjYWxsXG4gICAgICBpZiAoVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKHRva2VuRXhwaXJ5RGF0ZSkpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBHb29nbGUgQ2FsZW5kYXIgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWNvbm5lY3QgaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBleHBpcmVkXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5CQVNFX1VSTH0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJJZH0vZXZlbnRzYCxcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGV2ZW50KSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGV2ZW50OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNyZWF0ZWRFdmVudCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJFdmVudCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIHJldHVybiBjcmVhdGVkRXZlbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBjYWxlbmRhciBldmVudDpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBjcmVhdGUgY2FsZW5kYXIgZXZlbnRcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGFuIGV4aXN0aW5nIGNhbGVuZGFyIGV2ZW50XG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gZXZlbnRJZCAtIElEIG9mIHRoZSBldmVudCB0byB1cGRhdGVcbiAgICogQHBhcmFtIGV2ZW50IC0gVXBkYXRlZCBldmVudCBkZXRhaWxzXG4gICAqIEBwYXJhbSBjYWxlbmRhcklkIC0gQ2FsZW5kYXIgSUQgKGRlZmF1bHRzIHRvICdwcmltYXJ5JylcbiAgICogQHBhcmFtIHRva2VuRXhwaXJ5RGF0ZSAtIE9wdGlvbmFsIHRva2VuIGV4cGlyeSBkYXRlIGZvciB2YWxpZGF0aW9uXG4gICAqIEByZXR1cm5zIFVwZGF0ZWQgZXZlbnRcbiAgICovXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVFdmVudChcbiAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICAgIGV2ZW50SWQ6IHN0cmluZyxcbiAgICBldmVudDogUGFydGlhbDxDYWxlbmRhckV2ZW50PixcbiAgICBjYWxlbmRhcklkOiBzdHJpbmcgPSBcInByaW1hcnlcIixcbiAgICB0b2tlbkV4cGlyeURhdGU/OiBudW1iZXIsXG4gICk6IFByb21pc2U8Q2FsZW5kYXJFdmVudD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiZWZvcmUgbWFraW5nIEFQSSBjYWxsXG4gICAgICBpZiAoVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKHRva2VuRXhwaXJ5RGF0ZSkpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBHb29nbGUgQ2FsZW5kYXIgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWNvbm5lY3QgaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBleHBpcmVkXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5CQVNFX1VSTH0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJJZH0vZXZlbnRzLyR7ZXZlbnRJZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShldmVudCksXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSBldmVudDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB1cGRhdGVkRXZlbnQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBuZXcgTm90aWNlKFwiRXZlbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICByZXR1cm4gdXBkYXRlZEV2ZW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgY2FsZW5kYXIgZXZlbnQ6XCIsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gdXBkYXRlIGNhbGVuZGFyIGV2ZW50XCIpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGNhbGVuZGFyIGV2ZW50XG4gICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIE9BdXRoIGFjY2VzcyB0b2tlblxuICAgKiBAcGFyYW0gZXZlbnRJZCAtIElEIG9mIHRoZSBldmVudCB0byBkZWxldGVcbiAgICogQHBhcmFtIGNhbGVuZGFySWQgLSBDYWxlbmRhciBJRCAoZGVmYXVsdHMgdG8gJ3ByaW1hcnknKVxuICAgKiBAcGFyYW0gdG9rZW5FeHBpcnlEYXRlIC0gT3B0aW9uYWwgdG9rZW4gZXhwaXJ5IGRhdGUgZm9yIHZhbGlkYXRpb25cbiAgICovXG4gIHN0YXRpYyBhc3luYyBkZWxldGVFdmVudChcbiAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICAgIGV2ZW50SWQ6IHN0cmluZyxcbiAgICBjYWxlbmRhcklkOiBzdHJpbmcgPSBcInByaW1hcnlcIixcbiAgICB0b2tlbkV4cGlyeURhdGU/OiBudW1iZXIsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiZWZvcmUgbWFraW5nIEFQSSBjYWxsXG4gICAgICBpZiAoVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKHRva2VuRXhwaXJ5RGF0ZSkpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBHb29nbGUgQ2FsZW5kYXIgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWNvbm5lY3QgaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBleHBpcmVkXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5CQVNFX1VSTH0vY2FsZW5kYXJzLyR7Y2FsZW5kYXJJZH0vZXZlbnRzLyR7ZXZlbnRJZH1gLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBldmVudDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKFwiRXZlbnQgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjYWxlbmRhciBldmVudDpcIiwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBkZWxldGUgY2FsZW5kYXIgZXZlbnRcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxpc3Qgb2YgYXZhaWxhYmxlIGNhbGVuZGFyc1xuICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBPQXV0aCBhY2Nlc3MgdG9rZW5cbiAgICogQHBhcmFtIHRva2VuRXhwaXJ5RGF0ZSAtIE9wdGlvbmFsIHRva2VuIGV4cGlyeSBkYXRlIGZvciB2YWxpZGF0aW9uXG4gICAqIEByZXR1cm5zIEFycmF5IG9mIGNhbGVuZGFyIG9iamVjdHNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBsaXN0Q2FsZW5kYXJzKGFjY2Vzc1Rva2VuOiBzdHJpbmcsIHRva2VuRXhwaXJ5RGF0ZT86IG51bWJlcik6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVmFsaWRhdGUgdG9rZW4gYmVmb3JlIG1ha2luZyBBUEkgY2FsbFxuICAgICAgaWYgKFRva2VuTWFuYWdlci5pc1Rva2VuRXhwaXJlZCh0b2tlbkV4cGlyeURhdGUpKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTI2QTBcdUZFMEYgR29vZ2xlIENhbGVuZGFyIHRva2VuIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVjb25uZWN0IGluIHNldHRpbmdzLlwiKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9rZW4gZXhwaXJlZFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5CQVNFX1VSTH0vdXNlcnMvbWUvY2FsZW5kYXJMaXN0YCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBjYWxlbmRhcnM6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLml0ZW1zIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2FsZW5kYXJzOlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGZldGNoIGNhbGVuZGFyc1wiKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5jIGNhbGVuZGFyIGV2ZW50cyAoZmV0Y2ggYW5kIGNhY2hlKVxuICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBPQXV0aCBhY2Nlc3MgdG9rZW5cbiAgICogQHBhcmFtIHRva2VuRXhwaXJ5RGF0ZSAtIE9wdGlvbmFsIHRva2VuIGV4cGlyeSBkYXRlIGZvciB2YWxpZGF0aW9uXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgc3luY0NhbGVuZGFyKGFjY2Vzc1Rva2VuOiBzdHJpbmcsIHRva2VuRXhwaXJ5RGF0ZT86IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiZWZvcmUgbWFraW5nIEFQSSBjYWxsXG4gICAgICBpZiAoVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKHRva2VuRXhwaXJ5RGF0ZSkpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBHb29nbGUgQ2FsZW5kYXIgdG9rZW4gaGFzIGV4cGlyZWQuIFBsZWFzZSByZWNvbm5lY3QgaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb2tlbiBleHBpcmVkXCIpO1xuICAgICAgfVxuICAgICAgbmV3IE5vdGljZShcIlN5bmNpbmcgY2FsZW5kYXIuLi5cIik7XG5cbiAgICAgIC8vIEZldGNoIGV2ZW50cyBmb3IgdGhlIG5leHQgMzAgZGF5c1xuICAgICAgY29uc3QgdGltZU1pbiA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGNvbnN0IHRpbWVNYXggPSBuZXcgRGF0ZShcbiAgICAgICAgRGF0ZS5ub3coKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgICkudG9JU09TdHJpbmcoKTtcblxuICAgICAgY29uc3QgZXZlbnRzID0gYXdhaXQgdGhpcy5mZXRjaEV2ZW50cyhcbiAgICAgICAgYWNjZXNzVG9rZW4sXG4gICAgICAgIFwicHJpbWFyeVwiLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRpbWVNaW4sXG4gICAgICAgIHRpbWVNYXgsXG4gICAgICApO1xuXG4gICAgICBuZXcgTm90aWNlKGBTeW5jZWQgJHtldmVudHMubGVuZ3RofSBldmVudHNgKTtcblxuICAgICAgLy8gVE9ETzogQ2FjaGUgZXZlbnRzIGxvY2FsbHkgZm9yIG9mZmxpbmUgYWNjZXNzXG4gICAgICByZXR1cm47XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzeW5jaW5nIGNhbGVuZGFyOlwiLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIHN5bmMgY2FsZW5kYXJcIik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIFRva2VuIGV4cGlyeSBhbmQgcmVmcmVzaCBtYW5hZ2VtZW50IGZvciBHb29nbGUgQ2FsZW5kYXJcbiAqL1xuXG5pbXBvcnQgeyBUb2tlbkV4cGlyeU9wdGlvbiB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjbGFzcyBUb2tlbk1hbmFnZXIge1xuICAvKipcbiAgICogQ2FsY3VsYXRlIHRva2VuIGV4cGlyeSBkYXRlIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBvcHRpb25cbiAgICogQHBhcmFtIGV4cGlyeU9wdGlvbiAtIFRoZSBleHBpcnkgb3B0aW9uIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG4gICAqIEByZXR1cm5zIFVuaXggdGltZXN0YW1wIHdoZW4gdG9rZW4gZXhwaXJlcywgb3IgdW5kZWZpbmVkIGZvciB1bmxpbWl0ZWRcbiAgICovXG4gIHN0YXRpYyBjYWxjdWxhdGVFeHBpcnlEYXRlKGV4cGlyeU9wdGlvbjogVG9rZW5FeHBpcnlPcHRpb24pOiBudW1iZXIgfCB1bmRlZmluZWQge1xuICAgIGlmIChleHBpcnlPcHRpb24gPT09IFwidW5saW1pdGVkXCIpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBtaWxsaXNlY29uZHNQZXJEYXkgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuXG4gICAgc3dpdGNoIChleHBpcnlPcHRpb24pIHtcbiAgICAgIGNhc2UgXCIxd2Vla1wiOlxuICAgICAgICByZXR1cm4gbm93ICsgNyAqIG1pbGxpc2Vjb25kc1BlckRheTtcbiAgICAgIGNhc2UgXCIxbW9udGhcIjpcbiAgICAgICAgcmV0dXJuIG5vdyArIDMwICogbWlsbGlzZWNvbmRzUGVyRGF5O1xuICAgICAgY2FzZSBcIjNtb250aHNcIjpcbiAgICAgICAgcmV0dXJuIG5vdyArIDkwICogbWlsbGlzZWNvbmRzUGVyRGF5O1xuICAgICAgY2FzZSBcIjZtb250aHNcIjpcbiAgICAgICAgcmV0dXJuIG5vdyArIDE4MCAqIG1pbGxpc2Vjb25kc1BlckRheTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSB0b2tlbiBoYXMgZXhwaXJlZFxuICAgKiBAcGFyYW0gZXhwaXJ5RGF0ZSAtIFVuaXggdGltZXN0YW1wIHdoZW4gdG9rZW4gZXhwaXJlc1xuICAgKiBAcmV0dXJucyB0cnVlIGlmIHRva2VuIGlzIGV4cGlyZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgKi9cbiAgc3RhdGljIGlzVG9rZW5FeHBpcmVkKGV4cGlyeURhdGU6IG51bWJlciB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICAgIGlmICghZXhwaXJ5RGF0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBVbmxpbWl0ZWQgdG9rZW5zIG5ldmVyIGV4cGlyZVxuICAgIH1cblxuICAgIHJldHVybiBEYXRlLm5vdygpID49IGV4cGlyeURhdGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGh1bWFuLXJlYWRhYmxlIHRpbWUgcmVtYWluaW5nIHVudGlsIHRva2VuIGV4cGlyZXNcbiAgICogQHBhcmFtIGV4cGlyeURhdGUgLSBVbml4IHRpbWVzdGFtcCB3aGVuIHRva2VuIGV4cGlyZXNcbiAgICogQHJldHVybnMgRm9ybWF0dGVkIHN0cmluZyBsaWtlIFwiNSBkYXlzXCIsIFwiMiBob3Vyc1wiLCBvciBcIlVubGltaXRlZFwiXG4gICAqL1xuICBzdGF0aWMgZ2V0VGltZVJlbWFpbmluZyhleHBpcnlEYXRlOiBudW1iZXIgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIGlmICghZXhwaXJ5RGF0ZSkge1xuICAgICAgcmV0dXJuIFwiVW5saW1pdGVkXCI7XG4gICAgfVxuXG4gICAgY29uc3QgcmVtYWluaW5nID0gZXhwaXJ5RGF0ZSAtIERhdGUubm93KCk7XG5cbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgIHJldHVybiBcIkV4cGlyZWRcIjtcbiAgICB9XG5cbiAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcihyZW1haW5pbmcgLyAoMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigocmVtYWluaW5nICUgKDI0ICogNjAgKiA2MCAqIDEwMDApKSAvICg2MCAqIDYwICogMTAwMCkpO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChyZW1haW5pbmcgJSAoNjAgKiA2MCAqIDEwMDApKSAvICg2MCAqIDEwMDApKTtcblxuICAgIGlmIChkYXlzID4gMCkge1xuICAgICAgcmV0dXJuIGAke2RheXN9IGRheSR7ZGF5cyAhPT0gMSA/IFwic1wiIDogXCJcIn1gO1xuICAgIH0gZWxzZSBpZiAoaG91cnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7aG91cnN9IGhvdXIke2hvdXJzICE9PSAxID8gXCJzXCIgOiBcIlwifWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgJHttaW51dGVzfSBtaW51dGUke21pbnV0ZXMgIT09IDEgPyBcInNcIiA6IFwiXCJ9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdG9rZW4gbmVlZHMgcmVmcmVzaCBzb29uICh3aXRoaW4gMjQgaG91cnMpXG4gICAqIEBwYXJhbSBleHBpcnlEYXRlIC0gVW5peCB0aW1lc3RhbXAgd2hlbiB0b2tlbiBleHBpcmVzXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdG9rZW4gZXhwaXJlcyB3aXRoaW4gMjQgaG91cnNcbiAgICovXG4gIHN0YXRpYyBuZWVkc1JlZnJlc2hTb29uKGV4cGlyeURhdGU6IG51bWJlciB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICAgIGlmICghZXhwaXJ5RGF0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG9uZURheUluTXMgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IGV4cGlyeURhdGUgLSBEYXRlLm5vdygpO1xuXG4gICAgcmV0dXJuIHJlbWFpbmluZyA+IDAgJiYgcmVtYWluaW5nIDwgb25lRGF5SW5NcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgZXhwaXJ5IGRhdGUgdG8gcmVhZGFibGUgc3RyaW5nXG4gICAqIEBwYXJhbSBleHBpcnlEYXRlIC0gVW5peCB0aW1lc3RhbXAgd2hlbiB0b2tlbiBleHBpcmVzXG4gICAqIEByZXR1cm5zIEZvcm1hdHRlZCBkYXRlIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGZvcm1hdEV4cGlyeURhdGUoZXhwaXJ5RGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBpZiAoIWV4cGlyeURhdGUpIHtcbiAgICAgIHJldHVybiBcIk5ldmVyXCI7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGV4cGlyeURhdGUpO1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZyh1bmRlZmluZWQsIHtcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwibG9uZ1wiLFxuICAgICAgZGF5OiBcIm51bWVyaWNcIixcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICB9KTtcbiAgfVxufVxuIiwgImltcG9ydCB7IE5vdGljZSwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtcbiAgR09PR0xFX09BVVRIX0NBTExCQUNLX1VSTCxcbiAgVE9LRU5fRVhQSVJZX09QVElPTlMsXG4gIFRva2VuRXhwaXJ5T3B0aW9uLFxufSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgVG9rZW5NYW5hZ2VyIH0gZnJvbSBcIi4vdG9rZW4tbWFuYWdlclwiO1xuXG5leHBvcnQgY2xhc3MgR29vZ2xlU2V0dGluZ3NVSSB7XG4gIC8qKlxuICAgKiBSZW5kZXIgc2V0dXAgZ3VpZGUgd2l0aCBzdGVwLWJ5LXN0ZXAgaW5zdHJ1Y3Rpb25zXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyU2V0dXBHdWlkZShjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBzZXR1cFNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6IFwicG1jLXNldHVwLWd1aWRlXCIgfSk7XG4gICAgc2V0dXBTZWN0aW9uLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENDQiBTZXR1cCBHdWlkZVwiIH0pO1xuXG4gICAgY29uc3Qgc2V0dXBTdGVwcyA9IHNldHVwU2VjdGlvbi5jcmVhdGVFbChcIm9sXCIpO1xuXG4gICAgLy8gU3RlcCAxOiBDcmVhdGUgR29vZ2xlIENsb3VkIFByb2plY3RcbiAgICBjb25zdCBzdGVwMSA9IHNldHVwU3RlcHMuY3JlYXRlRWwoXCJsaVwiKTtcbiAgICBzdGVwMS5jcmVhdGVFbChcInN0cm9uZ1wiLCB7IHRleHQ6IFwiQ3JlYXRlIGEgR29vZ2xlIENsb3VkIFByb2plY3Q6XCIgfSk7XG4gICAgY29uc3Qgc3RlcDFMaXN0ID0gc3RlcDEuY3JlYXRlRWwoXCJ1bFwiKTtcbiAgICBzdGVwMUxpc3QuY3JlYXRlRWwoXCJsaVwiKS5pbm5lckhUTUwgPVxuICAgICAgJ0dvIHRvIDxhIGhyZWY9XCJodHRwczovL2NvbnNvbGUuY2xvdWQuZ29vZ2xlLmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5Hb29nbGUgQ2xvdWQgQ29uc29sZTwvYT4nO1xuICAgIHN0ZXAxTGlzdC5jcmVhdGVFbChcImxpXCIsIHtcbiAgICAgIHRleHQ6ICdDbGljayBcIlNlbGVjdCBhIHByb2plY3RcIiBcdTIxOTIgXCJOZXcgUHJvamVjdFwiJyxcbiAgICB9KTtcbiAgICBzdGVwMUxpc3QuY3JlYXRlRWwoXCJsaVwiLCB7XG4gICAgICB0ZXh0OiAnR2l2ZSBpdCBhIG5hbWUgKGUuZy4sIFwiT2JzaWRpYW4gUE1DIFBsdWdpblwiKSBhbmQgY2xpY2sgXCJDcmVhdGVcIicsXG4gICAgfSk7XG5cbiAgICAvLyBTdGVwIDI6IEVuYWJsZSBHb29nbGUgQ2FsZW5kYXIgQVBJXG4gICAgY29uc3Qgc3RlcDIgPSBzZXR1cFN0ZXBzLmNyZWF0ZUVsKFwibGlcIik7XG4gICAgc3RlcDIuY3JlYXRlRWwoXCJzdHJvbmdcIiwgeyB0ZXh0OiBcIkVuYWJsZSBHb29nbGUgQ2FsZW5kYXIgQVBJOlwiIH0pO1xuICAgIGNvbnN0IHN0ZXAyTGlzdCA9IHN0ZXAyLmNyZWF0ZUVsKFwidWxcIik7XG4gICAgc3RlcDJMaXN0LmNyZWF0ZUVsKFwibGlcIiwge1xuICAgICAgdGV4dDogJ0luIHRoZSBzaWRlYmFyLCBnbyB0byBcIkFQSXMgJiBTZXJ2aWNlc1wiIFx1MjE5MiBcIkxpYnJhcnlcIicsXG4gICAgfSk7XG4gICAgc3RlcDJMaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiAnU2VhcmNoIGZvciBcIkdvb2dsZSBDYWxlbmRhciBBUElcIicgfSk7XG4gICAgc3RlcDJMaXN0LmNyZWF0ZUVsKFwibGlcIiwgeyB0ZXh0OiAnQ2xpY2sgb24gaXQgYW5kIHByZXNzIFwiRW5hYmxlXCInIH0pO1xuXG4gICAgLy8gU3RlcCAzOiBDcmVhdGUgT0F1dGggQ3JlZGVudGlhbHNcbiAgICBjb25zdCBzdGVwMyA9IHNldHVwU3RlcHMuY3JlYXRlRWwoXCJsaVwiKTtcbiAgICBzdGVwMy5jcmVhdGVFbChcInN0cm9uZ1wiLCB7IHRleHQ6IFwiQ3JlYXRlIE9BdXRoIDIuMCBDcmVkZW50aWFsczpcIiB9KTtcbiAgICBjb25zdCBzdGVwM0xpc3QgPSBzdGVwMy5jcmVhdGVFbChcInVsXCIpO1xuICAgIHN0ZXAzTGlzdC5jcmVhdGVFbChcImxpXCIsIHtcbiAgICAgIHRleHQ6ICdHbyB0byBcIkFQSXMgJiBTZXJ2aWNlc1wiIFx1MjE5MiBcIkNyZWRlbnRpYWxzXCInLFxuICAgIH0pO1xuICAgIHN0ZXAzTGlzdC5jcmVhdGVFbChcImxpXCIsIHtcbiAgICAgIHRleHQ6ICdDbGljayBcIkNyZWF0ZSBDcmVkZW50aWFsc1wiIFx1MjE5MiBcIk9BdXRoIGNsaWVudCBJRFwiJyxcbiAgICB9KTtcbiAgICBzdGVwM0xpc3QuY3JlYXRlRWwoXCJsaVwiLCB7XG4gICAgICB0ZXh0OiBcIklmIHByb21wdGVkLCBjb25maWd1cmUgdGhlIE9BdXRoIGNvbnNlbnQgc2NyZWVuIGZpcnN0XCIsXG4gICAgfSk7XG4gICAgc3RlcDNMaXN0LmNyZWF0ZUVsKFwibGlcIiwge1xuICAgICAgdGV4dDogJ1NlbGVjdCBcIldlYiBhcHBsaWNhdGlvblwiIGFzIHRoZSBhcHBsaWNhdGlvbiB0eXBlJyxcbiAgICB9KTtcbiAgICBzdGVwM0xpc3RcbiAgICAgIC5jcmVhdGVFbChcImxpXCIsIHsgdGV4dDogXCJBZGQgdGhpcyBBdXRob3JpemVkIHJlZGlyZWN0IFVSSTogXCIgfSlcbiAgICAgIC5jcmVhdGVFbChcImNvZGVcIiwgeyB0ZXh0OiBHT09HTEVfT0FVVEhfQ0FMTEJBQ0tfVVJMIH0pO1xuICAgIHN0ZXAzTGlzdC5jcmVhdGVFbChcImxpXCIsIHtcbiAgICAgIHRleHQ6ICdDbGljayBcIkNyZWF0ZVwiIGFuZCBjb3B5IHlvdXIgQ2xpZW50IElEJyxcbiAgICB9KTtcblxuICAgIC8vIFN0ZXAgNDogQ29uZmlndXJlIHBsdWdpblxuICAgIGNvbnN0IHN0ZXA0ID0gc2V0dXBTdGVwcy5jcmVhdGVFbChcImxpXCIpO1xuICAgIHN0ZXA0LmNyZWF0ZUVsKFwic3Ryb25nXCIsIHtcbiAgICAgIHRleHQ6IFwiUGFzdGUgdGhlIENsaWVudCBJRCBiZWxvdyBhbmQgY2xpY2sgQ29ubmVjdFwiLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciBPQXV0aCBjYWxsYmFjayBVUkwgc2V0dGluZ1xuICAgKi9cbiAgc3RhdGljIHJlbmRlckNhbGxiYWNrVXJsU2V0dGluZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiT0F1dGggQ2FsbGJhY2sgVVJMXCIpXG4gICAgICAuc2V0RGVzYyhcIlVzZSB0aGlzIFVSTCB3aGVuIGNvbmZpZ3VyaW5nIHlvdXIgR29vZ2xlIE9BdXRoIGFwcGxpY2F0aW9uXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dC5zZXRWYWx1ZShHT09HTEVfT0FVVEhfQ0FMTEJBQ0tfVVJMKS5zZXREaXNhYmxlZCh0cnVlKSxcbiAgICAgIClcbiAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJDb3B5XCIpLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KEdPT0dMRV9PQVVUSF9DQUxMQkFDS19VUkwpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJDYWxsYmFjayBVUkwgY29waWVkIHRvIGNsaXBib2FyZCFcIik7XG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgQ2xpZW50IElEIGlucHV0IHNldHRpbmdcbiAgICovXG4gIHN0YXRpYyByZW5kZXJDbGllbnRJZFNldHRpbmcoXG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxuICAgIGN1cnJlbnRDbGllbnRJZDogc3RyaW5nLFxuICAgIG9uU2F2ZTogKGNsaWVudElkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD4sXG4gICk6IHZvaWQge1xuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgLnNldE5hbWUoXCJDbGllbnQgSURcIilcbiAgICAgIC5zZXREZXNjKFwiT0F1dGggMi4wIENsaWVudCBJRCBmcm9tIEdvb2dsZSBDbG91ZCBDb25zb2xlXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT5cbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjEyMzQ1Njc4OS1hYmNkZWZnLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIpXG4gICAgICAgICAgLnNldFZhbHVlKGN1cnJlbnRDbGllbnRJZClcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBvblNhdmUodmFsdWUudHJpbSgpKTtcbiAgICAgICAgICB9KSxcbiAgICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRva2VuIGV4cGlyeSBkcm9wZG93biBzZXR0aW5nXG4gICAqL1xuICBzdGF0aWMgcmVuZGVyVG9rZW5FeHBpcnlTZXR0aW5nKFxuICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICBjdXJyZW50RXhwaXJ5OiBUb2tlbkV4cGlyeU9wdGlvbixcbiAgICBvblNhdmU6IChleHBpcnk6IFRva2VuRXhwaXJ5T3B0aW9uKSA9PiBQcm9taXNlPHZvaWQ+LFxuICApOiB2b2lkIHtcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiVG9rZW4gRXhwaXJ5XCIpXG4gICAgICAuc2V0RGVzYyhcbiAgICAgICAgXCJIb3cgbG9uZyBiZWZvcmUgdGhlIGFjY2VzcyB0b2tlbiBleHBpcmVzIGFuZCByZXF1aXJlcyByZS1hdXRoZW50aWNhdGlvblwiLFxuICAgICAgKVxuICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyhUT0tFTl9FWFBJUllfT1BUSU9OUykuZm9yRWFjaCgoW2tleSwgbGFiZWxdKSA9PiB7XG4gICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGtleSwgbGFiZWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZShjdXJyZW50RXhwaXJ5KS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICBhd2FpdCBvblNhdmUodmFsdWUgYXMgVG9rZW5FeHBpcnlPcHRpb24pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0b2tlbiBzdGF0dXMgaW5mb3JtYXRpb25cbiAgICovXG4gIHN0YXRpYyByZW5kZXJUb2tlblN0YXR1cyhcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgZXhwaXJ5RGF0ZTogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCB0aW1lUmVtYWluaW5nID0gVG9rZW5NYW5hZ2VyLmdldFRpbWVSZW1haW5pbmcoZXhwaXJ5RGF0ZSk7XG4gICAgY29uc3QgaXNFeHBpcmVkID0gVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKGV4cGlyeURhdGUpO1xuICAgIGNvbnN0IG5lZWRzUmVmcmVzaCA9IFRva2VuTWFuYWdlci5uZWVkc1JlZnJlc2hTb29uKGV4cGlyeURhdGUpO1xuXG4gICAgbGV0IHN0YXR1c1RleHQ6IHN0cmluZztcbiAgICBcbiAgICBpZiAoIWV4cGlyeURhdGUpIHtcbiAgICAgIC8vIFVubGltaXRlZCB0b2tlblxuICAgICAgc3RhdHVzVGV4dCA9IFwiXHUyNzA1IFRva2VuIHZhbGlkOiBVbmxpbWl0ZWRcIjtcbiAgICB9IGVsc2UgaWYgKGlzRXhwaXJlZCkge1xuICAgICAgc3RhdHVzVGV4dCA9IFwiXHUyNkEwXHVGRTBGIFRva2VuIGV4cGlyZWRcIjtcbiAgICB9IGVsc2UgaWYgKG5lZWRzUmVmcmVzaCkge1xuICAgICAgc3RhdHVzVGV4dCA9IGBcdTI2QTBcdUZFMEYgVG9rZW4gZXhwaXJlcyBpbiAke3RpbWVSZW1haW5pbmd9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdHVzVGV4dCA9IGBcdTI3MDUgVG9rZW4gdmFsaWQgZm9yICR7dGltZVJlbWFpbmluZ31gO1xuICAgIH1cblxuICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKFwiVG9rZW4gU3RhdHVzXCIpLnNldERlc2Moc3RhdHVzVGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIGFjY291bnQgY29ubmVjdGlvbiBzZXR0aW5nIHdpdGggYnV0dG9uc1xuICAgKi9cbiAgc3RhdGljIHJlbmRlckFjY291bnRTZXR0aW5nKFxuICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcbiAgICBpc0Nvbm5lY3RlZDogYm9vbGVhbixcbiAgICBjbGllbnRJZDogc3RyaW5nLFxuICAgIG9uQ29ubmVjdDogKCkgPT4gdm9pZCxcbiAgICBvbkRpc2Nvbm5lY3Q6ICgpID0+IFByb21pc2U8dm9pZD4sXG4gICAgb25TeW5jOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxuICApOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcImlzIGNvbm5lY3RlZDpcIiwgaXNDb25uZWN0ZWQpO1xuXG4gICAgY29uc3QgYWNjb3VudFNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgIC5zZXROYW1lKFwiQWNjb3VudFwiKVxuICAgICAgLnNldERlc2MoaXNDb25uZWN0ZWQgPyBcIlx1MjcwNSBDb25uZWN0ZWRcIiA6IFwiXHUyNzRDIE5vdCBDb25uZWN0ZWRcIik7XG5cbiAgICBpZiAoaXNDb25uZWN0ZWQpIHtcbiAgICAgIC8vIFN5bmMgQ2FsZW5kYXIgYnV0dG9uXG4gICAgICBhY2NvdW50U2V0dGluZy5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJTeW5jIENhbGVuZGFyXCIpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IG9uU3luYygpO1xuICAgICAgICB9KSxcbiAgICAgICk7XG5cbiAgICAgIC8vIERpc2Nvbm5lY3QgYnV0dG9uXG4gICAgICBhY2NvdW50U2V0dGluZy5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgYnRuXG4gICAgICAgICAgLnNldFdhcm5pbmcoKVxuICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiRGlzY29ubmVjdFwiKVxuICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IG9uRGlzY29ubmVjdCgpO1xuICAgICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2hvdyB3YXJuaW5nIGlmIG5vIENsaWVudCBJRFxuICAgICAgaWYgKCFjbGllbnRJZCB8fCBjbGllbnRJZCA9PT0gXCJcIikge1xuICAgICAgICBhY2NvdW50U2V0dGluZy5zZXREZXNjKFwiXHUyNkEwXHVGRTBGIFBsZWFzZSBzZXQgQ2xpZW50IElEIGZpcnN0XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ29ubmVjdCBidXR0b25cbiAgICAgICAgYWNjb3VudFNldHRpbmcuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgYnRuXG4gICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29ubmVjdCB0byBHb29nbGVcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgb25Db25uZWN0KCk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBBcHAsXG4gIEVkaXRvcixcbiAgRWRpdG9yUG9zaXRpb24sXG4gIEVkaXRvclN1Z2dlc3QsXG4gIEVkaXRvclN1Z2dlc3RDb250ZXh0LFxuICBFZGl0b3JTdWdnZXN0VHJpZ2dlckluZm8sXG4gIFRGaWxlLFxuICBOb3RpY2UsXG59IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFBNQ1BsdWdpbiBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgR29vZ2xlQ2FsZW5kYXJBUEksIENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi90YWJzL2dvb2dsZVwiO1xuaW1wb3J0IHsgQ3JlYXRlRXZlbnRNb2RhbCB9IGZyb20gXCIuL2NyZWF0ZS1ldmVudFwiO1xuXG5pbnRlcmZhY2UgRXZlbnRTdWdnZXN0aW9uIHtcbiAgaXNDcmVhdGU/OiBib29sZWFuO1xuICBldmVudD86IENhbGVuZGFyRXZlbnQ7XG4gIHN1bW1hcnk6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEVkaXRvckV2ZW50U3VnZ2VzdGlvbiBleHRlbmRzIEVkaXRvclN1Z2dlc3Q8RXZlbnRTdWdnZXN0aW9uPiB7XG4gIHBsdWdpbjogUE1DUGx1Z2luO1xuICBwcml2YXRlIGNhY2hlZEV2ZW50czogQ2FsZW5kYXJFdmVudFtdID0gW107XG4gIHByaXZhdGUgbGFzdEZldGNoVGltZTogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBDQUNIRV9EVVJBVElPTiA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlc1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBNQ1BsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvblRyaWdnZXIoXG4gICAgY3Vyc29yOiBFZGl0b3JQb3NpdGlvbixcbiAgICBlZGl0b3I6IEVkaXRvcixcbiAgICBmaWxlOiBURmlsZSxcbiAgKTogRWRpdG9yU3VnZ2VzdFRyaWdnZXJJbmZvIHwgbnVsbCB7XG4gICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICBjb25zdCB0ZXh0QmVmb3JlQ3Vyc29yID0gbGluZS5zdWJzdHJpbmcoMCwgY3Vyc29yLmNoKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSAnOicgdHJpZ2dlciBpbiB0aGUgbGluZVxuICAgIGNvbnN0IGNvbG9uTWF0Y2ggPSB0ZXh0QmVmb3JlQ3Vyc29yLm1hdGNoKC86KFtcXHdcXHNdKikkLyk7XG5cbiAgICBpZiAoY29sb25NYXRjaCkge1xuICAgICAgY29uc3QgcXVlcnkgPSBjb2xvbk1hdGNoWzFdIHx8IFwiXCI7XG4gICAgICBjb25zdCBzdGFydENoID0gY3Vyc29yLmNoIC0gY29sb25NYXRjaFswXS5sZW5ndGggKyAxOyAvLyArMSB0byBza2lwIHRoZSAnOidcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6IHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiBzdGFydENoIH0sXG4gICAgICAgIGVuZDogY3Vyc29yLFxuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBmZXRjaEV2ZW50c1dpdGhDYWNoZShxdWVyeT86IHN0cmluZyk6IFByb21pc2U8Q2FsZW5kYXJFdmVudFtdPiB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBzaG91bGRSZWZldGNoID0gbm93IC0gdGhpcy5sYXN0RmV0Y2hUaW1lID4gdGhpcy5DQUNIRV9EVVJBVElPTjtcblxuICAgIGlmIChzaG91bGRSZWZldGNoIHx8IHRoaXMuY2FjaGVkRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggZXZlbnRzIGZvciB0aGUgbmV4dCAzMCBkYXlzIGFuZCBwYXN0IDEgZGF5c1xuICAgICAgICBjb25zdCB0aW1lTWluID0gbmV3IERhdGUoXG4gICAgICAgICAgRGF0ZS5ub3coKSAtIDEgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICAgICApLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHRpbWVNYXggPSBuZXcgRGF0ZShcbiAgICAgICAgICBEYXRlLm5vdygpICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGltZVJhbmdlICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgICAgKS50b0lTT1N0cmluZygpO1xuXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRzID0gYXdhaXQgR29vZ2xlQ2FsZW5kYXJBUEkuZmV0Y2hFdmVudHMoXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgXCJwcmltYXJ5XCIsXG4gICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgIHRpbWVNaW4sXG4gICAgICAgICAgdGltZU1heCxcbiAgICAgICAgICAyNTAsXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW5FeHBpcnlEYXRlLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLmxhc3RGZXRjaFRpbWUgPSBub3c7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZXZlbnRzOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jYWNoZWRFdmVudHM7XG4gIH1cblxuICBwcml2YXRlIGZpbHRlckV2ZW50cyhcbiAgICBldmVudHM6IENhbGVuZGFyRXZlbnRbXSxcbiAgICBxdWVyeTogc3RyaW5nLFxuICApOiBDYWxlbmRhckV2ZW50W10ge1xuICAgIGlmICghcXVlcnkgfHwgcXVlcnkudHJpbSgpID09PSBcIlwiKSB7XG4gICAgICByZXR1cm4gZXZlbnRzO1xuICAgIH1cblxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcblxuICAgIHJldHVybiBldmVudHMuZmlsdGVyKChldmVudCkgPT4ge1xuICAgICAgLy8gU2VhcmNoIGluIHN1bW1hcnlcbiAgICAgIGlmIChldmVudC5zdW1tYXJ5Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWFyY2ggaW4gZGVzY3JpcHRpb25cbiAgICAgIGlmIChldmVudC5kZXNjcmlwdGlvbj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VhcmNoIGluIGxvY2F0aW9uXG4gICAgICBpZiAoZXZlbnQubG9jYXRpb24/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlYXJjaCBpbiBhdHRlbmRlZXNcbiAgICAgIGlmIChcbiAgICAgICAgZXZlbnQuYXR0ZW5kZWVzPy5zb21lKFxuICAgICAgICAgIChhdHRlbmRlZSkgPT5cbiAgICAgICAgICAgIGF0dGVuZGVlLmVtYWlsPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XG4gICAgICAgICAgICBhdHRlbmRlZS5kaXNwbGF5TmFtZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSxcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH1cblxuICAvLyByZXR1cm4gbGlzdCBvZiBzdWdnZXN0aW9uc1xuICBhc3luYyBnZXRTdWdnZXN0aW9ucyhcbiAgICBjb250ZXh0OiBFZGl0b3JTdWdnZXN0Q29udGV4dCxcbiAgKTogUHJvbWlzZTxFdmVudFN1Z2dlc3Rpb25bXT4ge1xuICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbiA9PT0gXCJcIikge1xuICAgICAgY29uc29sZS5sb2coXCJjb25uZWN0IGdvb2dsZSBjYWxlbmRhciBmaXJzdFwiKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJQbGVhc2UgY29ubmVjdCB0byBHb29nbGUgQ2FsZW5kYXIgZmlyc3RcIik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgcXVlcnkgPSAoY29udGV4dC5xdWVyeSB8fCBcIlwiKS50cmltKCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZldGNoIGFsbCBldmVudHMgZnJvbSBjYWNoZVxuICAgICAgY29uc3QgYWxsRXZlbnRzID0gYXdhaXQgdGhpcy5mZXRjaEV2ZW50c1dpdGhDYWNoZSgpO1xuXG4gICAgICAvLyBGaWx0ZXIgZXZlbnRzIGJhc2VkIG9uIHF1ZXJ5XG4gICAgICBjb25zdCBmaWx0ZXJlZEV2ZW50cyA9IHRoaXMuZmlsdGVyRXZlbnRzKGFsbEV2ZW50cywgcXVlcnkpO1xuXG4gICAgICBjb25zb2xlLmxvZyhcImZpbHRlcmVkIGV2ZW50c1wiLCBmaWx0ZXJlZEV2ZW50cyk7XG5cbiAgICAgIC8vIFJldHVybiBjcmVhdGUgb3B0aW9uICsgZmlsdGVyZWQgZXZlbnRzXG4gICAgICBjb25zdCBzdWdnZXN0aW9uczogRXZlbnRTdWdnZXN0aW9uW10gPSBbXTtcblxuICAgICAgc3VnZ2VzdGlvbnMucHVzaChcbiAgICAgICAgLi4uZmlsdGVyZWRFdmVudHMubWFwKChldmVudCkgPT4gKHtcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICBzdW1tYXJ5OiBldmVudC5zdW1tYXJ5IHx8IGV2ZW50LmRlc2NyaXB0aW9uIHx8IFwiVW50aXRsZWQgRXZlbnRcIixcbiAgICAgICAgfSkpLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIGlzQ3JlYXRlOiB0cnVlLFxuICAgICAgICAgIHN1bW1hcnk6IGArIENyZWF0ZSBuZXcgZXZlbnRgLFxuICAgICAgICB9LFxuICAgICAgICAuLi5zdWdnZXN0aW9ucyxcbiAgICAgIF07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHN1Z2dlc3Rpb25zOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLy8gcmVuZGVyIGVhY2ggc3VnZ2VzdGlvblxuICByZW5kZXJTdWdnZXN0aW9uKGl0ZW06IEV2ZW50U3VnZ2VzdGlvbiwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgZWwuZW1wdHkoKTtcblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IGNsczogXCJnY2FsLXN1Z2dlc3Rpb24tY29udGFpbmVyXCIgfSk7XG4gICAgY29udGFpbmVyLnN0eWxlLmNzc1RleHQgPVxuICAgICAgXCJkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHBhZGRpbmc6IDRweCAwO1wiO1xuXG4gICAgaWYgKGl0ZW0uaXNDcmVhdGUpIHtcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ICs9XG4gICAgICAgIFwiY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IGZvbnQtd2VpZ2h0OiA2MDA7XCI7XG4gICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogaXRlbS5zdW1tYXJ5IH0pO1xuICAgIH0gZWxzZSBpZiAoaXRlbS5ldmVudCkge1xuICAgICAgY29uc3QgZXZlbnQgPSBpdGVtLmV2ZW50O1xuICAgICAgY29uc3QgbGVmdERpdiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgIGxlZnREaXYuc3R5bGUuY3NzVGV4dCA9IFwiZmxleDogMTsgbWluLXdpZHRoOiAwO1wiO1xuXG4gICAgICAvLyBFdmVudCB0aXRsZVxuICAgICAgY29uc3QgdGl0bGVFbCA9IGxlZnREaXYuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICB0ZXh0OiBldmVudC5zdW1tYXJ5IHx8IFwiVW50aXRsZWQgRXZlbnRcIixcbiAgICAgICAgY2xzOiBcImdjYWwtZXZlbnQtdGl0bGVcIixcbiAgICAgIH0pO1xuICAgICAgdGl0bGVFbC5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICAgXCJmb250LXdlaWdodDogNTAwOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgd2hpdGUtc3BhY2U6IG5vd3JhcDtcIjtcblxuICAgICAgLy8gQWRkIGxvY2F0aW9uIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKGV2ZW50LmxvY2F0aW9uKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uRWwgPSBsZWZ0RGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICB0ZXh0OiBldmVudC5sb2NhdGlvbixcbiAgICAgICAgICBjbHM6IFwiZ2NhbC1ldmVudC1sb2NhdGlvblwiLFxuICAgICAgICB9KTtcbiAgICAgICAgbG9jYXRpb25FbC5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICAgICBcImZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IHdoaXRlLXNwYWNlOiBub3dyYXA7IG1hcmdpbi10b3A6IDJweDtcIjtcbiAgICAgIH1cblxuICAgICAgLy8gRGF0ZSBhbmQgdGltZSBvbiB0aGUgcmlnaHRcbiAgICAgIGNvbnN0IHJpZ2h0RGl2ID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgcmlnaHREaXYuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAgIFwiZmxleC1zaHJpbms6IDA7IG1hcmdpbi1sZWZ0OiAxMnB4OyB0ZXh0LWFsaWduOiByaWdodDtcIjtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoXG4gICAgICAgICAgZXZlbnQuc3RhcnQuZGF0ZVRpbWUgfHwgZXZlbnQuc3RhcnQuZGF0ZSB8fCBcIlwiLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBpc1RvZGF5ID0gc3RhcnREYXRlLnRvRGF0ZVN0cmluZygpID09PSBub3cudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IGlzVG9tb3Jyb3cgPVxuICAgICAgICAgIHN0YXJ0RGF0ZS50b0RhdGVTdHJpbmcoKSA9PT1cbiAgICAgICAgICBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgODY0MDAwMDApLnRvRGF0ZVN0cmluZygpO1xuXG4gICAgICAgIC8vIEZvcm1hdCBkYXRlXG4gICAgICAgIGxldCBkYXRlU3RyID0gXCJcIjtcbiAgICAgICAgaWYgKGlzVG9kYXkpIHtcbiAgICAgICAgICBkYXRlU3RyID0gXCJUb2RheVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVG9tb3Jyb3cpIHtcbiAgICAgICAgICBkYXRlU3RyID0gXCJUb21vcnJvd1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGVTdHIgPSBzdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKFtdLCB7XG4gICAgICAgICAgICBtb250aDogXCJzaG9ydFwiLFxuICAgICAgICAgICAgZGF5OiBcIm51bWVyaWNcIixcbiAgICAgICAgICAgIHllYXI6XG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpICE9PSBub3cuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgID8gXCJudW1lcmljXCJcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0aW1lU3RyID0gXCJcIjtcbiAgICAgICAgaWYgKGV2ZW50LnN0YXJ0LmRhdGVUaW1lKSB7XG4gICAgICAgICAgdGltZVN0ciA9IHN0YXJ0RGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHtcbiAgICAgICAgICAgIGhvdXI6IFwibnVtZXJpY1wiLFxuICAgICAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgICAgIGhvdXIxMjogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aW1lU3RyID0gXCJBbGwgZGF5XCI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEaXNwbGF5IGRhdGVcbiAgICAgICAgY29uc3QgZGF0ZUVsID0gcmlnaHREaXYuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgIHRleHQ6IGRhdGVTdHIsXG4gICAgICAgICAgY2xzOiBcImdjYWwtZXZlbnQtZGF0ZVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgZGF0ZUVsLnN0eWxlLmNzc1RleHQgPSBcImZvbnQtc2l6ZTogMC44NWVtOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XCI7XG5cbiAgICAgICAgLy8gRGlzcGxheSB0aW1lXG4gICAgICAgIGNvbnN0IHRpbWVFbCA9IHJpZ2h0RGl2LmNyZWF0ZUVsKFwiZGl2XCIsIHtcbiAgICAgICAgICB0ZXh0OiB0aW1lU3RyLFxuICAgICAgICAgIGNsczogXCJnY2FsLWV2ZW50LXRpbWVcIixcbiAgICAgICAgfSk7XG4gICAgICAgIHRpbWVFbC5zdHlsZS5jc3NUZXh0ID0gXCJmb250LXNpemU6IDAuOWVtOyBmb250LXdlaWdodDogNTAwO1wiO1xuXG4gICAgICAgIC8vIEFkZCBjb25mZXJlbmNlIGluZGljYXRvciBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKGV2ZW50LmhhbmdvdXRMaW5rIHx8IGV2ZW50LmNvbmZlcmVuY2VEYXRhKSB7XG4gICAgICAgICAgY29uc3QgY29uZmVyZW5jZUVsID0gcmlnaHREaXYuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgICAgICAgdGV4dDogXCJcdUQ4M0NcdURGQTUgVmlkZW9cIixcbiAgICAgICAgICAgIGNsczogXCJnY2FsLWV2ZW50LWNvbmZlcmVuY2VcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25mZXJlbmNlRWwuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAgICAgICBcImZvbnQtc2l6ZTogMC43NWVtOyBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgbWFyZ2luLXRvcDogMnB4O1wiO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmb3JtYXR0aW5nIGRhdGU6XCIsIGUpO1xuICAgICAgICByaWdodERpdi5jcmVhdGVFbChcInNtYWxsXCIsIHtcbiAgICAgICAgICB0ZXh0OiBcIkludmFsaWQgZGF0ZVwiLFxuICAgICAgICAgIGF0dHI6IHsgc3R5bGU6IFwiY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1wiIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIHVzZXIgc2VsZWN0cyBhIHN1Z2dlc3Rpb25cbiAgc2VsZWN0U3VnZ2VzdGlvbihcbiAgICBpdGVtOiBFdmVudFN1Z2dlc3Rpb24sXG4gICAgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCxcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbnRleHQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBjb250ZXh0IGF2YWlsYWJsZVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXRlbS5pc0NyZWF0ZSkge1xuICAgICAgbmV3IENyZWF0ZUV2ZW50TW9kYWwoXG4gICAgICAgIHRoaXMuYXBwLFxuICAgICAgICB0aGlzLnBsdWdpbixcbiAgICAgICAgdGhpcy5jb250ZXh0LnF1ZXJ5LFxuICAgICAgICAoZXZlbnREYXRhKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuY29udGV4dCkge1xuICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBjcmVhdGVkIGV2ZW50IGFzIGEgbGlua1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IGBbJHtldmVudERhdGEudGl0bGV9XSgke2V2ZW50RGF0YS5saW5rfSlgO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmVkaXRvci5yZXBsYWNlUmFuZ2UoXG4gICAgICAgICAgICAgIGZvcm1hdHRlZFRleHQsXG4gICAgICAgICAgICAgIHRoaXMuY29udGV4dC5zdGFydCxcbiAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmVuZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgKS5vcGVuKCk7XG4gICAgfSBlbHNlIGlmIChpdGVtLmV2ZW50KSB7XG4gICAgICBjb25zdCBldmVudCA9IGl0ZW0uZXZlbnQ7XG4gICAgICBjb25zdCBldmVudExpbmsgPVxuICAgICAgICBldmVudC5odG1sTGluayB8fFxuICAgICAgICBgaHR0cHM6Ly9jYWxlbmRhci5nb29nbGUuY29tL2NhbGVuZGFyL2V2ZW50P2VpZD0ke2VuY29kZVVSSUNvbXBvbmVudChldmVudC5pZCl9YDtcblxuICAgICAgY29uc3QgZXZlbnRUaXRsZSA9IGV2ZW50LnN1bW1hcnkgfHwgXCJVbnRpdGxlZCBFdmVudFwiO1xuXG4gICAgICAvLyBGb3JtYXQ6IFtFdmVudCBOYW1lXShHb29nbGUgQ2FsZW5kYXIgTGluaylcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFRleHQgPSBgWyR7ZXZlbnRUaXRsZX1dKCR7ZXZlbnRMaW5rfSlgO1xuXG4gICAgICB0aGlzLmNvbnRleHQuZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICAgICAgZm9ybWF0dGVkVGV4dCxcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0YXJ0LFxuICAgICAgICB0aGlzLmNvbnRleHQuZW5kLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBDbGVhciBjYWNoZSB3aGVuIG5lZWRlZCAoY2FuIGJlIGNhbGxlZCBmcm9tIHBsdWdpbilcbiAgY2xlYXJDYWNoZSgpOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlZEV2ZW50cyA9IFtdO1xuICAgIHRoaXMubGFzdEZldGNoVGltZSA9IDA7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBQaWNrTWVldGluZ0NhbGVuZGFyIGZyb20gXCIuLi9tYWluXCI7XG5pbXBvcnQgeyBHb29nbGVDYWxlbmRhckFQSSwgVG9rZW5NYW5hZ2VyIH0gZnJvbSBcIi4vdGFicy9nb29nbGVcIjtcblxuZXhwb3J0IGNsYXNzIENyZWF0ZUV2ZW50TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHBsdWdpbjogUGlja01lZXRpbmdDYWxlbmRhcjtcbiAgaW5pdGlhbFRpdGxlOiBzdHJpbmc7XG4gIG9uU3VibWl0OiAoZXZlbnREYXRhOiB7IHRpdGxlOiBzdHJpbmc7IGxpbms6IHN0cmluZyB9KSA9PiB2b2lkO1xuXG4gIC8vIEZvcm0gZmllbGRzXG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRhdGU6IHN0cmluZztcbiAgc3RhcnRUaW1lOiBzdHJpbmc7XG4gIGVuZFRpbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgaXNBbGxEYXk6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgcGx1Z2luOiBQaWNrTWVldGluZ0NhbGVuZGFyLFxuICAgIGluaXRpYWxUaXRsZTogc3RyaW5nLFxuICAgIG9uU3VibWl0OiAoZXZlbnREYXRhOiB7IHRpdGxlOiBzdHJpbmc7IGxpbms6IHN0cmluZyB9KSA9PiB2b2lkLFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMuaW5pdGlhbFRpdGxlID0gaW5pdGlhbFRpdGxlO1xuICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblxuICAgIC8vIFNldCBkZWZhdWx0c1xuICAgIHRoaXMudGl0bGUgPSBpbml0aWFsVGl0bGUgfHwgXCJcIjtcbiAgICB0aGlzLmlzQWxsRGF5ID0gZmFsc2U7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IFwiXCI7XG5cbiAgICAvLyBEZWZhdWx0IHRvIHRvZGF5XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLmRhdGUgPSBub3cudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0gfHwgXCJcIjtcblxuICAgIC8vIERlZmF1bHQgdGltZXM6IG5vdyArIDEgaG91ciBmb3Igc3RhcnQsICsgMiBob3VycyBmb3IgZW5kXG4gICAgY29uc3Qgc3RhcnRIb3VyID0gKG5vdy5nZXRIb3VycygpICsgMSkgJSAyNDtcbiAgICBjb25zdCBlbmRIb3VyID0gKG5vdy5nZXRIb3VycygpICsgMikgJSAyNDtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IGAke1N0cmluZyhzdGFydEhvdXIpLnBhZFN0YXJ0KDIsIFwiMFwiKX06MDBgO1xuICAgIHRoaXMuZW5kVGltZSA9IGAke1N0cmluZyhlbmRIb3VyKS5wYWRTdGFydCgyLCBcIjBcIil9OjAwYDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJDcmVhdGUgQ2FsZW5kYXIgRXZlbnRcIiB9KTtcblxuICAgIC8vIFRpdGxlXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoXCJFdmVudCB0aXRsZVwiKVxuICAgICAgLnNldERlc2MoXCJOYW1lIG9mIHRoZSBldmVudFwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+XG4gICAgICAgIHRleHRcbiAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoXCJUZWFtIE1lZXRpbmdcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy50aXRsZSlcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlID0gdmFsdWU7XG4gICAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgLy8gRGF0ZVxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKFwiRGF0ZVwiKVxuICAgICAgLnNldERlc2MoXCJFdmVudCBkYXRlXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiWVlZWS1NTS1ERFwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmRhdGUpXG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kYXRlID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gXCJkYXRlXCI7XG4gICAgICB9KTtcblxuICAgIC8vIEFsbC1kYXkgdG9nZ2xlXG4gICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgLnNldE5hbWUoXCJBbGwtZGF5IGV2ZW50XCIpXG4gICAgICAuc2V0RGVzYyhcIlRvZ2dsZSBmb3IgYWxsLWRheSBldmVudHNcIilcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMuaXNBbGxEYXkpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMuaXNBbGxEYXkgPSB2YWx1ZTtcbiAgICAgICAgICAvLyBUb2dnbGUgdGltZSBpbnB1dHMgdmlzaWJpbGl0eVxuICAgICAgICAgIGNvbnN0IHRpbWVTZXR0aW5ncyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRpbWUtc2V0dGluZ1wiKTtcbiAgICAgICAgICB0aW1lU2V0dGluZ3MuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gXCJub25lXCIgOiBcImZsZXhcIjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgLy8gU3RhcnQgdGltZVxuICAgIGNvbnN0IHN0YXJ0VGltZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIlN0YXJ0IHRpbWVcIilcbiAgICAgIC5zZXREZXNjKFwiRXZlbnQgc3RhcnQgdGltZVwiKVxuICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIjA5OjAwXCIpXG4gICAgICAgICAgLnNldFZhbHVlKHRoaXMuc3RhcnRUaW1lKVxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIHRleHQuaW5wdXRFbC50eXBlID0gXCJ0aW1lXCI7XG4gICAgICB9KTtcbiAgICBzdGFydFRpbWVTZXR0aW5nLnNldHRpbmdFbC5hZGRDbGFzcyhcInRpbWUtc2V0dGluZ1wiKTtcblxuICAgIC8vIEVuZCB0aW1lXG4gICAgY29uc3QgZW5kVGltZVNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIkVuZCB0aW1lXCIpXG4gICAgICAuc2V0RGVzYyhcIkV2ZW50IGVuZCB0aW1lXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiMTA6MDBcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5lbmRUaW1lKVxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB0ZXh0LmlucHV0RWwudHlwZSA9IFwidGltZVwiO1xuICAgICAgfSk7XG4gICAgZW5kVGltZVNldHRpbmcuc2V0dGluZ0VsLmFkZENsYXNzKFwidGltZS1zZXR0aW5nXCIpO1xuXG4gICAgLy8gRGVzY3JpcHRpb25cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIkRlc2NyaXB0aW9uXCIpXG4gICAgICAuc2V0RGVzYyhcIkFkZGl0aW9uYWwgZGV0YWlscyAob3B0aW9uYWwpXCIpXG4gICAgICAuYWRkVGV4dEFyZWEoKHRleHQpID0+IHtcbiAgICAgICAgdGV4dFxuICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihcIk1lZXRpbmcgYWdlbmRhLCBub3RlcywgZXRjLlwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmRlc2NyaXB0aW9uKVxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA0O1xuICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgIH0pO1xuXG4gICAgLy8gQnV0dG9uc1xuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgY2xzOiBcIm1vZGFsLWJ1dHRvbi1jb250YWluZXJcIixcbiAgICB9KTtcbiAgICBidXR0b25Db250YWluZXIuc3R5bGUuY3NzVGV4dCA9XG4gICAgICBcImRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgbWFyZ2luLXRvcDogMjBweDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcIjtcblxuICAgIC8vIENhbmNlbCBidXR0b25cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNhbmNlbFwiIH0pO1xuICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGJ1dHRvblxuICAgIGNvbnN0IGNyZWF0ZUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICB0ZXh0OiBcIkNyZWF0ZSBFdmVudFwiLFxuICAgICAgY2xzOiBcIm1vZC1jdGFcIixcbiAgICB9KTtcbiAgICBjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY3JlYXRlRXZlbnQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUV2ZW50KCkge1xuICAgIC8vIFZhbGlkYXRlIGlucHV0c1xuICAgIGlmICghdGhpcy50aXRsZS50cmltKCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTI3NEMgRXZlbnQgdGl0bGUgaXMgcmVxdWlyZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmRhdGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTI3NEMgRXZlbnQgZGF0ZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNBbGxEYXkgJiYgKCF0aGlzLnN0YXJ0VGltZSB8fCAhdGhpcy5lbmRUaW1lKSkge1xuICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBTdGFydCBhbmQgZW5kIHRpbWVzIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhY2Nlc3MgdG9rZW4gZXhpc3RzXG4gICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbikge1xuICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBOb3QgYXV0aGVudGljYXRlZC4gUGxlYXNlIGNvbm5lY3QgeW91ciBHb29nbGUgYWNjb3VudCBpbiBzZXR0aW5ncy5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdG9rZW4gaGFzIGV4cGlyZWRcbiAgICBpZiAoVG9rZW5NYW5hZ2VyLmlzVG9rZW5FeHBpcmVkKHRoaXMucGx1Z2luLnNldHRpbmdzLnRva2VuRXhwaXJ5RGF0ZSkpIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJcdTI3NEMgQWNjZXNzIHRva2VuIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVjb25uZWN0IHlvdXIgR29vZ2xlIGFjY291bnQgaW4gc2V0dGluZ3MuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBCdWlsZCBldmVudCBvYmplY3RcbiAgICAgIGNvbnN0IGV2ZW50OiBhbnkgPSB7XG4gICAgICAgIHN1bW1hcnk6IHRoaXMudGl0bGUudHJpbSgpLFxuICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbi50cmltKCkgfHwgdW5kZWZpbmVkLFxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMuaXNBbGxEYXkpIHtcbiAgICAgICAgLy8gQWxsLWRheSBldmVudFxuICAgICAgICBldmVudC5zdGFydCA9IHtcbiAgICAgICAgICBkYXRlOiB0aGlzLmRhdGUsXG4gICAgICAgICAgdGltZVpvbmU6IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZSxcbiAgICAgICAgfTtcbiAgICAgICAgZXZlbnQuZW5kID0ge1xuICAgICAgICAgIGRhdGU6IHRoaXMuZGF0ZSxcbiAgICAgICAgICB0aW1lWm9uZTogSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGltZWQgZXZlbnRcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlVGltZSA9IGAke3RoaXMuZGF0ZX1UJHt0aGlzLnN0YXJ0VGltZX06MDBgO1xuICAgICAgICBjb25zdCBlbmREYXRlVGltZSA9IGAke3RoaXMuZGF0ZX1UJHt0aGlzLmVuZFRpbWV9OjAwYDtcblxuICAgICAgICBldmVudC5zdGFydCA9IHtcbiAgICAgICAgICBkYXRlVGltZTogc3RhcnREYXRlVGltZSxcbiAgICAgICAgICB0aW1lWm9uZTogSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lLFxuICAgICAgICB9O1xuICAgICAgICBldmVudC5lbmQgPSB7XG4gICAgICAgICAgZGF0ZVRpbWU6IGVuZERhdGVUaW1lLFxuICAgICAgICAgIHRpbWVab25lOiBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmUsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgZXZlbnQ6XCIsIGV2ZW50KTtcblxuICAgICAgLy8gQ3JlYXRlIGV2ZW50IHZpYSBBUElcbiAgICAgIGNvbnN0IGNyZWF0ZWRFdmVudCA9IGF3YWl0IEdvb2dsZUNhbGVuZGFyQVBJLmNyZWF0ZUV2ZW50KFxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY2Nlc3NUb2tlbixcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIFwicHJpbWFyeVwiLFxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2tlbkV4cGlyeURhdGUsXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIkV2ZW50IGNyZWF0ZWQ6XCIsIGNyZWF0ZWRFdmVudCk7XG5cbiAgICAgIC8vIEdldCB0aGUgZXZlbnQgbGlua1xuICAgICAgY29uc3QgZXZlbnRMaW5rID1cbiAgICAgICAgY3JlYXRlZEV2ZW50Lmh0bWxMaW5rIHx8XG4gICAgICAgIGBodHRwczovL2NhbGVuZGFyLmdvb2dsZS5jb20vY2FsZW5kYXIvZXZlbnQ/ZWlkPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNyZWF0ZWRFdmVudC5pZCl9YDtcblxuICAgICAgLy8gU3VjY2VzcyFcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBFdmVudCBcIiR7dGhpcy50aXRsZX1cIiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSFgKTtcblxuICAgICAgLy8gQ2FsbCB0aGUgY2FsbGJhY2sgd2l0aCBldmVudCBkYXRhXG4gICAgICB0aGlzLm9uU3VibWl0KHtcbiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICAgIGxpbms6IGV2ZW50TGluayxcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBldmVudDpcIiwgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIjtcbiAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIGV2ZW50OiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOzs7QUNDQSxJQUFBQSxtQkFBK0M7OztBQ094QyxJQUFNLDBCQUFrRDtBQUFBLEVBQzdELFVBQVU7QUFBQSxFQUNWLGFBQWE7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLGlCQUFpQjtBQUFBLEVBQ2pCLFdBQVc7QUFDYjtB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
